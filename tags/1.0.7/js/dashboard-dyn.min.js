/*! livepress -v1.0.5
 * http://livepress.com/
 * Copyright (c) 2013 LivePress, Inc.
 */
function DHelpers(){function a(a){var b=this;b.enable=function(){b.counterContainer=jQuery(a).siblings(".count-update"),b.count=0,b.enabled=!0,b.counterContainer.show()},b.reset=function(){"undefined"!=typeof b.counterContainer&&(b.count=0,b.counterContainer.text("0"))},b.disable=function(){"undefined"!=typeof b.counterContainer&&(b.enabled=!1,b.count=0,b.counterContainer.text("0").hide())},b.increment=function(a){"undefined"!=typeof b.counterContainer&&(b.count+=a||1,b.counterContainer.text(b.count))},b.isEnabled=function(){return b.enabled}}var b=this,c=document.getElementById("lp-pane-errors"),d=jQuery(c);b.saveEEState=function(a){var b=Livepress.Config.post_id;Livepress.storage.set("post-"+b+"-eeenabled",a)},b.getEEState=function(){if("edit"===jQuery.getUrlVar("action")){var a=Livepress.Config.post_id;if(!a)return!1;if("true"===Livepress.storage.get("post-"+a+"-eeenabled"))return!0}return!1},b.hideAndMark=function(a){return a.hide().addClass("spinner-hidden"),a},b.disableAndDisplaySpinner=function(a){var b=jQuery("<div class='lp-spinner'></div>");if(a.is("input")){a.attr("disabled",!0);var c=this.hideAndMark(a.siblings(".button"));b.css("float",c.css("float"))}a.after(b)},b.enableAndHideSpinner=function(a){a.attr("disabled",!1),a.siblings(".button").show(),a.siblings(".lp-spinner").remove()},b.setSwitcherState=function(a){jQuery(document.getElementById("live-switcher")).removeClass("connected"===a?"disconnected":"connected").addClass(a),jQuery(window).trigger(a+".livepress")},b.handleErrors=function(a){console.log(a),d.html(""),d.hide(),jQuery.each(a,function(a,b){var c=document.createElement("p");c.className="lp-pane-error "+a,c.innerHtml=b,d.append(c)}),d.show()},b.clearErrors=function(a){null!==c&&jQuery(c.querySelectorAll(a)).remove()},b.hideErrors=function(){d.hide()},b.createLiveCounter=function(b){return new a(b)},b.setupLivePressTabs=function(){jQuery("#livepress_status_meta_box").hasClass("live")?(jQuery(".livepress-update-form").not(":visible")&&jQuery("#content-livepress").trigger("click"),"true"!==jQuery("a#blogging-tools-link").attr("aria-expanded")&&jQuery("a#blogging-tools-link").trigger("click")):(jQuery(".livepress-update-form").is(":visible")&&jQuery("a.switch-tmce").trigger("click"),"true"===jQuery("a#blogging-tools-link").attr("aria-expanded")&&jQuery("a#blogging-tools-link").trigger("click"))}}var Livepress=Livepress||{};Livepress.ensureExists=function(a){return void 0===a&&(a={}),a};var console=console||{log:function(){}};String.prototype.parseGMT=function(a){var b,c,d=this,e=a||"h:i:s a";return b=Date.parse(d.replace(/-/gi,"/"),"Y/m/d H:i:s"),c=new Date(b),"Invalid Date"===c.toString()?this.toString():c=c.format(e)},String.prototype.replaceAll=function(a,b){var c=this;return c=c.split(a).join(b)},jQuery.fn.getBg=function(){var a,b,c,d=jQuery(this);return a=d.css("background-color"),"transparent"!==a&&"rgba(0, 0, 0, 0)"!==a&&void 0!==a?a:(b=this.parents().filter(function(){return c=d.css("background-color"),"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c}).eq(0).css("background-color"),b?d.css("background-color",b):d.css("background-color","#ffffff"),void 0)},jQuery.extend({getUrlVars:function(a){for(var b,c=[],d=a.href||window.location.href,e=d.slice(d.indexOf("?")+1).split("&"),f=0;f<e.length;f++)b=e[f].split("="),c.push(b[0]),c[b[0]]=b[1];return c},getUrlVar:function(a,b){return jQuery.getUrlVars(b||!1)[a]}}),jQuery.fn.outerHTML=function(a){return a?this.before(a).remove():jQuery("<div>").append(this.eq(0).clone()).html()},jQuery.fn.autolink=function(){return this.each(function(){var a=new RegExp('((http|https|ftp)://[\\w?=&./-;#~%-]+(?![\\w\\s?&./;#~%"=-]*>))',"g");jQuery(this).html(jQuery(this).html().replace(a,'<a href="$1">$1</a> '))})},"undefined"==typeof document.activeElement&&jQuery(document).focusin(function(a){document.activeElement=a.target}).focusout(function(){document.activeElement=null}),jQuery.extend(jQuery.expr[":"],{focus:function(a){return a===document.activeElement}}),Date.prototype.format=function(a){var b,c,d="",e=Date.replaceChars;for(b=0;b<a.length;b++)c=a.charAt(b),d+=e[c]?e[c].call(this):c;return d},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return 1===this.getDate()%10&&11!==this.getDate()?"st":2===this.getDate()%10&&12!==this.getDate()?"nd":3===this.getDate()%10&&13!==this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){return"Not Yet Supported"},W:function(){return"Not Yet Supported"},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return"Not Yet Supported"},L:function(){return 0===this.getFullYear()%4&&0!==this.getFullYear()%100||0===this.getFullYear()%400?"1":"0"},o:function(){return"Not Supported"},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return"Not Yet Supported"},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},e:function(){return"Not Yet Supported"},I:function(){return"Not Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":"+(Math.abs(this.getTimezoneOffset()%60)<10?"0":"")+Math.abs(this.getTimezoneOffset()%60)},T:function(){var a,b;return b=this.getMonth(),this.setMonth(0),a=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1"),this.setMonth(b),a},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d")+"T"+this.format("H:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},function(a){var b=function(a){return"object"==typeof a?a:{top:a,left:a}},c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1},c.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!==a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||"BackCompat"===d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"===d&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.speed||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){var g,h=this,i=a(h),j=d,k={},l=i.is("html,body"),m=function(a){i.animate(k,e,f.easing,a&&function(){a.call(this,d,f)})};"number"!=typeof j&&"string"!=typeof j||!/^([\-+]=)?\d+(\.\d+)?(px|%)?$/.test(j)?(("number"==typeof j||"string"==typeof j)&&(j=a(j,this)),(j.is||j.style)&&(g=(j=a(j)).offset())):j=b(j),a.each(f.axis.split(""),function(a,b){var d="x"===b?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=h[n],p=c.max(h,b);if(g)k[n]=g[e]+(l?0:o-i.offset()[e]),f.margin&&(k[n]-=parseInt(j.css("margin"+d),10)||0,k[n]-=parseInt(j.css("border"+d+"Width"),10)||0),k[n]+=f.offset[e]||0,f.over[e]&&(k[n]+=j["x"===b?"width":"height"]()*f.over[e]);else{var q=j[e];k[n]=q.slice&&"%"===q.slice(-1)?parseFloat(q)/100*p:q}/^\d+$/.test(k[n])&&(k[n]=k[n]<=0?0:Math.min(k[n],p)),!a&&f.queue&&(o!==k[n]&&m(f.onAfterFirst),delete k[n])}),m(f.onAfter)}).end()},c.max=function(b,c){var d="x"===c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(jQuery),function(jQuery){var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]},b=function(b){var c;return b&&b.constructor===Array&&3===b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:a[jQuery.trim(b).toLowerCase()]},c=function(a,c){var d;do{if(d=jQuery.curCSS(a,c),""!==d&&"transparent"!==d||jQuery.nodeName(a,"body"))break;c="backgroundColor"}while(a=a.parentNode);return b(d)};jQuery.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(a,d){jQuery.fx.step[d]=function(a){void 0===a.start&&(a.start=c(a.elem,d),a.end=b(a.end)),a.elem.style[d]="rgb("+[Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)].join(",")+")"}})}(jQuery),function(){var a=function(){var a=!1;this.settings_enabled=!1,jQuery("input:text, textarea").on("focusin",function(){a=!0}).on("focusout",function(){a=!1}),this.shouldScroll=function(){return this.settings_enabled&&!a}};Livepress.Scroll=new a}(),Livepress.DOMManipulator=function(a,b){this.custom_background_color=b,this.containerJQueryElement="string"==typeof a?jQuery(a):a,this.containerElement=this.containerJQueryElement[0],this.cleaned_ws=!1},Livepress.DOMManipulator.prototype={debug:!1,log:function(){this.debug&&console.log.apply(console,arguments)},update:function(a,b){b=b||{},this.log("Livepress.DOMManipulator.update begin."),this.clean_updates(),this.apply_changes(a,b);var c=this;setTimeout(function(){c.clean_updates()},1500),this.log("Livepress.DOMManipulator.update end.")},selector:function(a){return this.containerJQueryElement.find(a)},selectors:function(){if(0===arguments.length)throw"The method expects arguments.";var a=jQuery.map(arguments,function(a){return a});return this.containerJQueryElement.find(a.join(","))},clean_whitespaces:function(){if(this.cleaned_ws)return!1;this.cleaned_ws=!0;var a=this.containerElement;return this.clean_children_ws(a),!0},block_elements:function(){return{address:1,blockquote:1,center:1,dir:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,noscript:1,ol:1,p:1,pre:1,table:1,ul:1,div:1,math:1,caption:1,colgroup:1,col:1,dd:1,dt:1,frameset:1,li:1,tbody:1,td:1,thead:1,tfoot:1,th:1,tr:1}},is_block_element:function(a){return"string"==typeof a?this.block_elements().hasOwnProperty(a.toLowerCase()):!1},remove_whitespace:function(a){var b,c=!1,d=a.parentNode;return a===d.firstChild||a===d.lastChild?c=!0:(b=a.previousSibling,null!==b&&1===b.nodeType&&this.is_block_element(b.tagName)&&(c=!0)),c},clean_children_ws:function(a){var b,c;for(b=!1,c=a.firstChild;null!==c;null)if(3===c.nodeType?/^\s*$/.test(c.nodeValue)&&this.remove_whitespace(c)&&(b=!0):this.clean_children_ws(c),b){var d=c;c=c.nextSibling,a.removeChild(d),b=!1}else c=c.nextSibling},clean_updates:function(){this.log("DOMManipulator clean_updates."),jQuery.each(this.selector("span.oortle-diff-text-updated"),function(){var a;a=this.childNodes.length>1?this.childNodes[1]:this.childNodes[0],8!==a.nodeType&&(a=a.childNodes[0]),this.parentNode.replaceChild(a,this)}),this.selector(".oortle-diff-changed").removeClass("oortle-diff-changed"),this.selector(".oortle-diff-inserted").removeClass("oortle-diff-inserted"),this.selector(".oortle-diff-inserted-block").removeClass("oortle-diff-inserted-block"),this.selector(".oortle-diff-removed").remove(),this.selector(".oortle-diff-removed-block").remove()},apply_changes:function(a,b){var c,d=b.effects_display||!1,e=[];for(this.clean_whitespaces(),c=0;c<a.length;c++){this.log("apply changes i=",c," changes.length = ",a.length);var f=a[c];this.log("change[i] = ",f[c]);var g,h,i,j,k,l,m,n;switch(f[0]){case"add_class":try{g=this.get_path_parts(f[1]),h=this.node_at_path(g),this.add_class(h,f[2])}catch(o){this.log("Exception on add_class: ",o)}break;case"set_attr":try{g=this.get_path_parts(f[1]),h=this.node_at_path(g),this.set_attr(h,f[2],f[3])}catch(p){this.log("Exception on set_attr: ",p)}break;case"del_attr":try{g=this.get_path_parts(f[1]),h=this.node_at_path(g),this.del_attr(h,f[2])}catch(q){this.log("Exception on del_attr: ",q)}break;case"set_text":try{this.set_text(f[1],f[2])}catch(r){this.log("Exception on set_text: ",r)}break;case"del_node":try{if(g=this.get_path_parts(f[1]),h=this.node_at_path(g),3===h.nodeType){i=h.parentNode;for(var s=0;s<i.childNodes.length;s++)if(i.childNodes[s]===h){j=i.ownerDocument.createElement("span"),j.appendChild(h),j.className="oortle-diff-removed";break}s<i.childNodes.length?i.insertBefore(j,i.childNodes[s]):i.appendChild(j)}else 8===h.nodeType?h.parentNode.removeChild(h):this.add_class(h,"oortle-diff-removed")}catch(t){this.log("Exception on del_node: ",t)}break;case"push_node":try{if(g=this.get_path_parts(f[1]),h=this.node_at_path(g),null!==h){var u=h.parentNode;this.log("push_node: parentNode = ",u,", node = ",h),e[f[2]]=u.removeChild(h)}}catch(v){this.log("Exception on push_node: ",v)}break;case"pop_node":try{g=this.get_path_parts(f[1]),k=this.get_child_index(g),i=this.node_at_path(this.get_parent_path(g)),k>-1&&null!==i&&(l=e[f[2]],m=i.childNodes.length<=k?null:i.childNodes[k],this.log("pop_node",l,"from register",f[2],"before element",m,"on index ",k," on parent ",i),i.insertBefore(l,m))}catch(w){this.log("Exception on pop_node: ",w)}break;case"ins_node":try{if(g=this.get_path_parts(f[1]),k=this.get_child_index(g),n=this.get_parent_path(g),i=this.node_at_path(n),this.log("ins_node: childIndex = ",k,", parent = ",i),k>-1&&null!==i){l=document.createElement("span");var x=f[2],y=x.match(/(<p>)?<script.*?src="\/\/platform.twitter.com\/widgets.js".*?<\/script>(<\/p>)?/i);x=x.replace(/(<p>)?<script.*?src="\/\/platform.twitter.com\/widgets.js".*?<\/script>(<\/p>)?/i,""),l.innerHTML=x;var z=l.childNodes[0];if(m=i.childNodes.length<=k?null:i.childNodes[k],this.log("the case, childRef = ",m,", content = ",z),i.insertBefore(z,m),null!==y){var A=document.createElement("script");A.src="//platform.twitter.com/widgets.js",i.appendChild(A)}}}catch(B){this.log("Exception on ins_node: ",B)}break;default:throw this.log("Operation not implemented yet."),"Operation not implemented yet."}this.log("i=",c," container: ",this.containerElement.childNodes," -- registers: ",e)}try{this.display(d)}catch(C){this.log("Exception on display: ",C)}try{if(Livepress.Scroll.shouldScroll()){var D=void 0===b.custom_scroll_class?".oortle-diff-inserted-block, .oortle-diff-changed, .oortle-diff-inserted":b.custom_scroll_class;jQuery.scrollTo(D,900,{axis:"y",offset:-30})}}catch(E){this.log("Exception on scroll ",E)}this.log("end apply_changes.")},colorForOperation:function(a){if(0===a.length)return!1;var b={"oortle-diff-inserted":"#55C64D","oortle-diff-changed":"#55C64D","oortle-diff-inserted-block":"#ffff66","oortle-diff-removed-block":"#C63F32","oortle-diff-removed":"#C63F32"},c="#fff";return jQuery.each(b,function(b,d){return a.hasClass(b)?(c=d,!1):void 0}),c},show:function(a){var b=jQuery(a);Livepress.Config.page_active||(b.getBg(),b.data("oldbg",b.css("background-color")),b.addClass("unfocused-lp-update"),b.css("background-color",this.colorForOperation(b))),b.show()},sliderFixed:function(a,b){var c=jQuery,d={slideType:"down",duration:250};b=c.extend({},d,b);var e="down"===b.slideType,f=c(a),g=f.data("originalHeight"),h=f.is(":visible"),i=f.data("originalStyle");return 1===arguments.length&&(e=!h),e===h?!1:(g&&i||(g=f.show().height(),i=f.attr("style"),f.data("originalStyle",i),f.data("originalHeight",g),h||f.hide()),e?f.show().animate({height:g},{duration:b.duration,complete:function(){f.css({height:f.data("originalHeight")}),f.attr("style",f.data("originalStyle")),f.show()}}):f.animate({height:0},{duration:b.duration,complete:function(){f.hide()}}),void 0)},show_with_effects:function(a,b){"string"===this.custom_background_color&&a.css("background-color",this.custom_background_color),a.getBg(),b(a,a.css("background-color"))},display:function(a){if(a){var b=this.selector(".oortle-diff-inserted-block");b.hide().css("height","");var c=this,d=function(a,b){c.sliderFixed(a,"down"),a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800),setTimeout(function(){a.css("background-color","")},1500)};b.each(function(a,b){c.show_with_effects(jQuery(b),d)}),this.show_with_effects(this.selectors(".oortle-diff-inserted",".oortle-diff-changed"),function(a,b){a.slideDown(200);try{a.animate(c.colorForOperation(a),200).animate({backgroundColor:b},800)}catch(d){console.log("Error when animating new comment div.")}setTimeout(function(){a.css("background-color","")},1500)}),this.show_with_effects(this.selectors(".oortle-diff-removed-block",".oortle-diff-removed"),function(a,b){try{a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800).slideUp(200)}catch(d){console.log("Error when removing comment div.")}setTimeout(function(){a.css("background-color","")},1500)})}else this.show(this.selectors(".oortle-diff-changed",".oortle-diff-inserted",".oortle-diff-removed")),this.show(this.selector(".oortle-diff-inserted-block"))},set_text:function(a,b){var c=this.get_path_parts(a),d=this.get_child_index(c),e=this.node_at_path(this.get_parent_path(c));if(d>-1&&null!==e){for(var f=e.childNodes[d],g=jQuery(b),h=0,i=g.length;i>h;h++)e.insertBefore(g[h],f);e.removeChild(f)}},get_path_parts:function(a){for(var b=a.split(":"),c=[],d=0,e=b.length;e>d;d++)c[d]=parseInt(b[d],10);return c},get_child_index:function(a){return a.length>0?parseInt(a[a.length-1],10):-1},get_parent_path:function(a){var b=a.slice();return b.splice(-1,1),b},node_at_path:function(a){return this.get_node_by_path(this.containerElement,a)},get_node_by_path:function(a,b){var c=b.slice();if(c.splice(0,1),0===c.length)return a;for(var d=0,e=a,f=null,g=c.length;g>d&&(e=e.childNodes[c[d]],"undefined"!=typeof e);d++);return d===c.length&&(f=e),f},add_class:function(a,b){null!==a&&(a.className+=" "+b)},set_attr:function(a,b,c){null!==a&&a.setAttribute(b,c)},del_attr:function(a,b){null!==a&&a.removeAttribute(b)}},Livepress.DOMManipulator.clean_updates=function(a){var b=new Livepress.DOMManipulator(a);b.clean_updates()};var Dashboard=Dashboard||{};Dashboard.Controller=Dashboard.Controller||function(){var a=!1,b=jQuery("#lp-pane-holder");jQuery("#lp-pane-holder .pane-bookmark");var c=b.find(".taghint"),d=b.find(".lp-input");jQuery("#twitter-search-subtabs li");var e=function(){void 0!==Dashboard.Comments&&(Livepress.Config.disable_comments?(jQuery("#bar-controls .comment-count").hide(),b.find('div[data-pane-name="Comments"]').hide(),Dashboard.Comments.disable()):Dashboard.Comments.init()),jQuery(window).on("connected.livepress",function(){Dashboard.Twitter.init(),Dashboard.Twitter.conditionallyEnable()}),d.bind("click",function(){c=jQuery(this).parent("div").find(".taghint"),c.css("visibility","hidden")}),c.bind("click",function(){var a=jQuery(this).siblings("input.lp-input");a.focus(),a.click()}),d.bind("blur",function(){""===jQuery(this).val()&&c.css("visibility","visible")});var a='<a id="content-livepress" class="hide-if-no-js wp-switch-editor switch-livepress">Real-Time</a>';jQuery(a).insertAfter("#content-tmce")},f=function(c){var d=jQuery(c.srcElement||c.target),e=jQuery("#publish"),f=jQuery("#lp-switch-panel .warning");a=a?!1:!0,Dashboard.Helpers.saveEEState(a.toString()),a?(f.hide(),e.data("publishText",e.val()),"Update"===e.val()?e.val("Save and Refresh"):e.val("Publish and Refresh"),e.removeClass("button-primary").addClass("button-secondary"),jQuery(window).trigger("start.livepress"),jQuery("#wp-content-editor-tools").unbind()):(f.show(),e.val(e.data("publishText")).removeClass("button-secondary").addClass("button-primary"),jQuery(window).trigger("stop.livepress"),d.hasClass("switch-html")?switchEditors.go("content","html"):d.hasClass("switch-tmce")&&switchEditors.go("content","tmce")),b.toggleClass("scroll-pane")};jQuery("#wp-content-editor-tools").on("click","#content-livepress",f),jQuery("#poststuff").on("click",".secondary-editor-tools .switch-tmce, .secondary-editor-tools .switch-html",f),Dashboard.Helpers.setupLivePressTabs();var g=function(a){Dashboard.Twitter.conditionallyEnable(),Dashboard.Comments.conditionallyEnable(),a.find("span.count-update").hide()};jQuery(".blogging-tools-tabs ul li").on("click",function(){var a=jQuery(this);a.is(".active")===!1&&g(a)}),e(),jQuery("#livepress_status_meta_box").hasClass("live")&&f({srcElement:null})},Dashboard.Helpers=Dashboard.Helpers||new DHelpers;var Collaboration=Livepress.ensureExists(Collaboration);Collaboration.chat_topic_id=function(){var a=Collaboration.post_topic()+"_chat";return console.log("Collaboration.chat_topic evaluation -- "+a),a},Collaboration.Chat={enabled:!1,nextShade:!1,html:["<div>",'<div id="chat-messages">','<div id="inner-chat-messages"></div>',"</div>",'<div id="chat-form-message"><hr />',"<form>",'<input id="chat_message" type="text" name="chat_message" style="width:240px;" />','<input id="chat-submit" type="submit" class="button" value="submit" />',"</form></div>","</div>"].join(""),message_html:function(a){this.nextShade=!this.nextShade;var b=this.nextShade?" shaded":"";return'<div class="message'+b+'">'+a+"</div>"},add_message:function(a){var b=jQuery("#chat-messages"),c=jQuery("div#inner-chat-messages"),d="<strong>"+a[0]+"</strong>: "+a[1];c.append(Collaboration.Chat.message_html(d)),b.attr({scrollTop:b.attr("scrollHeight")})},send_message:function(a){if("string"!=typeof a){var b=jQuery("#chat_message");b.length&&""!==b.val()&&(a=b.val(),b.focus().val(""))}return a&&OORTLE.instance.publish(Collaboration.chat_topic_id(),[Collaboration.Author,a]),!1},initialize:function(){if(!this.enabled){var a=function(){var a=jQuery("#livepress-chat-window"),b=a.find("div:first"),c=jQuery("#chat-messages"),d=jQuery("#chat_message"),e=jQuery("#chat-submit").width();c.height(a.height()-jQuery("#chat-form-message").height()+5),d.width(b.width()-e-20)};console.log(this,this.html),jQuery('<div id="livepress-chat-window" title="Live Press <span>Live Chat</span>">'+this.html+"</div>").dialog({width:330,minWidth:130,minHeight:115,close:function(){Collaboration.Chat.destroy()},resize:a,dialogopen:a})}Collaboration.start(this),Collaboration.Connected||(jQuery("input#chat-submit").disabled=!0)},create:function(){var a=jQuery("input#chat-submit");a.disabled=!1,a.click(this.send_message),OORTLE.instance.subscribe(Collaboration.chat_topic_id(),this.add_message),Collaboration.Chat.send_message("Im in!")},destroy:function(){this.enabled=!1,jQuery("div#livepress-chat-window").remove(),OORTLE.instance.unsubscribe(Collaboration.chat_topic_id(),this.add_message)}},Collaboration.Edit=Livepress.ensureExists(Collaboration.Edit),jQuery.extend(Collaboration.Edit,{update_live_posts_number:function(){var a=jQuery("#livepress-canvas").find(".livepress-update").filter(function(){return 0===jQuery(this).find(".livepress-update").length}).length;OORTLE.Livepress.LivepressHUD.updateLivePosts(a)},editing_post_callback:function(a){a=JSON.parse(a),null!==a&&OORTLE.Livepress.mergeLiveCanvasData(a)}}),Collaboration.post_topic=function(){return"|livepress|"+Livepress.Config.site_url+"|post-"+Livepress.Config.post_id},Collaboration.edit_post_topic=function(){return Collaboration.post_topic()+"_edit"},jQuery.extend(Collaboration,{Connected:!1,Author:Livepress.Config.current_user,start:function(a){a.enabled||(a.enabled=!0,this.Connected?a.create():this.initialize())}}),jQuery.extend(Collaboration.Edit,{enabled:!1,editor_dom_manipulator:null,runOnce:!1,initialize:function(a){this.startArgs=a,Collaboration.start(this),this.refresh(this)},refresh:function(a){var b=null;a.runOnce||(a.runOnce=!0,void 0!==a.startArgs&&(b=a.startArgs)),a.get_live_edition_data(b)},create:function(){this.editor_dom_manipulator=new Livepress.DOMManipulator(jQuery("#content_ifr").contents().find("body")),void 0!==this.startArgs&&this.startArgs?this.get_live_edition_data(this.startArgs):this.get_live_edition_data(),this.update_live_posts_number();var a=Livepress.Config.post_edit_msg_id?{last_id:Livepress.Config.post_edit_msg_id}:{fetch_all:!0};OORTLE.instance.subscribe(Collaboration.edit_post_topic(),this.editing_post_callback,a),OORTLE.instance.subscribe("|subcount"+Collaboration.post_topic(),this.readers_callback)},destroy:function(){this.enabled=!1,OORTLE.instance.unsubscribe(Collaboration.edit_post_topic(),this.editing_post_callback),Dashboard.Comments.unsubscribe_comment_channels(),OORTLE.instance.unsubscribe(Collaboration.post_topic(),this.readers_callback),OORTLE.instance.unsubscribe("|subcount"+Collaboration.post_topic(),this.readers_callback),Dashboard.Twitter.unsubscribeTwitterChannels()},get_live_edition_data:function(a){var b,c,d,e,f;b=function(a){void 0!==a&&jQuery.each(a,function(a,b){Dashboard.Twitter.addGuestBlogger(b,!0)})},c=function(a){var b,c;for(jQuery.each(a,function(a,b){Dashboard.Twitter.addTerm(b,!0)}),b=function(){return jQuery("#lp-twitter-results")},c=0;c<Dashboard.Twitter.terms.length;c++)Dashboard.Twitter.renderStaticSearchResults(Dashboard.Twitter.terms[c],b,5)},d=function(a){a&&(Dashboard.Comments.clear_container_and_count(a.comments),b(a.guest_bloggers),c(a.terms))},e=function(){Dashboard.Comments.get_comments_number_from_wp(),Dashboard.Comments.subscribe_comment_channels()},a?d(a):(f={action:"collaboration_get_live_edition_data",_ajax_nonce:Livepress.Config.ajax_nonce,post_id:Livepress.Config.post_id,livepress_action:!0},jQuery.ajax({type:"GET",dataType:"json",url:Livepress.Config.site_url+"/wp-admin/admin-ajax.php",data:f,success:d,error:e}))},readers_callback:function(a){console.log("Collaboration.readers_callback data -- "+a),OORTLE.Livepress.LivepressHUD.updateReaders(a.count)}}),Collaboration.Modes=[Collaboration.Chat,Collaboration.Edit],Collaboration.connected=function(){var a;if(!Collaboration.Connected){for(Collaboration.Connected=!0,a=0;a<Collaboration.Modes.length;a++)Collaboration.Modes[a].enabled&&Collaboration.Modes[a].create();Dashboard.Helpers.clearErrors("*"),Dashboard.Helpers.hideErrors(),Dashboard.Helpers.setSwitcherState("connected"),console.log("Collaboration.connected")}},Collaboration.disconnected=function(){var a;if(Collaboration.Connected){for(Collaboration.Connected=!1,a=0;a<Collaboration.Modes.length;a++)Collaboration.Modes[a].destroy();Dashboard.Helpers.handleErrors({disconnected:Collaboration.errorMessages.disconnected}),Dashboard.Helpers.setSwitcherState("disconnected"),console.log("Collaboration.disconnected")}},Collaboration.reconnect=function(){this.Connected||(Dashboard.Helpers.clearErrors(".connection"),OORTLE.instance.reconnect())},Collaboration.errorMessages={max_connection_attempts_reached:"<strong>Warning:</strong> The connection to the server has been lost. Will try to reconnect in some time.",server_list_empty:"<strong>Warning:</strong> The connection to server has been lost. Please try to reconnect later.",disconnected:"<strong>Warning:</strong> The connection to the server has been lost.",message_order_broken:"<strong>Warning:</strong> Syncronization of live editor seems to be lost. Try to enable/disable live editor or reload page.",cache_empty:"<strong>Warning:</strong> Collaboration state may be out of sync. Try to reload page.",cache_miss:"<strong>Warning:</strong> Collaboration may be out of sync. Try to reload page."},Collaboration.onError=function(a,b){var c={};c[a]=Collaboration.errorMessages.hasOwnProperty(a)?Collaboration.errorMessages[a].replace("{1}",b):b+"["+a+"]",Dashboard.Helpers.handleErrors(c),Dashboard.Helpers.setSwitcherState("disconnected"),console.log("Collaboration.onError",arguments)},Collaboration.initialize=function(){OORTLE.instance&&OORTLE.server_list_location?this.Connected||(OORTLE.instance.attachEvent("connected",Collaboration.connected),OORTLE.instance.attachEvent("state_changed",function(a,b){"connected"===b&&Collaboration.connected()}),OORTLE.instance.attachEvent("disconnected",Collaboration.disconnected),OORTLE.instance.attachEvent("error",Collaboration.onError),OORTLE.instance.connect()):window.setTimeout(Collaboration.initialize,100)},void 0===Dashboard.Comments&&(Dashboard.Comments=function(){var a=[],b=!1,c=!0,d=!1,e=function(){return Collaboration.post_topic()+"_new_comment"},f=function(){return Collaboration.post_topic()+"_comment"},g=Dashboard.Helpers.createLiveCounter("#tab-link-live-comments a"),h=function(d){if(b)a.push(d);else{var e=jQuery("#lp-comment-"+d.comment_id);if(e.length<=0&&void 0!==d.comment_id){e=Dashboard.Comments.Builder.createCommentDiv(d,c),c=!c;var f=e.find(".comment"),h=Dashboard.Comments.Builder.prepareCommentActions(d.comment_id,d);f.append(h),OORTLE.Livepress.LivepressHUD.sumToComments(1),jQuery("#tab-link-live-comments").hasClass("active")||(g.enabled||g.enable(),g.increment())}else e.removeClass("approved").removeClass("unapproved");e.addClass(d.status)}var i=document.getElementById("lp-new-comments-notice");null!==i&&jQuery(i).remove()},i=function(a){console.log("Collaboration.approved_comment_callback"),a.status="approved",h(a)},j=function(){jQuery("#live-comments-pane").hover(function(){b=!0,g.reset(),g.enable()},function(){b=!1;for(var c;c=a.shift();)h(c);g.disable()})};return{conditionallyEnable:function(){0>=jQuery("#lp-comments-results").has(".comment-item").length?this.liveCounter.disable():this.liveCounter.reset()},unsubscribe_comment_channels:function(){d||(OORTLE.instance.unsubscribe(e(),h),OORTLE.instance.unsubscribe(f(),i))},subscribe_comment_channels:function(a){if(!d){var b=a?{last_id:a}:{fetch_all:!0};OORTLE.instance.subscribe(e(),h,b),b=a?{last_id:a}:{fetch_all:!0},OORTLE.instance.subscribe(f(),i,b)}},clear_container_and_count:function(a){d||(OORTLE.Livepress.LivepressHUD.updateComments(0),a.comments.length&&(jQuery("#lp-comments-results").html(""),jQuery.each(a.comments,function(a,b){h(b)
})),this.subscribe_comment_channels(a.comment_msg_id))},get_comments_number_from_wp:function(){if(!d){var a={};a.action="collaboration_comments_number",a.post_id=Livepress.Config.post_id,jQuery.ajax({url:Livepress.Config.site_url+"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:a,success:function(a){console.log("Collaboration.comments_number -- "+a),OORTLE.Livepress.LivepressHUD.updateComments(a)}})}},liveCounter:g,disable:function(){d=!0},init:function(){d||j()}}}()),void 0===Dashboard.Comments.Builder&&(Dashboard.Comments.Builder=function(){var a=function(a,b){if(void 0===a.comment_id)return null;var c,d=jQuery("<div id='lp-comment-"+a.comment_id+"' class='comment-item "+(b?"even":"odd")+"'></div>"),e=a.comment_url,f=a.comment_gmt.parseGMT();"approved"===a.status?(c=jQuery("<a href='"+e+"' target='_blank'>"+f+"</a>"),c.addClass("lp-comment-link")):c=jQuery("<span>"+f+"</span>");var g=jQuery("<div class='lp-comment-author author'>");if(g.append(a.avatar_url),a.author_url){var h=jQuery("<a></a>").text(a.author).attr("href",a.author_url);g.append(jQuery("<strong></strong>").append(h))}else g.append(jQuery("<strong>"+a.author+"</strong>"));g.append("<br/>").append(c),d.append(g);var i=jQuery("#lp-comments-results"),j=jQuery("<div class='lp-comment comment'></div>");return j.append(jQuery("<p>"+a.content+"</p>")),d.append(j),i.prepend(d),d},b=function(a,b){var c=function(a,b,c){var d=jQuery("<span></span>").addClass(a);return c||d.text(" | "),d.append(b),d},d=location.href,e=d.substring(0,d.lastIndexOf("/"))+"/edit-comments.php",f={_ajax_nonce:Livepress.Config.ajax_nonce,id:a,livepress_action:1},g=function(a,b,c){return jQuery("<a></a>").attr("href",b).text(c).attr("title",a)},h="&p="+Livepress.Config.post_id+"&c="+a+"&_wpnonce="+Livepress.Config.ajax_nonce,i=function(a){return"comment.php?action="+a+h},j=jQuery("<div class='row-actions'></div>"),k=g("Copy the commenter name and full text into the post text box","#","Send to editor");j.append(c("post",k,!0));var l=g("Approve this comment",i("approvecomment"),"Approve");j.append(c("approve",l));var m=g("Unapprove this comment",i("unapprovecomment"),"Unapprove");j.append(c("unapprove",m));var n=g("Mark this comment as spam",i("spamcomment"),"Spam");j.append(c("spam",n));var o=g("Move this comment to the trash",i("trashcomment"),"Trash");j.append(c("trash",o));var p=function(){jQuery("#lp-comment-"+a).css({"background-color":"rgb(255, 170, 170)"}).fadeOut("slow",function(){jQuery(this).remove(),OORTLE.Livepress.LivepressHUD.sumToComments(-1)})},q=function(b){b.click(function(b){b.preventDefault(),b.stopPropagation(),jQuery.post("admin-ajax.php",jQuery.extend({},f,{"new":"approved",action:"dim-comment",dimClass:"unapproved"}),function(){jQuery("#lp-comment-"+a).removeClass("unapproved").addClass("approved")})})},r=function(b){b.click(function(b){b.preventDefault(),b.stopPropagation(),jQuery.post("admin-ajax.php",jQuery.extend({},f,{"new":"unapproved",action:"dim-comment",dimClass:"unapproved"}),function(){jQuery("#lp-comment-"+a).removeClass("approved").addClass("unapproved")})})};return q(l),r(m),n.click(function(a){a.preventDefault(),a.stopPropagation(),jQuery.post("admin-ajax.php",jQuery.extend({},f,{action:"delete-comment",spam:1,_url:e}),p)}),o.click(function(a){a.preventDefault(),a.stopPropagation(),jQuery.post("admin-ajax.php",jQuery.extend({},f,{action:"delete-comment",trash:1,_url:e}),p)}),k.bind("click",function(a){a.preventDefault(),a.stopPropagation();var c=tinyMCE.activeEditor,d="\n"+b.author+": <blockquote>"+b.content+"</blockquote>";return c.setContent(c.getContent()+d),!1}),j};return{createCommentDiv:a,prepareCommentActions:b}}()),("undefined"==typeof window||null===window)&&(window={twttr:{}}),null==window.twttr&&(window.twttr={}),("undefined"==typeof twttr||null===twttr)&&(twttr={}),function(){function a(a,b){return b=b||"","string"!=typeof a&&(a.global&&b.indexOf("g")<0&&(b+="g"),a.ignoreCase&&b.indexOf("i")<0&&(b+="i"),a.multiline&&b.indexOf("m")<0&&(b+="m"),a=a.source),new RegExp(a.replace(/#\{(\w+)\}/g,function(a,b){var c=twttr.txt.regexen[b]||"";return"string"!=typeof c&&(c=c.source),c}),b)}function b(a,b){return a.replace(/#\{(\w+)\}/g,function(a,c){return b[c]||""})}function c(a,b,c){var d=String.fromCharCode(b);return c!==b&&(d+="-"+String.fromCharCode(c)),a.push(d),a}function d(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function e(a,b,c){return c?!a||a.match(b)&&RegExp["$&"]===a:"string"==typeof a&&a.match(b)&&RegExp["$&"]===a}twttr.txt={},twttr.txt.regexen={};var f={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};twttr.txt.htmlEscape=function(a){return a&&a.replace(/[&"'><]/g,function(a){return f[a]})},twttr.txt.regexSupplant=a,twttr.txt.stringSupplant=b,twttr.txt.addCharsToCharClass=c;var g=String.fromCharCode,h=[g(32),g(133),g(160),g(5760),g(6158),g(8232),g(8233),g(8239),g(8287),g(12288)];c(h,9,13),c(h,8192,8202);var i=[g(65534),g(65279),g(65535)];c(i,8234,8238),twttr.txt.regexen.spaces_group=a(h.join("")),twttr.txt.regexen.spaces=a("["+h.join("")+"]"),twttr.txt.regexen.invalid_chars_group=a(i.join("")),twttr.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,twttr.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm;var j=[];c(j,1024,1279),c(j,1280,1319),c(j,11744,11775),c(j,42560,42655),c(j,1425,1471),c(j,1473,1474),c(j,1476,1477),c(j,1479,1479),c(j,1488,1514),c(j,1520,1524),c(j,64274,64296),c(j,64298,64310),c(j,64312,64316),c(j,64318,64318),c(j,64320,64321),c(j,64323,64324),c(j,64326,64335),c(j,1552,1562),c(j,1568,1631),c(j,1646,1747),c(j,1749,1756),c(j,1758,1768),c(j,1770,1775),c(j,1786,1788),c(j,1791,1791),c(j,1872,1919),c(j,2208,2208),c(j,2210,2220),c(j,2276,2302),c(j,64336,64433),c(j,64467,64829),c(j,64848,64911),c(j,64914,64967),c(j,65008,65019),c(j,65136,65140),c(j,65142,65276),c(j,8204,8204),c(j,3585,3642),c(j,3648,3662),c(j,4352,4607),c(j,12592,12677),c(j,43360,43391),c(j,44032,55215),c(j,55216,55295),c(j,65441,65500),c(j,12449,12538),c(j,12540,12542),c(j,65382,65439),c(j,65392,65392),c(j,65296,65305),c(j,65313,65338),c(j,65345,65370),c(j,12353,12438),c(j,12441,12446),c(j,13312,19903),c(j,19968,40959),c(j,173824,177983),c(j,177984,178207),c(j,194560,195103),c(j,12291,12291),c(j,12293,12293),c(j,12347,12347),twttr.txt.regexen.nonLatinHashtagChars=a(j.join(""));var k=[];c(k,192,214),c(k,216,246),c(k,248,255),c(k,256,591),c(k,595,596),c(k,598,599),c(k,601,601),c(k,603,603),c(k,611,611),c(k,616,616),c(k,623,623),c(k,626,626),c(k,649,649),c(k,651,651),c(k,699,699),c(k,768,879),c(k,7680,7935),twttr.txt.regexen.latinAccentChars=a(k.join("")),twttr.txt.regexen.hashSigns=/[#＃]/,twttr.txt.regexen.hashtagAlpha=a(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),twttr.txt.regexen.hashtagAlphaNumeric=a(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),twttr.txt.regexen.endHashtagMatch=a(/^(?:#{hashSigns}|:\/\/)/),twttr.txt.regexen.hashtagBoundary=a(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),twttr.txt.regexen.validHashtag=a(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),twttr.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|RT:?)/,twttr.txt.regexen.atSigns=/[@＠]/,twttr.txt.regexen.validMentionOrList=a("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),twttr.txt.regexen.validReply=a(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),twttr.txt.regexen.endMentionMatch=a(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),twttr.txt.regexen.validUrlPrecedingChars=a(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,twttr.txt.regexen.invalidDomainChars=b("#{punct}#{spaces_group}#{invalid_chars_group}",twttr.txt.regexen),twttr.txt.regexen.validDomainChars=a(/[^#{invalidDomainChars}]/),twttr.txt.regexen.validSubdomain=a(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),twttr.txt.regexen.validDomainName=a(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),twttr.txt.regexen.validGTLD=a(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/),twttr.txt.regexen.validCCTLD=a(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)(?=[^0-9a-zA-Z]|$))/),twttr.txt.regexen.validPunycode=a(/(?:xn--[0-9a-z]+)/),twttr.txt.regexen.validDomain=a(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),twttr.txt.regexen.validAsciiDomain=a(/(?:(?:[a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),twttr.txt.regexen.invalidShortDomain=a(/^#{validDomainName}#{validCCTLD}$/),twttr.txt.regexen.validPortNumber=a(/[0-9]+/),twttr.txt.regexen.validGeneralUrlPathChars=a(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~|&#{latinAccentChars}]/i),twttr.txt.regexen.validUrlBalancedParens=a(/\(#{validGeneralUrlPathChars}+\)/i),twttr.txt.regexen.validUrlPathEndingChars=a(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),twttr.txt.regexen.validUrlPath=a("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),twttr.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,twttr.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,twttr.txt.regexen.extractUrl=a("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),twttr.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,twttr.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,twttr.txt.regexen.validCashtag=a("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),twttr.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,twttr.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,twttr.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,twttr.txt.regexen.validateUrlPchar=a("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),twttr.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,twttr.txt.regexen.validateUrlUserinfo=a("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),twttr.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,twttr.txt.regexen.validateUrlIpv4=a(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),twttr.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,twttr.txt.regexen.validateUrlIp=a("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),twttr.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomain=a(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),twttr.txt.regexen.validateUrlHost=a("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),twttr.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomain=a(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),twttr.txt.regexen.validateUrlUnicodeHost=a("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),twttr.txt.regexen.validateUrlPort=/[0-9]{1,5}/,twttr.txt.regexen.validateUrlUnicodeAuthority=a("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),twttr.txt.regexen.validateUrlAuthority=a("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),twttr.txt.regexen.validateUrlPath=a(/(\/#{validateUrlPchar}*)*/i),twttr.txt.regexen.validateUrlQuery=a(/(#{validateUrlPchar}|\/|\?)*/i),twttr.txt.regexen.validateUrlFragment=a(/(#{validateUrlPchar}|\/|\?)*/i),twttr.txt.regexen.validateUrlUnencoded=a("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var l="tweet-url list-slug",m="tweet-url username",n="tweet-url hashtag",o="tweet-url cashtag",p={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0},q={disabled:!0,readonly:!0,multiple:!0,checked:!0};twttr.txt.tagAttrs=function(a){var b="";for(var c in a){var d=a[c];q[c]&&(d=d?c:null),null!=d&&(b+=" "+twttr.txt.htmlEscape(c)+'="'+twttr.txt.htmlEscape(d.toString())+'"')}return b},twttr.txt.linkToText=function(a,c,d,e){e.suppressNoFollow||(d.rel="nofollow"),e.linkAttributeBlock&&e.linkAttributeBlock(a,d),e.linkTextBlock&&(c=e.linkTextBlock(a,c));var f={text:c,attr:twttr.txt.tagAttrs(d)};return b("<a#{attr}>#{text}</a>",f)},twttr.txt.linkToTextWithSymbol=function(a,b,c,d,e){var f=e.symbolTag?"<"+e.symbolTag+">"+b+"</"+e.symbolTag+">":b;c=twttr.txt.htmlEscape(c);var g=e.textWithSymbolTag?"<"+e.textWithSymbolTag+">"+c+"</"+e.textWithSymbolTag+">":c;return e.usernameIncludeSymbol||!b.match(twttr.txt.regexen.atSigns)?twttr.txt.linkToText(a,f+g,d,e):f+twttr.txt.linkToText(a,g,d,e)},twttr.txt.linkToHashtag=function(a,b,c){var e=b.substring(a.indices[0],a.indices[0]+1),f=twttr.txt.htmlEscape(a.hashtag),g=d(c.htmlAttrs||{});return g.href=c.hashtagUrlBase+f,g.title="#"+f,g["class"]=c.hashtagClass,f[0].match(twttr.txt.regexen.rtl_chars)&&(g["class"]+=" rtl"),twttr.txt.linkToTextWithSymbol(a,e,f,g,c)},twttr.txt.linkToCashtag=function(a,b,c){var e=twttr.txt.htmlEscape(a.cashtag),f=d(c.htmlAttrs||{});return f.href=c.cashtagUrlBase+e,f.title="$"+e,f["class"]=c.cashtagClass,twttr.txt.linkToTextWithSymbol(a,"$",e,f,c)},twttr.txt.linkToMentionAndList=function(a,b,c){var e=b.substring(a.indices[0],a.indices[0]+1),f=twttr.txt.htmlEscape(a.screenName),g=twttr.txt.htmlEscape(a.listSlug),h=a.listSlug&&!c.suppressLists,i=d(c.htmlAttrs||{});return i["class"]=h?c.listClass:c.usernameClass,i.href=h?c.listUrlBase+f+g:c.usernameUrlBase+f,h||c.suppressDataScreenName||(i["data-screen-name"]=f),twttr.txt.linkToTextWithSymbol(a,e,h?f+g:f,i,c)},twttr.txt.linkToUrl=function(a,b,c){var e=a.url,f=e,g=twttr.txt.htmlEscape(f),h=c.urlEntities&&c.urlEntities[e]||a;h.display_url&&(g=twttr.txt.linkTextWithEntity(h,c));var i=d(c.htmlAttrs||{});return i.href=e,c.urlClass&&(i["class"]=c.urlClass),c.urlTarget&&(i.target=c.urlTarget),!c.title&&h.display_url&&(i.title=h.expanded_url),twttr.txt.linkToText(a,g,i,c)},twttr.txt.linkTextWithEntity=function(a,c){var d=a.display_url,e=a.expanded_url,f=d.replace(/…/g,"");if(-1!=e.indexOf(f)){var g=e.indexOf(f),h={displayUrlSansEllipses:f,beforeDisplayUrl:e.substr(0,g),afterDisplayUrl:e.substr(g+f.length),precedingEllipsis:d.match(/^…/)?"…":"",followingEllipsis:d.match(/…$/)?"…":""};for(var i in h)h.hasOwnProperty(i)&&(h[i]=twttr.txt.htmlEscape(h[i]));return h.invisible=c.invisibleTagAttrs,b("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",h)}return d},twttr.txt.autoLinkEntities=function(a,b,c){c=d(c||{}),c.hashtagClass=c.hashtagClass||n,c.hashtagUrlBase=c.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",c.cashtagClass=c.cashtagClass||o,c.cashtagUrlBase=c.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",c.listClass=c.listClass||l,c.usernameClass=c.usernameClass||m,c.usernameUrlBase=c.usernameUrlBase||"https://twitter.com/",c.listUrlBase=c.listUrlBase||"https://twitter.com/",c.htmlAttrs=twttr.txt.extractHtmlAttrsFromOptions(c),c.invisibleTagAttrs=c.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var e,f,g;if(c.urlEntities){for(e={},f=0,g=c.urlEntities.length;g>f;f++)e[c.urlEntities[f].url]=c.urlEntities[f];c.urlEntities=e}var h="",i=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var f=0;f<b.length;f++){var j=b[f];h+=a.substring(i,j.indices[0]),j.url?h+=twttr.txt.linkToUrl(j,a,c):j.hashtag?h+=twttr.txt.linkToHashtag(j,a,c):j.screenName?h+=twttr.txt.linkToMentionAndList(j,a,c):j.cashtag&&(h+=twttr.txt.linkToCashtag(j,a,c)),i=j.indices[1]}return h+=a.substring(i,a.length)},twttr.txt.autoLinkWithJSON=function(a,b,c){var d=[];for(var e in b)d=d.concat(b[e]);for(var f=0;f<d.length;f++)entity=d[f],entity.screen_name?entity.screenName=entity.screen_name:entity.text&&(entity.hashtag=entity.text);return twttr.txt.modifyIndicesFromUnicodeToUTF16(a,d),twttr.txt.autoLinkEntities(a,d,c)},twttr.txt.extractHtmlAttrsFromOptions=function(a){var b={};for(var c in a){var d=a[c];p[c]||(q[c]&&(d=d?c:null),null!=d&&(b[c]=d))}return b},twttr.txt.autoLink=function(a,b){var c=twttr.txt.extractEntitiesWithIndices(a,{extractUrlWithoutProtocol:!1});return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkUsernamesOrLists=function(a,b){var c=twttr.txt.extractMentionsOrListsWithIndices(a);return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkHashtags=function(a,b){var c=twttr.txt.extractHashtagsWithIndices(a);return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkCashtags=function(a,b){var c=twttr.txt.extractCashtagsWithIndices(a);return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkUrlsCustom=function(a,b){var c=twttr.txt.extractUrlsWithIndices(a,{extractUrlWithoutProtocol:!1});return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.removeOverlappingEntities=function(a){a.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var b=a[0],c=1;c<a.length;c++)b.indices[1]>a[c].indices[0]?(a.splice(c,1),c--):b=a[c]},twttr.txt.extractEntitiesWithIndices=function(a,b){var c=twttr.txt.extractUrlsWithIndices(a,b).concat(twttr.txt.extractMentionsOrListsWithIndices(a)).concat(twttr.txt.extractHashtagsWithIndices(a,{checkUrlOverlap:!1})).concat(twttr.txt.extractCashtagsWithIndices(a));return 0==c.length?[]:(twttr.txt.removeOverlappingEntities(c),c)},twttr.txt.extractMentions=function(a){for(var b=[],c=twttr.txt.extractMentionsWithIndices(a),d=0;d<c.length;d++){var e=c[d].screenName;b.push(e)}return b},twttr.txt.extractMentionsWithIndices=function(a){for(var b=[],c=twttr.txt.extractMentionsOrListsWithIndices(a),d=0;d<c.length;d++)mentionOrList=c[d],""==mentionOrList.listSlug&&b.push({screenName:mentionOrList.screenName,indices:mentionOrList.indices});return b},twttr.txt.extractMentionsOrListsWithIndices=function(a){if(!a||!a.match(twttr.txt.regexen.atSigns))return[];var b=[];return a.replace(twttr.txt.regexen.validMentionOrList,function(a,c,d,e,f,g,h){var i=h.slice(g+a.length);if(!i.match(twttr.txt.regexen.endMentionMatch)){f=f||"";var j=g+c.length,k=j+e.length+f.length+1;b.push({screenName:e,listSlug:f,indices:[j,k]})}}),b},twttr.txt.extractReplies=function(a){if(!a)return null;var b=a.match(twttr.txt.regexen.validReply);return!b||RegExp.rightContext.match(twttr.txt.regexen.endMentionMatch)?null:b[1]},twttr.txt.extractUrls=function(a,b){for(var c=[],d=twttr.txt.extractUrlsWithIndices(a,b),e=0;e<d.length;e++)c.push(d[e].url);return c},twttr.txt.extractUrlsWithIndices=function(a,b){if(b||(b={extractUrlsWithoutProtocol:!0}),!a||(b.extractUrlsWithoutProtocol?!a.match(/\./):!a.match(/:/)))return[];for(var c=[];twttr.txt.regexen.extractUrl.exec(a);){var d=RegExp.$2,e=RegExp.$3,f=RegExp.$4,g=RegExp.$5,h=RegExp.$7,i=twttr.txt.regexen.extractUrl.lastIndex,j=i-e.length;if(f)e.match(twttr.txt.regexen.validTcoUrl)&&(e=RegExp.lastMatch,i=j+e.length),c.push({url:e,indices:[j,i]});else{if(!b.extractUrlsWithoutProtocol||d.match(twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var k=null,l=!1,m=0;if(g.replace(twttr.txt.regexen.validAsciiDomain,function(a){var b=g.indexOf(a,m);m=b+a.length,k={url:a,indices:[j+b,j+m]},l=a.match(twttr.txt.regexen.invalidShortDomain),l||c.push(k)}),null==k)continue;h&&(l&&c.push(k),k.url=e.replace(g,k.url),k.indices[1]=i)}}return c},twttr.txt.extractHashtags=function(a){for(var b=[],c=twttr.txt.extractHashtagsWithIndices(a),d=0;d<c.length;d++)b.push(c[d].hashtag);return b},twttr.txt.extractHashtagsWithIndices=function(a,b){if(b||(b={checkUrlOverlap:!0}),!a||!a.match(twttr.txt.regexen.hashSigns))return[];var c=[];if(a.replace(twttr.txt.regexen.validHashtag,function(a,b,d,e,f,g){var h=g.slice(f+a.length);if(!h.match(twttr.txt.regexen.endHashtagMatch)){var i=f+b.length,j=i+e.length+1;c.push({hashtag:e,indices:[i,j]})}}),b.checkUrlOverlap){var d=twttr.txt.extractUrlsWithIndices(a);if(d.length>0){var e=c.concat(d);twttr.txt.removeOverlappingEntities(e),c=[];for(var f=0;f<e.length;f++)e[f].hashtag&&c.push(e[f])}}return c},twttr.txt.extractCashtags=function(a){for(var b=[],c=twttr.txt.extractCashtagsWithIndices(a),d=0;d<c.length;d++)b.push(c[d].cashtag);return b},twttr.txt.extractCashtagsWithIndices=function(a){if(!a||-1==a.indexOf("$"))return[];var b=[];return a.replace(twttr.txt.regexen.validCashtag,function(a,c,d,e,f){var g=f+c.length,h=g+e.length+1;b.push({cashtag:e,indices:[g,h]})}),b},twttr.txt.modifyIndicesFromUnicodeToUTF16=function(a,b){twttr.txt.convertUnicodeIndices(a,b,!1)},twttr.txt.modifyIndicesFromUTF16ToUnicode=function(a,b){twttr.txt.convertUnicodeIndices(a,b,!0)},twttr.txt.convertUnicodeIndices=function(a,b,c){if(0!=b.length){var d=0,e=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var f=0,g=b[0];d<a.length;){if(g.indices[0]==(c?d:e)){var h=g.indices[1]-g.indices[0];if(g.indices[0]=c?e:d,g.indices[1]=g.indices[0]+h,f++,f==b.length)break;g=b[f]}var i=a.charCodeAt(d);i>=55296&&56319>=i&&d<a.length-1&&(i=a.charCodeAt(d+1),i>=56320&&57343>=i&&d++),e++,d++}}},twttr.txt.splitTags=function(a){for(var b,c,d=a.split("<"),e=[],f=0;f<d.length;f+=1)if(c=d[f]){b=c.split(">");for(var g=0;g<b.length;g+=1)e.push(b[g])}else e.push("");return e},twttr.txt.hitHighlight=function(a,b,c){var d="em";if(b=b||[],c=c||{},0===b.length)return a;var e,f,g,h,i,j,k,l=c.tag||d,m=["<"+l+">","</"+l+">"],n=twttr.txt.splitTags(a),o="",p=0,q=n[0],r=0,s=0,t=!1,u=q,v=[];for(e=0;e<b.length;e+=1)for(f=0;f<b[e].length;f+=1)v.push(b[e][f]);for(g=0;g<v.length;g+=1){for(h=v[g],i=m[g%2],j=!1;null!=q&&h>=r+q.length;)o+=u.slice(s),t&&h===r+u.length&&(o+=i,j=!0),n[p+1]&&(o+="<"+n[p+1]+">"),r+=u.length,s=0,p+=2,q=n[p],u=q,t=!1;j||null==q?j||(j=!0,o+=i):(k=h-r,o+=u.slice(s,k)+i,s=k,t=0===g%2?!0:!1)}if(null!=q)for(s<u.length&&(o+=u.slice(s)),g=p+1;g<n.length;g+=1)o+=0===g%2?n[g]:"<"+n[g]+">";return o};var r=140,s=[g(65534),g(65279),g(65535),g(8234),g(8235),g(8236),g(8237),g(8238)];twttr.txt.getTweetLength=function(a,b){b||(b={short_url_length:20,short_url_length_https:21});for(var c=a.length,d=twttr.txt.extractUrlsWithIndices(a),e=0;e<d.length;e++)c+=d[e].indices[0]-d[e].indices[1],c+=d[e].url.toLowerCase().match(/^https:\/\//)?b.short_url_length_https:b.short_url_length;return c},twttr.txt.isInvalidTweet=function(a){if(!a)return"empty";if(twttr.txt.getTweetLength(a)>r)return"too_long";for(var b=0;b<s.length;b++)if(a.indexOf(s[b])>=0)return"invalid_characters";return!1},twttr.txt.isValidTweetText=function(a){return!twttr.txt.isInvalidTweet(a)},twttr.txt.isValidUsername=function(a){if(!a)return!1;var b=twttr.txt.extractMentions(a);return 1===b.length&&b[0]===a.slice(1)};var t=a(/^#{validMentionOrList}$/);twttr.txt.isValidList=function(a){var b=a.match(t);return!(!b||""!=b[1]||!b[4])},twttr.txt.isValidHashtag=function(a){if(!a)return!1;var b=twttr.txt.extractHashtags(a);return 1===b.length&&b[0]===a.slice(1)},twttr.txt.isValidUrl=function(a,b,c){if(null==b&&(b=!0),null==c&&(c=!0),!a)return!1;var d=a.match(twttr.txt.regexen.validateUrlUnencoded);if(!d||d[0]!==a)return!1;var f=d[1],g=d[2],h=d[3],i=d[4],j=d[5];return(!c||e(f,twttr.txt.regexen.validateUrlScheme)&&f.match(/^https?$/i))&&e(h,twttr.txt.regexen.validateUrlPath)&&e(i,twttr.txt.regexen.validateUrlQuery,!0)&&e(j,twttr.txt.regexen.validateUrlFragment,!0)?b&&e(g,twttr.txt.regexen.validateUrlUnicodeAuthority)||!b&&e(g,twttr.txt.regexen.validateUrlAuthority):!1},"undefined"!=typeof module&&module.exports&&(module.exports=twttr.txt)}(),Dashboard.Twitter=Livepress.ensureExists(Dashboard.Twitter),Dashboard.Twitter.terms=[],Dashboard.Twitter.tweets=[],void 0===Dashboard.Twitter.twitter&&(Dashboard.Twitter=jQuery.extend(Dashboard.Twitter,function(){var a=0,b=jQuery("#lp-pane-holder"),c=Dashboard.Twitter,d=Dashboard.Helpers.createLiveCounter("#tab-link-live-twitter-search a"),e="#lp-twitter-results",f="#lp-hidden-tweets",g=function(){return jQuery(a>0?f:e)},h=function(){var g=function(a,b){a.bind("click",function(){var a=jQuery(this).parent(".lp-"+b),d=a.find(".lp-"+b+"-text").text(),e=a.attr("id");"term"===b?c.removeTerm(e,d):"tweet"===b&&(d=d.substr(1,d.length),c.removeTweet(e,d))})},h="#lp-tweet-player",i=function(){a--,0>=a&&(a=0,d.disable(),c.appendGatheredTweets(),jQuery(h).attr("title","Click to pause the tweets so you can decide when to display them").removeClass("paused"),jQuery(e).removeClass("paused"),jQuery("#pausedmsg").hide())},j=function(){a++,1===a&&(d.enable(),jQuery(h).attr("title","Click to copy tweets into the post editor.").addClass("paused"),jQuery(e).addClass("paused"),jQuery("#pausedmsg").show())};return{bindCleaners:function(){var a=b.find("a.lp-tweet-cleaner"),d=b.find(".lp-term-cleaner a");a.live("click",function(a){return a.preventDefault(),a.stopPropagation(),c.removeAllTweets(),!1}),d.live("click",function(a){a.preventDefault(),a.stopPropagation(),c.removeAllTerms(),"clear"===jQuery(this).attr("data-action")&&(jQuery(e).html(""),jQuery(f).html(""))})},bindAddTermInput:function(){var a=function(a){a.preventDefault(),a.stopPropagation();var b=jQuery("#live-search-query").val();b.length>0&&c.addTerm(b)},b=jQuery("#screen-meta");b.on("click","#live-search-column input.button-secondary",a),b.on("keydown","#live-search-column #live-search-query",function(b){13===b.keyCode&&a(b)})},bindStaticSearchButton:function(){var a=jQuery("#lp-new-static-search"),b=jQuery("#lp-on-top input.new_static_search"),d=function(b){b.preventDefault(),b.stopPropagation();var d=jQuery("#lp-new-static-search").val();d.length>0&&(c.renderStaticSearchResults(d),a.val(""))};b.bind("click",d),a.keydown(function(a){13===a.keyCode&&d(a)})},bindAddGuestBloggerInput:function(){var a=function(a){a.preventDefault(),a.stopPropagation();var b=jQuery("#new-twitter-account").val();b.length>0&&c.addGuestBlogger(b)},b=jQuery("#screen-meta");b.on("click","#remote-authors input.termadd",a),b.on("keydown","#remote-authors #new-twitter-account",function(b){13===b.keyCode&&a(b)}),b.on("click","#remote-authors .cleaner",function(a){return a.preventDefault(),a.stopPropagation(),c.removeAllTweets(),!1}),b.find(".lp-tweet-cleaner").hide()},bindRemoveTermButtons:function(){g(jQuery(".lp-term-clean-button"),"term")},bindRemoveTweetButtons:function(){g(jQuery(".lp-tweet-clean-button"),"tweet")},bindTweetPlayer:function(){jQuery(h).click(function(a){return a.preventDefault(),a.stopPropagation(),jQuery(this).hasClass("paused")?i():j()})},bindTweetMouse:function(){jQuery(e).hover(j,i)},init:function(){this.bindAddTermInput(),this.bindStaticSearchButton(),this.bindAddGuestBloggerInput(),this.bindRemoveTweetButtons(),this.bindRemoveTermButtons(),this.bindTweetPlayer(),this.bindTweetMouse()}}}(),i=!1,j=function(a){var b=jQuery("<div id=tweet-"+a.id+" class='comment-item "+(i?"odd":"even")+"'></div>"),c=a.created_at.parseGMT(),d=jQuery("<img class='avatar avatar-32 photo' width='32' height='32' />").attr("src",a.avatar_url).attr("alt",a.author),e=jQuery("<div class='lp-comment-author author'>").append(d).append(jQuery("<strong></strong>").text(a.author)).append("<br/>").append(jQuery("<span>"+c+"</span>"));b.append(e),b.data("term",a.term),i=!i;var f=jQuery("<div class='lp-comment comment'></div>").append(jQuery("<p>"+a.text+"</p>").autolink());f.find("a").attr("target","_blank");var g=jQuery("<div class='row-actions'></div>"),h=jQuery("<span class='post'><a href='#' title='Copy the tweet into the post editing area'>Send to editor</a><span>");return g.append(h),h.bind("click",function(b){b.preventDefault(),b.stopPropagation();var c=tinyMCE.activeEditor;new Date(a.created_at);var d="[embed]http://twitter.com/"+a.author+"/status/"+a.id+"[/embed]\n";c.setContent(c.getContent()+d);var e=jQuery(".livepress-newform").find("input.button-primary");e.removeAttr("disabled")}),f.append(g),b.append(f),b},k=function(a,b){if(!(a.find("#tweet-"+b.id).length>0)){var c=a.find(".lp-spinner");c.length>0&&c.remove();var d=j(b);d.hide(),a.prepend(d),a.find("div.comment-item:gt(200)").remove(),d.slideDown()}};return{twitter:this,liveCounter:d,new_tweet_for_search_callback:function(a){var b=g();a.id=a.id_str,k(b,a),d.enabled&&d.increment()},follow_twitter_search:function(a){var b="|livepress|tweet-search|"+a;OORTLE.instance.subscribe(b,this.new_tweet_for_search_callback)},unfollow_twitter_search:function(a){var b="|livepress|tweet-search|"+a;OORTLE.instance.unsubscribe(b,this.new_tweet_for_search_callback)},refresh_terms:function(){for(var a=Dashboard.Twitter.terms,b="",c=0;c<a.length;c+=1)b+='<div class="lp-term" id="term-'+c+'"><a class="lp-term-clean-button" title="Remove this term"></a><span class="lp-term-text">'+a[c]+"</span></div>";b+='<div class="clear"></div>',jQuery("#lp-twitter-search-terms").html(b),jQuery("#twitter-search-pane").is(".lp-pane-active")&&jQuery("#lp-on-top").show(),h.bindRemoveTermButtons(),d.reset(),0===a.length?jQuery(e).html(""):jQuery(e).html("<div class='lp-spinner'></div>")},refresh_tweets:function(){for(var a=Dashboard.Twitter.tweets,b="",c=0;c<a.length;c+=1)b+='<li id="tweet-'+c+'" class="'+(1===c%2?"odd":"even")+' lp-tweet">',b+='<span class="lp-tweet-text">@'+a[c]+"</span>",b+='<a class="lp-tweet-clean-button" title="Remove this account">remove</a>',b+="</li>";jQuery("#lp-account-list").html(b),a.length?jQuery(".lp-tweet-cleaner").show():jQuery(".lp-tweet-cleaner").hide();var d=jQuery(document.getElementById("livepress-authors_num")),e=d.siblings(".label"),f=1===a.length?"Remote Author":"Remote Authors";d.html(a.length),e.text(f),h.bindRemoveTweetButtons()},addTermOrTweet:function(a,b,c){var d={dontPostToLivepress:!1,afterPushFunction:function(){},ajaxRequest:function(){},inputToClean:null};if(c=jQuery.extend({},d,c),c.inputToClean&&c.inputToClean.val(""),a=a.toLowerCase(),-1===jQuery.inArray(a,b)){var e=function(d){"string"==typeof d&&(d=JSON.parse(d)),d&&(d.success?(b.push(a),c.afterPushFunction()):d.errors&&(Dashboard.Helpers.handleErrors(d.errors),c.inputToClean&&Dashboard.Helpers.enableAndHideSpinner(c.inputToClean)))
};c.dontPostToLivepress?e({success:!0}):c.ajaxRequest(a,"add",e)}},handleRemovingFromCollection:function(a,b,c){var d=a.replace(c+"-","");b.splice(d,1),"tweet"===c?this.refresh_tweets(b):this.refresh_terms()},addTerm:function(a,b){var d=jQuery("#live-search-query"),e={dontPostToLivepress:b,afterPushFunction:function(){c.follow_twitter_search(a),c.refresh_terms(),Dashboard.Helpers.enableAndHideSpinner(d)},ajaxRequest:c.postTweetSearch,inputToClean:d};this.addTermOrTweet(a,Dashboard.Twitter.terms,e)},removeTerm:function(a,b){c.postTweetSearch(b,"remove",function(d){d=JSON.parse(d),d&&d.success&&(c.unfollow_twitter_search(b),c.handleRemovingFromCollection(a,Dashboard.Twitter.terms,"term"),jQuery(e+" .comment-item").filter(function(){return jQuery.data(this,"term")===b}).remove())})},unsubscribeTwitterChannels:function(){this.removeAllTerms(!0)},removeAllTerms:function(a){var b=function(){jQuery.each(Dashboard.Twitter.terms,function(a,b){c.unfollow_twitter_search(b)}),Dashboard.Twitter.terms=[],c.refresh_terms()};if(a)b();else{var d=function(a){a=JSON.parse(a),a&&a.success&&b()};this.postTweetSearch("","clear",d)}},renderStaticSearchResults:function(a,b){b||(b=function(){var a=jQuery("#lp-static-search-results");return a.html(""),a});var c=b(),d=jQuery("<div class='lp-spinner'></div>");0===c.find(".lp-spinner").length&&d.appendTo(c)},postTweetSearch:function(a,b,d){return jQuery.post("admin-ajax.php",{livepress_action:!0,_ajax_nonce:Livepress.Config.ajax_nonce,action:"twitter_search_term",term:a,action_type:b,post_id:Livepress.Config.post_id},d),"add"===b&&(Dashboard.Twitter.renderStaticSearchResults(a,g,5),c.refresh_terms()),!0},checkIfAutoTweetPossible:function(){Livepress.Config.remote_post?(b.find(".autotweet-container").show(),jQuery("#autotweet-blocked .warning").hide()):(b.find(".autotweet-container").hide(),jQuery("#autotweet-blocked .warning").show())},addGuestBlogger:function(a,b){var d=jQuery("#new-twitter-account");a=a.replace("@","");var e={dontPostToLivepress:b,afterPushFunction:function(){c.refresh_tweets(),Dashboard.Helpers.enableAndHideSpinner(d)},ajaxRequest:this.postTwitterFollow,inputToClean:d};this.addTermOrTweet(a,Dashboard.Twitter.tweets,e)},removeTweet:function(a,b){var c=this;this.postTwitterFollow(b,"remove",function(b){b=JSON.parse(b),b&&b.success&&c.handleRemovingFromCollection(a,Dashboard.Twitter.tweets,"tweet")})},removeAllTweets:function(){this.postTwitterFollow("","clear",function(a){a=JSON.parse(a),a&&a.success&&(Dashboard.Twitter.tweets=[],c.refresh_tweets())})},appendGatheredTweets:function(){var a=jQuery(f+" .comment-item"),b=jQuery(e);a.hide(),b.prepend(a),a.slideDown()},postTwitterFollow:function(a,b,c){return jQuery.post("admin-ajax.php",{livepress_action:!0,_ajax_nonce:Livepress.Config.ajax_nonce,action:"twitter_follow",username:a,action_type:b,post_id:Livepress.Config.post_id},c),!0},conditionallyEnable:function(){0>=this.terms.length?this.liveCounter.disable():this.liveCounter.enable()},init:function(){d.enable(),this.checkIfAutoTweetPossible(),h.init()}}}())),function(){var a=function(){var a,b,c,d=[],e=[],f=navigator.userAgent.toLowerCase();if(a=f.match(new RegExp("rv:(\\d+)\\.\\d+")),b=-1!==f.indexOf("khtml")||"Microsoft Internet Explorer"===navigator.appName||-1!==f.indexOf("gecko")&&parseInt(a[1],10)>=2,void 0!==Livepress.JSQueue&&(d=d.concat(Livepress.JSQueue)),void 0!==Livepress.CSSQueue&&(e=e.concat(Livepress.CSSQueue)),void 0!==Livepress.Config.current_screen&&"post"===Livepress.Config.current_screen[0]&&"post"===Livepress.Config.current_screen[1])if(void 0!==Livepress.Config.debug&&Livepress.Config.debug){var g=encodeURIComponent("jQuery(function(){Livepress.Ready()})");d=d.concat(["static://oortle.full.js?rnd="+Math.random(),"static://oortle_dynamic.js?run="+g+"&rnd="+Math.random()])}else d=d.concat(["static://oortle/"+Livepress.Config.oover[0]+"/oortle.min.js","static://"+Livepress.Config.oover[1]+"/cluster_settings.js?v="+Livepress.Config.oover[2]]);var h=function(a){var b=a.match(/^([a-z]+):\/\/(.*)$/);if(b.length&&void 0!==Livepress.Config[b[1]+"_url"]){var c=Livepress.Config[b[1]+"_url"];"/"!==c.substr(-1)&&(c+="/"),a=c+b[2]}return a},i=function(a){if(!(a>=e.length)){var b=document.createElement("link");return b.setAttribute("id","OORTLEstyle"+a),b.setAttribute("type","text/css"),b.setAttribute("rel","stylesheet"),b.setAttribute("href",h(e[a])),document.getElementsByTagName("head").item(0).appendChild(b),!0}},j=function(a,c){if(a>=d.length)return!1;if(!d[a])return c?!1:j(a+1);var e=document.createElement("script");return e.setAttribute("id","OORTLEscript"+a),e.setAttribute("type","text/javascript"),e.setAttribute("src",h(d[a])),b&&("undefined"!=typeof e.onreadystatechange?e.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&(this.onreadystatechange=function(){},j(a+1))}:e.onload=e.onerror=function(){j(a+1)}),document.getElementsByTagName("head").item(0).appendChild(e),!0};for(c=0;c<e.length;c++)i(c);for(c=0;c<d.length&&(!j(c,!0)||!b);c++);};"undefined"==typeof jQuery?a():jQuery(a)}(),function(){if(!window.google||!google.gears){var a=null;if("undefined"!=typeof GearsFactory)a=new GearsFactory;else try{a=new ActiveXObject("Gears.Factory"),-1!=a.getBuildInfo().indexOf("ie_mobile")&&a.privateSetGlobalObject(this)}catch(b){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(a=document.createElement("object"),a.style.display="none",a.width=0,a.height=0,a.type="application/x-googlegears",document.documentElement.appendChild(a))}a&&(window.google||(google={}),google.gears||(google.gears={factory:a}))}}(),Persist=function(){var a,b,c,d,e,f,g="0.3.0";f=function(){var a,b="Thu, 01-Jan-1970 00:00:01 GMT",c=864e5,d=["expires","path","domain"],e=escape,f=unescape,g=document,h=function(){var a=new Date;return a.setTime(a.getTime()),a},i=function(a,b){var c,f,g=[],h=arguments.length>2?arguments[2]:{};g.push(e(a)+"="+e(b));for(var i=0;i<d.length;i++)c=d[i],f=h[c],f&&g.push(c+"="+f);return h.secure&&g.push("secure"),g.join("; ")},j=function(){var a="__EC_TEST__",b=new Date;return b=b.toGMTString(),this.set(a,b),this.enabled=this.remove(a)==b,this.enabled};return a={set:function(a,b){var d=arguments.length>2?arguments[2]:{},e=h(),f={};if(d.expires){var j=d.expires*c;f.expires=new Date(e.getTime()+j),f.expires=f.expires.toGMTString()}for(var k=["path","domain","secure"],l=0;l<k.length;l++)d[k[l]]&&(f[k[l]]=d[k[l]]);var m=i(a,b,f);return g.cookie=m,b},has:function(a){a=e(a);var b=g.cookie,c=b.indexOf(a+"="),d=(c+a.length+1,b.substring(0,a.length));return!c&&a!=d||0>c?!1:!0},get:function(a){a=e(a);var b,c=g.cookie,d=c.indexOf(a+"="),h=d+a.length+1,i=c.substring(0,a.length);return!d&&a!=i||0>d?null:(b=c.indexOf(";",h),0>b&&(b=c.length),f(c.substring(h,b)))},remove:function(c){var d=a.get(c),e={expires:b};return g.cookie=i(c,"",e),d},keys:function(){for(var a,b=g.cookie,c=b.split("; "),d=[],e=0;e<c.length;e++)a=c[e].split("="),d.push(f(a[0]));return d},all:function(){for(var a,b=g.cookie,c=b.split("; "),d=[],e=0;e<c.length;e++)a=c[e].split("="),d.push([f(a[0]),f(a[1])]);return d},version:"0.2.1",enabled:!1},a.enabled=j.call(a),a}();var h=function(){return Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return c;return-1}}();e=function(){},c=function(a){return"PS"+a.replace(/_/g,"__").replace(/ /g,"_s")};var j={search_order:["localstorage","globalstorage","gears","cookie","ie","flash"],name_re:/^[a-z][a-z0-9_ \-]+$/i,methods:["init","get","set","remove","load","save","iterate"],sql:{version:"1",create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?",keys:"SELECT * FROM persist_data"},flash:{div_id:"_persist_flash_wrap",id:"_persist_flash",path:"persist.swf",size:{w:1,h:1},args:{autostart:!0}}};return b={gears:{size:-1,test:function(){return window.google&&window.google.gears?!0:!1},methods:{init:function(){var a;a=this.db=google.gears.factory.create("beta.database"),a.open(c(this.name)),a.execute(j.sql.create).close()},get:function(a){var b,c,d=j.sql.get,e=this.db;return e.execute("BEGIN").close(),b=e.execute(d,[a]),c=b.isValidRow()?b.field(0):null,b.close(),e.execute("COMMIT").close(),c},set:function(a,b){var c=j.sql.remove,d=j.sql.set,e=this.db;return e.execute("BEGIN").close(),e.execute(c,[a]).close(),e.execute(d,[a,b]).close(),e.execute("COMMIT").close(),b},remove:function(a){j.sql.get,sql=j.sql.remove,val=null,is_valid=!1;var b=this.db;return b.execute("BEGIN").close(),b.execute(sql,[a]).close(),b.execute("COMMIT").close(),!0},iterate:function(a,b){var c,d=j.sql.keys,e=this.db;for(c=e.execute(d);c.isValidRow();)a.call(b||this,c.field(0),c.field(1)),c.next();c.close()}}},globalstorage:{size:5242880,test:function(){if(!window.globalStorage)return!1;var a="127.0.0.1";this.o&&this.o.domain&&(a=this.o.domain);try{return globalStorage[a],!0}catch(b){return window.console&&window.console.warn&&console.warn("globalStorage exists, but couldn't use it because your browser is running on domain:",a),!1}},methods:{key:function(a){return c(this.name)+c(a)},init:function(){this.store=globalStorage[this.o.domain]},get:function(a){return a=this.key(a),this.store.getItem(a)},set:function(a,b){return a=this.key(a),this.store.setItem(a,b),b},remove:function(a){var b;return a=this.key(a),b=this.store.getItem[a],this.store.removeItem(a),b}}},localstorage:{size:-1,test:function(){return window.localStorage?!0:!1},methods:{key:function(a){return this.name+">"+a},init:function(){this.store=localStorage},get:function(a){return a=this.key(a),this.store.getItem(a)},set:function(a,b){return a=this.key(a),this.store.setItem(a,b),b},remove:function(a){var b;return a=this.key(a),b=this.store.getItem(a),this.store.removeItem(a),b},iterate:function(a,b){var c=this.store;for(i=0;i<c.length;i++)keys=c[i].split(">"),2==keys.length&&keys[0]==this.name&&a.call(b||this,keys[1],c[c[i]])}}},ie:{prefix:"_persist_data-",size:65536,test:function(){return window.ActiveXObject?!0:!1},make_userdata:function(a){var b=document.createElement("div");return b.id=a,b.style.display="none",b.addBehavior("#default#userdata"),document.body.appendChild(b),b},methods:{init:function(){var a=b.ie.prefix+c(this.name);this.el=b.ie.make_userdata(a),this.o.defer&&this.load()},get:function(a){var b;return a=c(a),this.o.defer||this.load(),b=this.el.getAttribute(a)},set:function(a,b){return a=c(a),this.el.setAttribute(a,b),this.o.defer||this.save(),b},remove:function(a){var b;return a=c(a),this.o.defer||this.load(),b=this.el.getAttribute(a),this.el.removeAttribute(a),this.o.defer||this.save(),b},load:function(){this.el.load(c(this.name))},save:function(){this.el.save(c(this.name))}}},cookie:{delim:":",size:4e3,test:function(){return a.Cookie.enabled?!0:!1},methods:{key:function(a){return this.name+b.cookie.delim+a},get:function(a){var b;return a=this.key(a),b=f.get(a)},set:function(a,b){return a=this.key(a),f.set(a,b,this.o),b},remove:function(a,b){var b;return a=this.key(a),b=f.remove(a)}}},flash:{test:function(){if(!deconcept||!deconcept.SWFObjectUtil)return!1;var a=deconcept.SWFObjectUtil.getPlayerVersion().major;return a>=8?!0:!1},methods:{init:function(){if(!b.flash.el){var a,c,d,e=j.flash;d=document.createElement("div"),d.id=e.div_id,document.body.appendChild(d),a=new deconcept.SWFObject(this.o.swf_path||e.path,e.id,e.size.w,e.size.h,"8");for(c in e.args)"function"!=e.args[c]&&a.addVariable(c,e.args[c]);a.write(d),b.flash.el=document.getElementById(e.id)}this.el=b.flash.el},get:function(a){var b;return a=c(a),b=this.el.get(this.name,a)},set:function(a,b){var d;return a=c(a),d=this.el.set(this.name,a,b)},remove:function(a){var b;return a=c(a),b=this.el.remove(this.name,a)}}}},d=function(){for(var c,d,f=j.methods,g=j.search_order,h=0,i=f.length;i>h;h++)a.Store.prototype[f[h]]=e;a.type=null,a.size=-1;for(var k=0,l=g.length;!a.type&&l>k;k++)if(c=b[g[k]],c.test()){a.type=g[k],a.size=c.size;for(d in c.methods)a.Store.prototype[d]=c.methods[d]}a._init=!0},a={VERSION:g,type:null,size:0,add:function(a){b[a.id]=a,j.search_order=[a.id].concat(j.search_order),d()},remove:function(a){var c=h(j.search_order,a);0>c||(j.search_order.splice(c,1),delete b[a],d())},Cookie:f,Store:function(b,c){if(!j.name_re.exec(b))throw new Error("Invalid name");if(!a.type)throw new Error("No suitable storage found");c=c||{},this.name=b,c.domain=c.domain||location.hostname||"localhost",c.domain=c.domain.replace(/:\d+$/,""),c.domain="localhost"==c.domain?"":c.domain,this.o=c,c.expires=c.expires||730,c.path=c.path||"/",this.init()}},d(),a}(),Livepress.storage=function(){var a=new Persist.Store("Livepress",{defer:!1,swf_path:Livepress.Config.lp_plugin_url+"/swf/persist.swf"});return{get:function(b,c){var d=a.get(b);return null===d||void 0===d?c:d},set:function(b,c){return a.set(b,c)}}}();