/*! livepress -v1.1.1
 * http://livepress.com/
 * Copyright (c) 2014 LivePress, Inc.
 */
var Livepress=Livepress||{};Livepress.ensureExists=function(a){return void 0===a&&(a={}),a};var console=console||{log:function(){}};String.prototype.parseGMT=function(a){var b,c,d=this,e=a||"h:i:s a";return b=Date.parse(d.replace(/-/gi,"/"),"Y/m/d H:i:s"),c=new Date(b),"Invalid Date"===c.toString()?this.toString():c=c.format(e)},String.prototype.replaceAll=function(a,b){var c=this;return c=c.split(a).join(b)},"undefined"==typeof window.twttr&&(window.twttr=function(a,b,c){var d,e,f=a.getElementsByTagName(b)[0];if(!a.getElementById(c))return e=a.createElement(b),e.id=c,e.src="https://platform.twitter.com/widgets.js",f.parentNode.insertBefore(e,f),window.twttr||(d={_e:[],ready:function(a){d._e.push(a)}})}(document,"script","twitter-wjs")),jQuery.fn.getBg=function(){var a,b,c,d=jQuery(this);return a=d.css("background-color"),"transparent"!==a&&"rgba(0, 0, 0, 0)"!==a&&void 0!==a?a:(b=this.parents().filter(function(){return c=d.css("background-color"),"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c}).eq(0).css("background-color"),b?d.css("background-color",b):d.css("background-color","#ffffff"),void 0)},jQuery.extend({getUrlVars:function(a){for(var b,c=[],d=a.href||window.location.href,e=d.slice(d.indexOf("?")+1).split("&"),f=0;f<e.length;f++)b=e[f].split("="),c.push(b[0]),c[b[0]]=b[1];return c},getUrlVar:function(a,b){return jQuery.getUrlVars(b||!1)[a]}}),jQuery.fn.outerHTML=function(a){return a?this.before(a).remove():jQuery("<div>").append(this.eq(0).clone()).html()},jQuery.fn.autolink=function(){return this.each(function(){var a=new RegExp('((http|https|ftp)://[\\w?=&./-;#~%-]+(?![\\w\\s?&./;#~%"=-]*>))',"g");jQuery(this).html(jQuery(this).html().replace(a,'<a href="$1">$1</a> '))})},"undefined"==typeof document.activeElement&&jQuery(document).focusin(function(a){document.activeElement=a.target}).focusout(function(){document.activeElement=null}),jQuery.extend(jQuery.expr[":"],{focus:function(a){return a===document.activeElement}}),Date.prototype.format=function(a){var b,c,d="",e=Date.replaceChars;for(b=0;b<a.length;b++)c=a.charAt(b),d+=e[c]?e[c].call(this):c;return d},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return 1===this.getDate()%10&&11!==this.getDate()?"st":2===this.getDate()%10&&12!==this.getDate()?"nd":3===this.getDate()%10&&13!==this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){return"Not Yet Supported"},W:function(){return"Not Yet Supported"},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return"Not Yet Supported"},L:function(){return 0===this.getFullYear()%4&&0!==this.getFullYear()%100||0===this.getFullYear()%400?"1":"0"},o:function(){return"Not Supported"},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return"Not Yet Supported"},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},e:function(){return"Not Yet Supported"},I:function(){return"Not Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":"+(Math.abs(this.getTimezoneOffset()%60)<10?"0":"")+Math.abs(this.getTimezoneOffset()%60)},T:function(){var a,b;return b=this.getMonth(),this.setMonth(0),a=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1"),this.setMonth(b),a},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d")+"T"+this.format("H:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},function(a){var b=function(a){return"object"==typeof a?a:{top:a,left:a}},c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1},c.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!==a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||"BackCompat"===d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"===d&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.speed||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){var g,h=this,i=a(h),j=d,k={},l=i.is("html,body"),m=function(a){i.animate(k,e,f.easing,a&&function(){a.call(this,d,f)})};"number"!=typeof j&&"string"!=typeof j||!/^([\-+]=)?\d+(\.\d+)?(px|%)?$/.test(j)?(("number"==typeof j||"string"==typeof j)&&(j=a(j,this)),(j.is||j.style)&&(g=(j=a(j)).offset())):j=b(j),a.each(f.axis.split(""),function(a,b){var d="x"===b?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=h[n],p=c.max(h,b);if(g)k[n]=g[e]+(l?0:o-i.offset()[e]),f.margin&&(k[n]-=parseInt(j.css("margin"+d),10)||0,k[n]-=parseInt(j.css("border"+d+"Width"),10)||0),k[n]+=f.offset[e]||0,f.over[e]&&(k[n]+=j["x"===b?"width":"height"]()*f.over[e]);else{var q=j[e];k[n]=q.slice&&"%"===q.slice(-1)?parseFloat(q)/100*p:q}/^\d+$/.test(k[n])&&(k[n]=k[n]<=0?0:Math.min(k[n],p)),!a&&f.queue&&(o!==k[n]&&m(f.onAfterFirst),delete k[n])}),m(f.onAfter)}).end()},c.max=function(b,c){var d="x"===c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(jQuery),function(jQuery){var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]},b=function(b){var c;return b&&b.constructor===Array&&3===b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:a[jQuery.trim(b).toLowerCase()]},c=function(a,c){var d;do{if(d=jQuery.curCSS(a,c),""!==d&&"transparent"!==d||jQuery.nodeName(a,"body"))break;c="backgroundColor"}while(a=a.parentNode);return b(d)};jQuery.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(a,d){jQuery.fx.step[d]=function(a){void 0===a.start&&(a.start=c(a.elem,d),a.end=b(a.end)),a.elem.style[d]="rgb("+[Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)].join(",")+")"}})}(jQuery),function(a){a.gritter={},a.gritter.options={fade_in_speed:"fast",fade_out_speed:500,time:1e3};var b={fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_control:'<div class = "gritter-control"><div class ="gritter-scroll">Scroll to Comment</div><div class ="gritter-settings"></div><div class="gritter-close"></div></div>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper gritter-item [[item_class]] [[class_name]] [[comment_container_id]]" style="display:none"><div class="gritter-top"></div><div class="gritter-inner"><div class = "gritter-control"><div class ="gritter-scroll">Scroll to Comment</div><div class ="gritter-settings"></div><div class="gritter-close"></div></div>[[image]]<span class="gritter-title">[[username]]</span><div class="lp-date">[[date]]</div><p>[[text]]</p>[[comments]]<div class="bubble-point"></div></div><div class="gritter-bot"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(c){c.title||(c.title=""),c.text||(c.text=""),this._is_setup||this._runSetup();var d=c.title,e=c.commentContainerId,f=c.text,g=c.date,h=c.image,i=c.comments||"",j=c.sticky||!1,k=c.class_name||"",l=c.time||"";this._verifyWrapper(),this._item_count+=1;var m=this._item_count,n=this._tpl_item;a(["before_open","after_open","before_close","after_close"]).each(function(d,e){b["_"+e+"_"+m]=a.isFunction(c[e])?c[e]:function(){}}),this._custom_timer=0,l&&(this._custom_timer=l),void 0===h&&(h="");var o=h?'<img src="'+h+'" class="gritter-image" />':"",p=h?"gritter-with-image":"gritter-without-image";n=this._str_replace(["[[username]]","[[text]]","[[date]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]","[[comments]]","[[comment_container_id]]"],[d,f,g,o,this._item_count,p,k,i,e],n),this["_before_open_"+m](),a("#gritter-notice-wrapper").prepend(n);var q=a("#gritter-item-"+this._item_count),r=a(q.find(".gritter-scroll"));return jQuery.isFunction(c.scrollToCallback)?(r.bind("click",c.scrollToCallback),c.scrollToText&&r.text(c.scrollToText)):r.bind("click",function(a){var b=jQuery(jQuery(a.target).parents(".gritter-item-wrapper")[0]),c=b.attr("class").split(/\s+/);jQuery.each(c,function(a,b){var c=b.match(/comment\-/);return null!==c?(jQuery.scrollTo(jQuery("#"+b),900),void 0):void 0})}),q.fadeIn(this.fade_in_speed,function(){b["_after_open_"+m](a(this))}),j||this._setFadeTimer(q,m),a(q).bind("mouseenter mouseleave",function(c){"mouseenter"===c.type?j||b._restoreItemIfFading(a(this),m):j||b._setFadeTimer(a(this),m),b._hoverState(a(this),c.type)}),m},_countRemoveWrapper:function(b,c){c.remove(),this["_after_close_"+b](c),0===a(".gritter-item-wrapper").length&&a("#gritter-notice-wrapper").remove()},_fade:function(a,c,d,e){d=d||{};var f="undefined"!=typeof d.fade?d.fade:!0,g=d.speed||this.fade_out_speed;this["_before_close_"+c](a),e&&a.unbind("mouseenter mouseleave"),f?a.animate({opacity:0},g,function(){a.animate({height:0},300,function(){b._countRemoveWrapper(c,a)})}):this._countRemoveWrapper(c,a)},_hoverState:function(a,c){if("mouseenter"===c){a.addClass("hover");var d=a.find(".gritter-control");d.show(),a.find(".gritter-close").click(function(){var c=a.attr("id").split("-")[2];b.removeSpecific(c,{},a,!0)})}else a.removeClass("hover"),a.find(".gritter-control").hide()},removeSpecific:function(b,c,d,e){d||(d=a("#gritter-item-"+b)),this._fade(d,b,c||{},e)},_restoreItemIfFading:function(a,b){clearTimeout(this["_int_id_"+b]),a.stop().css({opacity:""})},_runSetup:function(){var b;for(b in a.gritter.options)a.gritter.options.hasOwnProperty(b)&&(this[b]=a.gritter.options[b]);this._is_setup=1},_setFadeTimer:function(a,c){var d=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+c]=setTimeout(function(){b._fade(a,c)},d)},stop:function(b){var c=a.isFunction(b.before_close)?b.before_close:function(){},d=a.isFunction(b.after_close)?b.after_close:function(){},e=a("#gritter-notice-wrapper");c(e),e.fadeOut(function(){a(this).remove(),d()})},_str_replace:function(a,b,c,d){var e=0,f=0,g="",h="",i=0,j=0,k=[].concat(a),l=[].concat(b),m=c,n=l instanceof Array,o=m instanceof Array;for(m=[].concat(m),d&&(this.window[d]=0),e=0,i=m.length;i>e;e++)if(""!==m[e])for(f=0,j=k.length;j>f;f++)g=m[e]+"",h=n?void 0!==l[f]?l[f]:"":l[0],m[e]=g.split(k[f]).join(h),d&&m[e]!==g&&(this.window[d]+=(g.length-m[e].length)/k[f].length);return o?m:m[0]},_verifyWrapper:function(){0===a("#gritter-notice-wrapper").length&&a("body").append(this._tpl_wrap)}};a.gritter.add=function(a){try{return b.add(a||{})}catch(c){var d="Gritter Error: "+c;"undefined"!=typeof console&&console.error?console.error(d,a):alert(d)}},a.gritter.remove=function(a,c){b.removeSpecific(a,c||{})},a.gritter.removeAll=function(a){b.stop(a||{})}}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(){var b=c(this),g=f.settings;return isNaN(b.datetime)||(0==g.cutoff||e(b.datetime)<g.cutoff)&&a(this).text(d(b.datetime)),this}function c(b){if(b=a(b),!b.data("timeago")){b.data("timeago",{datetime:f.datetime(b)});var c=a.trim(b.text());f.settings.localeTitle?b.attr("title",b.data("timeago").datetime.toLocaleString()):!(c.length>0)||f.isTime(b)&&b.attr("title")||b.attr("title",c)}return b.data("timeago")}function d(a){return f.inWords(e(a))}function e(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return b instanceof Date?d(b):"string"==typeof b?d(a.timeago.parse(b)):"number"==typeof b?d(new Date(b)):d(a.timeago.datetime(b))};var f=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(b){function c(c,e){var f=a.isFunction(c)?c(e,b):c,g=d.numbers&&d.numbers[e]||e;return f.replace(/%d/i,g)}var d=this.settings.strings,e=d.prefixAgo,f=d.suffixAgo;this.settings.allowFuture&&0>b&&(e=d.prefixFromNow,f=d.suffixFromNow);var g=Math.abs(b)/1e3,h=g/60,i=h/60,j=i/24,k=j/365,l=45>g&&c(d.seconds,Math.round(g))||90>g&&c(d.minute,1)||45>h&&c(d.minutes,Math.round(h))||90>h&&c(d.hour,1)||24>i&&c(d.hours,Math.round(i))||42>i&&c(d.day,1)||30>j&&c(d.days,Math.round(j))||45>j&&c(d.month,1)||365>j&&c(d.months,Math.round(j/30))||1.5>k&&c(d.year,1)||c(d.years,Math.round(k)),m=d.wordSeparator||"";return void 0===d.wordSeparator&&(m=" "),a.trim([e,l,f].join(m))},parse:function(b){var c=a.trim(b);return c=c.replace(/\.\d+/,""),c=c.replace(/-/,"/").replace(/-/,"/"),c=c.replace(/T/," ").replace(/Z/," UTC"),c=c.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),c=c.replace(/([\+\-]\d\d)$/," $100"),new Date(c)},datetime:function(b){var c=f.isTime(b)?a(b).attr("datetime"):a(b).attr("title");return f.parse(c)},isTime:function(b){return"time"===a(b).get(0).tagName.toLowerCase()}});var g={init:function(){var c=a.proxy(b,this);c();var d=f.settings;d.refreshMillis>0&&(this._timeagoInterval=setInterval(c,d.refreshMillis))},update:function(c){var d=f.parse(c);a(this).data("timeago",{datetime:d}),f.settings.localeTitle&&a(this).attr("title",d.toLocaleString()),b.apply(this)},updateFromDOM:function(){a(this).data("timeago",{datetime:f.parse(f.isTime(this)?a(this).attr("datetime"):a(this).attr("title"))}),b.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};a.fn.timeago=function(a,b){var c=a?g[a]:g.init;if(!c)throw new Error("Unknown function name '"+a+"' for timeago");return this.each(function(){c.call(this,b)}),this},document.createElement("abbr"),document.createElement("time")}),Livepress.Ui={},Livepress.Ui.View=function(a){var b=this,c=jQuery("#livepress"),d=c.find(".lp-comments-count"),e=c.find(".lp-updates-count"),f=c.find(".lp-settings-button"),g=c.find(".lp-bar"),h=jQuery("#lp-settings");this.set_comment_num=function(a){var b=d.html();d.html(parseInt(a,10)),b!==a&&d.parent().animate({color:"#ffff66"},200).animate({color:"#ffffff"},800)},this.set_live_updates_num=function(a){e.html(parseInt(a,10))};var i=h.find(".lp-settings-close");h.find(".lp-tab"),h.find(".lp-pane"),h.find(".lp-button.lp-expand-options"),h.find("input[name=lp-setting-sound]");var j=h.find("input[name=lp-setting-updates]"),k=h.find("input[name=lp-setting-comments]"),l=h.find("input[name=lp-setting-scroll]");h.find(".lp-button.lp-update-settings"),h.find(".lp-options-ext");var m=h.find(".lp-settings-short");a&&(g.find(".lp-sprite.comments").hide(),d.parent().hide(),k.parent().hide());var n=function(){var a=document.documentElement;return b.innerHeight||a&&a.clientHeight||document.body.clientHeight},o=function(){var a=document.documentElement;return b.innerWidth||a&&a.clientWidth||document.body.clientWidth},p=function(){o(),n(),g.offset(),h.show("blind")},q=function(){h.hide("blind"),m.removeClass("expanded")},r=function(){return h.is(":visible")?q():p()};f.click(function(){return r()}),i.click(function(){return q()});var s=function(a,b,c,d){return b.prop("checked",a).change(function(){return b.is(":checked")?c(1):d(1)}),a?c():d()};this.live_control=function(a,b,c){s(a,j,b,c)},this.follow_comments_control=function(a,b,c){s(a,k,b,c)},this.scroll_control=function(a,b,c){s(a,l,b,c)},this.add_link_to_greader=function(a){h.find(".lp-greader-link").attr("href",a)},this.subscribeIm=function(a){h.find(".lp-subscribe .lp-button").click(function(){var b=h.find("[name=lp-im-type]").val(),c=h.find("[name=lp-im-username]").val();a(c,b)})},this.imFeedbackSpin=function(a){h.find(".lp-subscribe-im-spin")[a?"show":"hide"]()},this.handleImFeedback=function(a,b){var c={INVALID_JID:lp_client_strings.no_google_acct,NOT_IN_ROSTER:lp_client_strings.no_acct_in_jabber,NOT_AUTHORIZED:lp_client_strings.username_not_auth,AUTHORIZED:lp_client_strings.username_authorized,INTERNAL_SERVER_ERROR:lp_client_strings.livepress_err_retry,AUTHORIZATION_SENT:lp_client_strings.auth_request_sent},d=c[a];d="undefined"!=typeof d?d.replace("[USERNAME]",b):c.INTERNAL_SERVER_ERROR,d.length>0&&(this.imFeedbackSpin(!1),h.find(".lp-im-subscription-message").html(d).show())};var t=h.find(".live-updates-status"),u=g.find(".lp-counter");this.connected=function(){t.text("ON"),u.removeClass("lp-off").addClass("lp-on"),g.find(".lp-logo").attr("title","Connected")},this.disconnected=function(){t.text("OFF"),u.removeClass("lp-on").addClass("lp-off"),g.find(".lp-logo").attr("title","Not Connected")};var v=function(){jQuery(".gritter-settings").click(function(){p()})};this.post_alert=function(a,b,c,d){if(console.log("Post alert",{title:a,link:b,author:c,date:d}),void 0!==a||void 0!==c||void 0!==d){var e=jQuery("<div>"),f=jQuery("<abbr>").attr("class","timeago").attr("title",d).text(d.replace(/Z/," UTC"));e.append(f).append(" by "+c),jQuery.gritter.add({title:'<a href="'+b+'">'+a+"</a>",date:"New Post - "+e.html(),class_name:"new-post",time:7e3}),v(),jQuery("abbr.livepress-timestamp").timeago()}},this.comment_alert=function(a,b){console.log("Comment alert",a);var c=jQuery("<div>"),d=jQuery("<abbr>").attr("class","timeago").attr("title",b).text(b.replace(/Z/," UTC"));c.append(d);var e={class_name:"comment",date:c.html(),time:7e3};jQuery.gritter.add(jQuery.extend({},e,a)),jQuery(".gritter-comments .add-comment").click(function(){jQuery().scrollTo("#respond, #commentform, #submit",900)}),v(),jQuery("abbr.livepress-timestamp").timeago()}},Livepress.Ui.UpdateBoxView=function(a){function b(a){var b=['<li style="display:none;">',a,"</li>"].join("");if(m+=1,m>1?(j.html(" new updates."),k.html("them")):(j.html(" new update."),k.html("it")),m>7)h.slideDown(300);else{g.append(b);var c=g.find("li:last");c.show()}i.text(m),e.is(":visible")||(e.slideDown(600),e.css("display","inline-block")),jQuery("abbr.livepress-timestamp").timeago()}"undefined"==typeof a&&(a=!0);var c=['<div class="update-box-content">','<div class="lp-update-count">','<strong class="lp-update-num">0</strong>','<strong class="lp-update-new-update"> '+lp_client_strings.new_updates+". </strong>",'<a href="javascript:location.reload();" class="lp-refresher">'+lp_client_strings.refresh+"</a> "+lp_client_strings.to_see+' <span class="lp-update-it-them">'+lp_client_strings.them+"</span>.","</div>",'<div class="lp-balloon">','<img class="lp-close-button" title="Close" />','<ul class="lp-new-posts"></ul>','<a class="lp-more-link" href="javascript:location.reload();">+ more</a>','<div class="lp-balloon-tail">&nbsp;</div>',"</div>","</div>",'<div class="clear"></div>'].join(""),d=".livepress lp-update-container",e=jQuery("#lp-update-box");e.addClass(d),e.append(c);var f=e.find(".lp-balloon"),g=e.find(".lp-new-posts"),h=e.find(".lp-more-link"),i=e.find(".lp-update-num"),j=e.find(".lp-update-new-update"),k=e.find(".lp-update-it-them"),l=e.find(".lp-close-button"),m=0;l.click(function(){f.fadeOut()}),l.attr("src",Livepress.Config.lp_plugin_url+"/img/lp-settings-close.png"),this.reposition_balloon=function(){f.css("margin-top",-(f.height()+60))},this.new_post=function(a,c,d,e){if(void 0!==e){var f=jQuery("<div>"),g=jQuery("<abbr>").attr("class","timeago").attr("title",e).text(e.replace(/Z/," UTC")),h=jQuery("<a></a>").attr("href",c).text("Update: "+a);f.append(g).append(h),b(f.html()),this.reposition_balloon()}},this.post_update=function(a,c){var d=25,e=28,f=jQuery("<div>"),g=jQuery("<abbr>").attr("class","timeago").attr("title",c).text(c.replace(/Z/," UTC")),h=a.indexOf(" ",d);-1===h&&(h=a.length),h>e&&(h=a.substr(0,h).lastIndexOf(" ")),(-1===h||h>e)&&(h=e);var i=a.substr(0,h)+(h<a.length?"&hellip;":""),j=" Update: <strong>"+i+"</strong>";f.append(g).append(j),b(f.html())},this.clear=function(){h.hide(),g.html(""),m=0,i.text("0"),e.is(":visible")&&e.slideUp(600)}},Livepress.Ui.UpdateView=function(a,b,c,d){var e,f={},g=function(){e&&e.remove(),a.removeClass("ui-container"),a.removeClass("lp-borders"),a.find("lp-pre-update-ui").remove()},h=function(b){var c,d=a.clone();d.find(".livepress-meta").remove();var e=d.text();e=d.text().replace(/\n/g,""),e=e.replace(/\s+/," ");var f=[];for(f.push(0),c=1;c<e.length;c+=1)" "===e.charAt(c)&&f.push(c);if(f.push(e.length),e.length>b){c=0;for(var g=b;f[c]<b&&c<f.length-1;)g=f[c],c+=1;e=e.substring(0,g)+"…"}return'"'+e+'"'};if(void 0===e){f.element=a,f.link=b+"#"+a.attr("id"),f.shortExcerpt=h(100),f.longExcerpt=h(1e3);var i=["facebook","twitter"];d||i.push("comment");var j=Livepress.Ui.ReactButtons(f,i);f.element.append(j),e=a.find(".lp-pre-update-ui"),a.get(0)===jQuery(".livepress-update").get(0)&&e.addClass("lp-first-update"),a.addClass("ui-container"),isFinite(c)?setTimeout(function(){g()},1e3*c):(e.bind("mouseleave",function(){g()}),e.bind("mouseover",function(){}),a.bind("mouseleave",function(a){var b=a.relatedTarget||a.fromElement;-1===b.className.indexOf("lp-pre-update-ui")&&g()}))}},Livepress.Ui.ReactButton=function(a,b){var c={},d={};return d.btnDiv=jQuery("<div>").addClass("lp-pu-ui-feature lp-pu-"+a),c.buttonFor=function(a,b){var c={};return c.link=b.link,c.type=a,d[a+"Button"](c),c.div},d.constructButtonMarkup=function(b){var c=jQuery("<div>").addClass("lp-pu-ui-text lp-"+a+"-text").text(b),e=jQuery("<div>").addClass("lp-"+a+"-ico lp-pu-ico");return d.btnDiv.append(e).append(c)},d.twitterButton=function(a){a.div=d.constructButtonMarkup("Tweet"),a.div.click(function(){window.open("http://twitter.com/home?status="+b.shortExcerpt+" "+a.link,"_blank")})},d.facebookButton=function(a){a.div=d.constructButtonMarkup("Share"),a.div.click(function(){var a=b.link,c=b.shortExcerpt,d=436,e=626,f=(screen.width-e)/2,g=(screen.height-d)/2,h="toolbar=0, status=0, width="+e+", height="+d+", left="+f+", top="+g;return window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(a)+"&t="+encodeURIComponent(c)," sharer",h),!1})},d.commentButton=function(a){a.div=d.constructButtonMarkup("Reply"),a.div.click(function(){var a=jQuery("#comment");jQuery().scrollTo(a,900),a.focus();var c='<blockquote class="lp-update-comment">'+b.shortExcerpt+"\n"+b.link+"</blockquote>\n";a.attr("value",c)})},c.buttonFor(a,b)},Livepress.Ui.ReactButtons=function(a,b){var c=jQuery("<div>").addClass("lp-pre-update-ui");return jQuery.each(b,function(b,d){var e=Livepress.Ui.ReactButton(d,a);c.append(e)}),c},function(){var a=function(){var a=!1;this.settings_enabled=!1,jQuery("input:text, textarea").on("focusin",function(){a=!0}).on("focusout",function(){a=!1}),this.shouldScroll=function(){return this.settings_enabled&&!a}};Livepress.Scroll=new a}(),Livepress.DOMManipulator=function(a,b){this.custom_background_color=b,this.containerJQueryElement="string"==typeof a?jQuery(a):a,this.containerElement=this.containerJQueryElement[0],this.cleaned_ws=!1},Livepress.DOMManipulator.prototype={debug:!1,log:function(){this.debug&&console.log.apply(console,arguments)},update:function(a,b){b=b||{},this.log("Livepress.DOMManipulator.update begin."),this.clean_updates(),this.apply_changes(a,b);var c=this;setTimeout(function(){c.clean_updates()},1500),this.log("Livepress.DOMManipulator.update end.")},selector:function(a){return this.containerJQueryElement.find(a)},selectors:function(){if(0===arguments.length)throw"The method expects arguments.";var a=jQuery.map(arguments,function(a){return a});return this.containerJQueryElement.find(a.join(","))},clean_whitespaces:function(){},block_elements:function(){return{address:1,blockquote:1,center:1,dir:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,noscript:1,ol:1,p:1,pre:1,table:1,ul:1,div:1,math:1,caption:1,colgroup:1,col:1,dd:1,dt:1,frameset:1,li:1,tbody:1,td:1,thead:1,tfoot:1,th:1,tr:1}},is_block_element:function(a){return"string"==typeof a?this.block_elements().hasOwnProperty(a.toLowerCase()):!1},remove_whitespace:function(a){var b,c=!1,d=a.parentNode;return a===d.firstChild||a===d.lastChild?c=!0:(b=a.previousSibling,null!==b&&1===b.nodeType&&this.is_block_element(b.tagName)&&(c=!0)),c},clean_children_ws:function(a){var b,c;for(b=!1,c=a.firstChild;null!==c;null)if(3===c.nodeType?/^\s*$/.test(c.nodeValue)&&this.remove_whitespace(c)&&(b=!0):this.clean_children_ws(c),b){var d=c;c=c.nextSibling,a.removeChild(d),b=!1}else c=c.nextSibling},clean_updates:function(){this.log("DOMManipulator clean_updates."),jQuery.each(this.selector("span.oortle-diff-text-updated"),function(){var a;a=this.childNodes.length>1?this.childNodes[1]:this.childNodes[0],8!==a.nodeType&&(a=a.childNodes[0]),this.parentNode.replaceChild(a,this)}),this.selector(".oortle-diff-changed").removeClass("oortle-diff-changed"),this.selector(".oortle-diff-inserted").removeClass("oortle-diff-inserted"),this.selector(".oortle-diff-inserted-block").removeClass("oortle-diff-inserted-block"),this.selector(".oortle-diff-removed").remove(),this.selector(".oortle-diff-removed-block").remove()},process_twitter:function(a,b){if(b.match(/<blockquote[^>]*twitter-tweet/i))if("twttr"in window)try{window.twttr.widgets.load(a)}catch(c){}else try{if(!document.getElementById("twitter-wjs")){var d=document.createElement("script");d.src="https://platform.twitter.com/widgets.js",d.id="twitter-wjs",document.getElementsByTagName("head")[0].appendChild(d)}}catch(c){}},apply_changes:function(a,b){var c,d=jQuery,e=b.effects_display||!1,f=[];for(this.clean_whitespaces(),c=0;c<a.length;c++){this.log("apply changes i=",c," changes.length = ",a.length);var g=a[c];this.log("change[i] = ",g[c]);var h,i,j,k,l,m,n,o,p,q;switch(g[0]){case"add_class":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),this.add_class(i,g[2])}catch(r){this.log("Exception on add_class: ",r)}break;case"set_attr":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),this.set_attr(i,g[2],g[3])}catch(s){this.log("Exception on set_attr: ",s)}break;case"del_attr":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),this.del_attr(i,g[2])}catch(t){this.log("Exception on del_attr: ",t)}break;case"set_text":try{this.set_text(g[1],g[2])}catch(u){this.log("Exception on set_text: ",u)}break;case"del_node":try{if(h=this.get_path_parts(g[1]),i=this.node_at_path(h),3===i.nodeType){for(j=i.parentNode,q=0;q<j.childNodes.length;q++)if(j.childNodes[q]===i){k=j.ownerDocument.createElement("span"),k.appendChild(i),k.className="oortle-diff-removed";break}q<j.childNodes.length?j.insertBefore(k,j.childNodes[q]):j.appendChild(k)}else 8===i.nodeType?i.parentNode.removeChild(i):this.add_class(i,"oortle-diff-removed")}catch(v){this.log("Exception on del_node: ",v)}break;case"push_node":try{if(h=this.get_path_parts(g[1]),i=this.node_at_path(h),null!==i){var w=i.parentNode;this.log("push_node: parentNode = ",w,", node = ",i),f[g[2]]=w.removeChild(i)}}catch(x){this.log("Exception on push_node: ",x)}break;case"pop_node":try{h=this.get_path_parts(g[1]),l=this.get_child_index(h),j=this.node_at_path(this.get_parent_path(h)),l>-1&&null!==j&&(m=f[g[2]],n=j.childNodes.length<=l?null:j.childNodes[l],this.log("pop_node",m,"from register",g[2],"before element",n,"on index ",l," on parent ",j),j.insertBefore(m,n))}catch(y){this.log("Exception on pop_node: ",y)}break;case"ins_node":try{h=this.get_path_parts(g[1]),l=this.get_child_index(h),o=this.get_parent_path(h),j=this.node_at_path(o),this.log("ins_node: childIndex = ",l,", parent = ",j),l>-1&&null!==j&&(m=document.createElement("span"),m.innerHTML=g[2],p=m.childNodes[0],(""===p.id||null===document.getElementById(p.id))&&(this.process_twitter(p,g[2]),n=j.childNodes.length<=l?null:j.childNodes[l],j.insertBefore(p,n)))}catch(z){this.log("Exception on ins_node: ",z)}break;case"append_child":try{o=this.get_path_parts(g[1]),j=this.node_at_path(o),null!==j&&(m=document.createElement("span"),m.innerHTML=g[2],p=m.childNodes[0],""!==p.id&&null!==document.getElementById(p.id)&&(this.process_twitter(p,g[2]),j.appendChild(p)))}catch(z){this.log("Exception on append_child: ",z)}break;case"replace_node":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),j=i.parentNode,m=document.createElement("span"),m.innerHTML=g[2],p=m.childNodes[0];var A=d(p).data("lpg");if(""!==A&&null!==A&&A<=d(i).data("lpg"));else if(this.process_twitter(p,g[2]),this.add_class(p,"oortle-diff-changed"),j.insertBefore(p,i),3===i.nodeType){for(q=0;q<j.childNodes.length;q++)if(j.childNodes[q]===i){k=j.ownerDocument.createElement("span"),k.appendChild(i),k.className="oortle-diff-removed";break}q<j.childNodes.length?j.insertBefore(k,j.childNodes[q]):j.appendChild(k)}else 8===i.nodeType?i.parentNode.removeChild(i):this.add_class(i,"oortle-diff-removed")}catch(z){this.log("Exception on append_child: ",z)}break;default:throw this.log("Operation not implemented yet."),"Operation not implemented yet."}this.log("i=",c," container: ",this.containerElement.childNodes," -- registers: ",f)}try{this.display(e)}catch(B){this.log("Exception on display: ",B)}try{if(Livepress.Scroll.shouldScroll()){var C=void 0===b.custom_scroll_class?".oortle-diff-inserted-block, .oortle-diff-changed, .oortle-diff-inserted":b.custom_scroll_class;
jQuery.scrollTo(C,900,{axis:"y",offset:-30})}}catch(D){this.log("Exception on scroll ",D)}this.log("end apply_changes.")},colorForOperation:function(a){if(0===a.length)return!1;var b={"oortle-diff-inserted":"#55C64D","oortle-diff-changed":"#55C64D","oortle-diff-inserted-block":"#ffff66","oortle-diff-removed-block":"#C63F32","oortle-diff-removed":"#C63F32"},c="#fff";return jQuery.each(b,function(b,d){return a.hasClass(b)?(c=d,!1):void 0}),c},show:function(a){var b=jQuery(a);Livepress.Config.page_active||(b.getBg(),b.data("oldbg",b.css("background-color")),b.addClass("unfocused-lp-update"),b.css("background-color",this.colorForOperation(b))),b.show()},sliderFixed:function(a,b){var c=jQuery,d={slideType:"down",duration:250};b=c.extend({},d,b);var e="down"===b.slideType,f=c(a),g=f.data("originalHeight"),h=f.is(":visible"),i=f.data("originalStyle");return 1===arguments.length&&(e=!h),e===h?!1:(g&&i||(g=f.show().height(),i=f.attr("style"),f.data("originalStyle",i),f.data("originalHeight",g),h||f.hide()),e?f.show().animate({height:g},{duration:b.duration,complete:function(){f.css({height:f.data("originalHeight")}),f.attr("style",f.data("originalStyle")),f.show()}}):f.animate({height:0},{duration:b.duration,complete:function(){f.hide()}}),void 0)},show_with_effects:function(a,b){"string"===this.custom_background_color&&a.css("background-color",this.custom_background_color),a.getBg(),b(a,a.css("background-color"))},display:function(a){if(a){var b=this.selector(".oortle-diff-inserted-block");b.hide().css("height","");var c=this,d=function(a,b){c.sliderFixed(a,"down"),a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800),setTimeout(function(){a.css("background-color","")},1500)};b.each(function(a,b){c.show_with_effects(jQuery(b),d)}),this.show_with_effects(this.selectors(".oortle-diff-inserted",".oortle-diff-changed"),function(a,b){a.slideDown(200);try{a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800)}catch(d){console.log("Error when animating new comment div.")}setTimeout(function(){a.css("background-color","")},1500)}),this.show_with_effects(this.selectors(".oortle-diff-removed-block",".oortle-diff-removed"),function(a,b){try{a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800).slideUp(200)}catch(d){console.log("Error when removing comment div.")}setTimeout(function(){a.css("background-color","")},1500)})}else this.show(this.selectors(".oortle-diff-changed",".oortle-diff-inserted",".oortle-diff-removed")),this.show(this.selector(".oortle-diff-inserted-block"))},set_text:function(a,b){var c=this.get_path_parts(a),d=this.get_child_index(c),e=this.node_at_path(this.get_parent_path(c));if(d>-1&&null!==e){for(var f=e.childNodes[d],g=jQuery(b),h=0,i=g.length;i>h;h++)e.insertBefore(g[h],f);e.removeChild(f)}},get_path_parts:function(a){if("#"===a[0]){var b=jQuery(a,this.containerElement)[0];return b?[b.parentNode,b]:[null,null]}for(var c=a.split(":"),d=[],e=0,f=c.length;f>e;e++)d[e]=parseInt(c[e],10);return d},get_child_index:function(a){return a.length>0?parseInt(a[a.length-1],10):-1},get_parent_path:function(a){var b=a.slice();return b.splice(-1,1),b},node_at_path:function(a){return void 0===a[0].nodeType?this.get_node_by_path(this.containerElement,a):a[a.length-1]},get_node_by_path:function(a,b){var c=b.slice();if(c.splice(0,1),0===c.length)return a;for(var d=0,e=a,f=null,g=c.length;g>d&&(e=e.childNodes[c[d]],"undefined"!=typeof e);d++);return d===c.length&&(f=e),f},add_class:function(a,b){null!==a&&(a.className+=" "+b)},set_attr:function(a,b,c){null!==a&&a.setAttribute(b,c)},del_attr:function(a,b){null!==a&&a.removeAttribute(b)}},Livepress.DOMManipulator.clean_updates=function(a){var b=new Livepress.DOMManipulator(a);b.clean_updates()},function(){if(!window.google||!google.gears){var a=null;if("undefined"!=typeof GearsFactory)a=new GearsFactory;else try{"undefined"!=typeof window.ActiveXObject&&(a=new ActiveXObject("Gears.Factory"),-1!=a.getBuildInfo().indexOf("ie_mobile")&&a.privateSetGlobalObject(this))}catch(b){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(a=document.createElement("object"),a.style.display="none",a.width=0,a.height=0,a.type="application/x-googlegears",document.documentElement.appendChild(a))}a&&(window.google||(google={}),google.gears||(google.gears={factory:a}))}}();var internalStorage=function(){var a={expires:30,get:function(a){return jQuery.cookie(a)},set:function(a,b){return jQuery.cookie(a,b,{path:"/",expires:this.expires})},remove:function(a){return jQuery.cookie(a,null)}},b=a;try{"localStorage"in window&&null!==window.localStorage&&(b=window.localStorage)}catch(c){}return function(a){return a||(a=""),{get:function(c){return b.getItem(a+"-"+c)},set:function(c,d){return b.setItem(a+"-"+c,d)},remove:function(c){return b.remoteItem(a+"-"+c)}}}}();Livepress.storage=function(){var a=new internalStorage("Livepress");return{get:function(b,c){var d=a.get(b);return null===d||"undefined"==typeof d?c:d},set:function(b,c){return a.set(b,c)}}}(),Livepress.Ui.Controller=function(a,b){function c(){void 0!==s&&s.connected()}function d(a){console.log("Comet error: ",a)}function e(a){return"object"==typeof b&&"function"==typeof b[a]?b[a].apply(this,Array.prototype.slice.call(arguments,1)):void 0}function f(){setTimeout(function(){B.is_connected()?s.connected():s.disconnected()},1500)}function g(b,c,d){if(a.comment_msg_id!==d){e("before_live_comment",b);var g=e("should_attach_comment",a);if(g=void 0===g?!0:g){var h=e("on_comment_update",b,q);void 0===h&&q.update(b.diff)}if(f(),e("post_comment_update"),v+=1,b.comment_id){var i=e("get_comment_container",b.comment_id);if(void 0===i)for(var j=0;j<b.diff.length;j+=1)if("ins_node"===b.diff[j][0]&&b.diff[j][2].indexOf(b.content)>=0){i=jQuery(b.diff[j][2]).attr("id");break}var k;k=0===jQuery(b.avatar_url).length?b.avatar_url:jQuery(b.avatar_url).attr("src");var l={title:b.author,text:b.content,commentContainerId:i,image:k};g||(l.scrollToText=lp_client_strings.refresh_page,l.scrollToCallback=function(){location.reload()}),s.comment_alert(l,b.comment_gmt)}s.set_comment_num(v)}}function h(){var b=jQuery(document.querySelectorAll("#post_content_livepress .livepress-update")).not(".oortle-diff-removed");s.set_live_updates_num(b.length);var c=window.location.href.replace(window.location.hash,"");b.filter(window.location.hash).each(function(){return new Livepress.Ui.UpdateView(jQuery(this),c,10,a.disable_comments)}),y&&b.addClass("lp-hl-on-hover"),b.each(function(){var a=jQuery(this);a.is(".lp-live")||a.addClass("lp-live")})}function i(a){if(!window.is_active){var b=!1;if(jQuery.each(a,function(a,c){b="del_node"===c[0]}),!b){var c=jQuery("title"),d=c.data("updates");d+=1,c.data("updates",d),c.text("("+d+") "+c.data("text"))}}}function j(b){if(f(),2===b.length){var c,d=b[0],e=b[1];c="string"==typeof a.custom_title_css_selector?a.custom_title_css_selector:"#post-"+a.post_id;var g=jQuery(c),h=g.html().replaceAll(d,e);g.html(h);var i=document.title.replace(d,e);document.title=i}else console.log("error -- received data about post = "+b)}function k(a){var b=new Date,c=b.toISOString(),d='<abbr class="livepress-timestamp" title="'+c+'"></abbr>';if(console.log("post_update with data = ",a),"event"in a&&"post_title"===a.event)return j(a.data);var e=a.pop();if(i(a),A){if(z.push(a),"undefined"!=typeof r)for(var g=e.updated_at,k=0;k<e.post_updates.length;k+=1)r.post_update(e.post_updates[k],g)}else p.update(a,{effects_display:window.is_active}),h();f(),u.find(".lp-updated-counter").html(d),u.find(".lp-updated-counter").find(".livepress-timestamp").attr("title",c),u.find(".lp-bar .lp-status").removeClass("lp-off").addClass("lp-on"),jQuery("abbr.livepress-timestamp").timeago(),jQuery(document).trigger("post_update")}function l(b,c,d){a.new_post_msg_id!==d&&r.new_post(b.title,b.link,b.author,b.updated_at_gmt)}function m(a){f(),s.post_alert(a.title,a.link,a.author,a.updated_at_gmt)}function n(b,c){if(!C&&0!==b.length&&"username"!==b){C=!0,s.imFeedbackSpin(!0);var d={action:"new_im_follower",user_name:b,im_type:c,post_id:a.post_id};jQuery.post(a.ajax_url,d,function(a){s.handleImFeedback(a,b),C=!1})}}function o(){var a=function(){var a=jQuery(".unfocused-lp-update"),b=a.data("oldbg")||"#FFF";a.animate({backgroundColor:b},4e3,"swing",function(){jQuery(this).removeClass("unfocused-lp-update").css("background-color","")})},b=jQuery("title");b.data("text",b.text()),b.data("updates",0),t.focus(function(){this.is_active=!0,b.text(b.data("text")),b.data("updates",0),a()}),t.blur(function(){this.is_active=!1})}var p,q,r,s,t=jQuery(window),u=jQuery(document.getElementById("livepress")),v=a.comment_count,w=a.page_type,x="home"===w,y="single"===w,z=[],A=!1,B=OORTLE.instance,C=!1;if(window.is_active=!0,t.ready(o),null!==document.getElementById("lp-update-box")&&(r=new Livepress.Ui.UpdateBoxView(x)),null!==document.getElementById("livepress")){s=new Livepress.Ui.View(a.disable_comments),s.set_comment_num(v),h();var D=encodeURIComponent(a.feed_sub_link),E=encodeURIComponent(a.feed_title);s.add_link_to_greader("http://www.google.com/ig/addtoreader?et=gEs490VY&source=ign_pLt&feedurl="+D+"&feedtitle="+E)}if(void 0!==r||void 0!==s){var F="#livepress-connection";jQuery(document.body).append('<div id="'+F+'"><!-- --></div>');var G="|livepress|"+a.site_url+"|post-new-update";if(B.attachEvent("connected",c),B.attachEvent("error",d),void 0!==r&&x){var H=a.new_post_msg_id?{last_id:a.new_post_msg_id}:{fetch_all:!0};B.subscribe(G,l,H),B.connect()}if(void 0!==s){B.attachEvent("reconnected",s.connected),B.attachEvent("disconnected",s.disconnected);var I="|livepress|"+a.site_url+"|post-"+a.post_id,J="|livepress|"+a.site_url+"|post-"+a.post_id+"_comment";a.can_edit_comments&&(J+="-logged"),p=new Livepress.DOMManipulator("#post_content_livepress",a.custom_background_color),q=new Livepress.DOMManipulator("#post_comments_livepress",a.custom_background_color);var K=a.new_post_msg_id?{last_id:a.new_post_msg_id}:{fetch_all:!0};B.subscribe(G,m,K),!a.disable_comments&&a.comment_live_updates_default&&(K=a.comment_msg_id?{last_id:a.comment_msg_id}:{fetch_all:!0},B.subscribe(J,function(){},K)),K=a.post_update_msg_id?{last_id:a.post_update_msg_id}:{fetch_all:!0},B.subscribe(I,k,K),s.subscribeIm(n),s.live_control(Livepress.storage.get("settings-live",!0),function(a){B.connect(),a&&Livepress.storage.set("settings-live","1")},function(a){B.disconnect(),a&&Livepress.storage.set("settings-live","")}),a.disable_comments||s.follow_comments_control(Livepress.storage.get("settings-comments",!0),function(a){B.subscribe(J,g),a&&Livepress.storage.set("settings-comments","1")},function(a){B.unsubscribe(J,g),a&&Livepress.storage.set("settings-comments","")}),s.scroll_control(Livepress.storage.get("settings-scroll",void 0===a.autoscroll||a.autoscroll),function(a){Livepress.Scroll.settings_enabled=!0,a&&Livepress.storage.set("settings-scroll","1")},function(a){Livepress.Scroll.settings_enabled=!1,a&&Livepress.storage.set("settings-scroll","")})}}},jQuery(function(){Livepress.Comment=function(){var a=!1,b=function(a){var b=jQuery("#oortle-comment-status");0===b.length&&(jQuery("#submit").after("<span id='oortle-comment-status'></span>"),b=jQuery("#oortle-comment-status")),b.text(a)},c=function(a){var b=jQuery("#comment");b.attr("disabled",!1),a&&(b.val(""),jQuery("#cancel-comment-reply-link").click())},d=function(){try{if(a)return!1;a=!0;var d=jQuery("#submit"),e=d.attr("value");d.attr("value",lp_client_strings.sending+"..."),d.attr("disabled",!0),jQuery("textarea#comment").attr("disabled",!0),b("");var f={},g=document.getElementById("commentform")||document.getElementById("comment-form");f.comment_post_ID=g.comment_post_ID.value,"undefined"!=typeof g.comment_parent&&(f.comment_parent=g.comment_parent.value),f.comment=g.comment.value,f.author=g.elements[0].value,f.email=g.elements[1].value,f.url=g.elements[2].value,f._wp_unfiltered_html_comment=void 0!==g._wp_unfiltered_html_comment?g._wp_unfiltered_html_comment.value:"",f.redirect_to="",f.livepress_update="true",f.action="post_comment",f._ajax_nonce=Livepress.Config.ajax_comment_nonce,jQuery.ajax({url:Livepress.Config.site_url+"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:f,error:function(a,d){console.log("comment response: "+a.status+" :: "+a.statusText),console.log("comment ajax failed: %s",d),b(lp_client_strings.unknown_error),c(!1)},success:function(a){b(lp_client_strings.comment_status+": "+a.msg),c("200"===a.code)},complete:function(){d=jQuery("#submit"),a=!1,d.attr("value",e),d.attr("disabled",!1)}})}catch(h){console.log("EXCEPTION: %s",h),b(lp_client_strings.sending_error)}return!1},e=function(){jQuery("#submit").click(d)},f=function(a){var b=jQuery("#comment");a.ajax_nonce===Livepress.Config.ajax_nonce&&b.val()===a.content&&c(!0)},g=function(a){var b=a.comment_page_number;return"asc"===a.comment_order?0===b||b===a.comment_pages_count:1>=b},h=function(a){return jQuery("#comment-"+a).parent().attr("id")},i=function(a,b){var c={custom_scroll_class:"#comment-"+a.comment_id};if("0"===a.comment_parent)b.update(a.diff,c);else{b.update(a.comments_counter_only_diff,c);var d=jQuery(a.comment_html);d.addClass("oortle-diff-inserted-block").hide();var e=jQuery("#comment-"+a.comment_parent),f=e.children(".children");0===f.length&&(f=jQuery("<ul>").addClass("children").appendTo(e)),f.append(d),b.display(!0)}return!0};return Livepress.Config.disable_comments||e(),{send:d,attach:e,before_live_comment:f,should_attach_comment:g,get_comment_container:h,on_comment_update:i}}()}),void 0!==jQuery&&(jQuery.ajax=function(a){return function(){return void 0!==OORTLE&&void 0!==OORTLE.instance&&OORTLE.instance&&OORTLE.instance.flush(),a.apply(this,arguments)}}(jQuery.ajax)),Livepress.Ready=function(){var a,b,c,d,e={post_comment_update:Livepress.Comment.attach,before_live_comment:Livepress.Comment.before_live_comment,should_attach_comment:Livepress.Comment.should_attach_comment,get_comment_container:Livepress.Comment.get_comment_container,on_comment_update:Livepress.Comment.on_comment_update};if(jQuery("abbr.livepress-timestamp").timeago(),jQuery(".lp-status").hasClass("livepress-pinned-header")){var f=function(){a=jQuery(".livepress_content"),b=a.find(".livepress-update:first"),c=jQuery("#livepress"),d=b.outerHeight()+20,b.css({"margin-top":"-"+(d+30)+"px",position:"absolute",width:c.outerWidth()+"px"}),c.css({"margin-top":d+"px"})};f(),jQuery(document).on("post_update",function(){f()})}return new Livepress.Ui.Controller(Livepress.Config,e)},jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?j.transparent:j[a.trim(b).toLowerCase()]}function d(b,d){var e;do{if(e=(a.curCSS||a.css)(b,d),""!=e&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function e(){var a,b,c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,d={};if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;)a=c[e],"string"==typeof c[a]&&(b=a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),d[b]=c[a]);else for(a in c)"string"==typeof c[a]&&(d[a]=c[a]);return d}function f(b){var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c,d={_:0};for(c in b)a[c]!=b[c]&&(d[c]=b[c]);return d}function h(b,c,d,e){return"object"==typeof b&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function i(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects[b]?!1:!0}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.queue(function(){var i,j=a(this),l=j.attr("style")||" ",m=f(e.call(this)),n=j.attr("class")||"";a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),i=f(e.call(this)),j.attr("class",n),j.animate(g(m,i),{queue:!1,duration:c,easing:d,complete:function(){a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),"object"==typeof j.attr("style")?(j.attr("style").cssText="",j.attr("style").cssText=l):j.attr("style",l),h&&h.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.24",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b){var c=h.apply(this,arguments),d={options:c[1],duration:c[2],callback:c[3]},e=d.options.mode,f=a.effects[b];return a.fx.off||!f?e?this[e](d.duration,d.callback):this.each(function(){d.callback&&d.callback.call(this)}):f.call(this,d)},_show:a.fn.show,show:function(a){if(i(a))return this._show.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(i(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(i(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:c(-2*a+2)/-2+1}}),a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width",i="vertical"==f?g.height():g.width();"show"==e&&g.css(h,0);var j={};j[h]="show"==e?i:0,g.animate(j,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery);