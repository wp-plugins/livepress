/*! livepress -v1.3
 * http://livepress.com/
 * Copyright (c) 2015 LivePress, Inc.
 */
jQuery.fn.placeholder=function(a){function b(){return"placeholder"in document.createElement("input")}if(!b()){var c=function(b){var c=jQuery("<input type='text'>").addClass("password-placeholder");c.attr("value",b.attr("placeholder"));var d=b.width();if(d||(d=a),d){var e=-d-parseInt(b.css("padding-left").replace("px",""),10)-parseInt(b.css("padding-right").replace("px",""),10)-parseInt(b.css("border-right-width").replace("px",""),10)-parseInt(b.css("border-left-width").replace("px",""),10);7===parseInt(jQuery.browser.version,10)&&jQuery.browser.msie&&(d=b.width()-parseInt(b.css("border-right-width").replace("px",""),10)-parseInt(b.css("border-left-width").replace("px",""),10)-1),c.css({width:d,"margin-left":e}),c.bind("focus",function(){var a=jQuery(this),b=a.val();a.val(""),a.val(b);var c=a.prev();a.hide(),c.trigger("focus")}),b.after(c)}};jQuery("form").bind("submit",function(){jQuery("input").each(function(){var a=jQuery(this);a.attr("value")===a.attr("placeholder")&&a.attr("value",""),a.hasClass("password-placeholder")&&a.remove()})}),jQuery("input").each(function(){var a=jQuery(this);"undefined"!=typeof a.attr("placeholder")&&""!==a.attr("placeholder")&&((""===jQuery.trim(a.attr("value"))||jQuery.trim(a.attr("value"))===a.attr("placeholder"))&&("password"===a.attr("type")&&(c(a),a.css({visibility:"hidden"})),a.attr("value",a.attr("placeholder")),a.css("color","#BBB")),a.bind("focus",function(){a.attr("value")===a.attr("placeholder")&&(a.attr("value",""),a.css({visibility:"visible"}),a.css("color","black"))}),a.bind("blur",function(){""===jQuery.trim(a.attr("value"))?(a.css("color","#BBB"),a.attr("value",a.attr("placeholder")),0===a.parent().find(".password-placeholder").length&&"password"===a.attr("type")&&c(a),a.next().is(".password-placeholder")&&(a.css({visibility:"hidden"}),a.parent().find(".password-placeholder").show())):a.next().is(".password-placeholder")&&a.next().remove()}))})}},jQuery(function(){var a=jQuery("#api_key"),b="#api_key_submit",c=!1,d=!1;if(0!==a.length){if(void 0!==window.livepress_twitter_authorized){var e=jQuery("#lp-post-to-twitter-change"),f=jQuery("#lp-post-to-twitter-change_link");window.livepress_twitter_authorized?(e.hide(),f.show()):(e.show(),f.hide())}a.each(function(){this.value&&(jQuery(this).attr("disabled",!0),jQuery(b).attr("value",lp_strings.remove),c=!0)}),jQuery(b).on("click",function(e){return e.preventDefault(),""===document.getElementById("api_key").value?!1:d===!0?!1:c?(a.attr("disabled",!1),a.attr("value",""),jQuery(b).attr("value",lp_strings.check),c=!1,jQuery("input#submit").click(),!1):(d=!0,jQuery(b).attr("value","Sending"),jQuery.ajax({url:"./admin-ajax.php",data:{api_key:document.getElementById("api_key").value,action:"lp_api_key_validate",_ajax_nonce:LivepressConfig.ajax_api_validate_nonce},success:function(d){if("object"==typeof d){var e,f,g=jQuery("#api_key_status");d.error_api_key?(g.html(lp_strings.key_not_valid).attr("class","invalid_api_key"),c=!0,a.attr("disabled",!0),jQuery(b).attr("value","Remove")):(g.html(lp_strings.authenticated).attr("class","valid_api_key"),jQuery(".no_key_hidden").show("slow"),c=!0,a.attr("disabled",!0),jQuery(b).attr("value","Remove"));for(f in d)d.hasOwnProperty(f)&&(e=jQuery("input[name="+f+"],textarea[name="+f+"]")).length&&(1===e.length?e.is(":checkbox")?(e.attr("checked",!!d[f]),e.change()):e.val(d[f]):e.val([d[f]]))}else jQuery("#api_key_status").html(lp_strings.unexpected).attr("class",""),jQuery(b).attr("value",lp_strings.check)},error:function(a,b,c){jQuery("#api_key_status").html(lp_strings.connection_problems).attr("class","")},complete:function(a,b){d=!1}}),!1)})}}),jQuery(function(){var a={},b=function(){var b=jQuery(this),c=b.attr("id").match(/_([a-z]+)/)[1],d=jQuery("#im_bot_username_"+c),e=jQuery("#im_bot_password_"+c);void 0===a[c]?a[c]={username:d.val(),password:e.val()}:(e.next().is(".password-placeholder:visible")&&e.next().focus(),d.val(a[c].username),e.val(a[c].password)),d.attr("disabled",!0),e.hide(),jQuery("#im_bot_username_"+c+"_message").hide(),jQuery("#check_message_"+c).show(),b.hide(),jQuery("#edit_"+c).show(),jQuery("#check_"+c).show()},c=function(){var a=jQuery(this),b=a.attr("id").match(/_([a-z]+)/)[1],c=jQuery("#im_bot_username_"+b),d=jQuery("#im_bot_password_"+b);c.attr("disabled",!1),d.show(),jQuery("#im_bot_username_"+b+"_message").show(),jQuery("#check_message_"+b).hide(),a.hide(),jQuery("#cancel_"+b).show(),jQuery("#check_"+b).hide()};jQuery(".im_check").show(),jQuery(".im_edit").click(c),jQuery(".im_cancel").click(b).each(b),jQuery(".im-users-test-message-button").show()}),jQuery(function(){"function"==typeof get_twitter_avatar&&jQuery("#twitter_avatar_preview_button").click(get_twitter_avatar).show()}),jQuery(function(){jQuery(".messages").click(function(){jQuery(this).fadeOut("fast")}),jQuery(".row:odd").addClass("odd"),jQuery(".row:even").addClass("even")}),jQuery(function(){jQuery(document).placeholder();var a=function(a,b){var c=jQuery(a);c.is(":checked")?b.show():(b.find("input").each(function(){var a=jQuery(this);a.is(":checkbox,:radio")&&a.attr("checked",!1)}),b.hide())};jQuery("#disable_comments").bind("change",function(a){var b=a.target.checked?"none":"block";jQuery("#comment_live_updates_default").parent().css("display",b)}),jQuery("#avatar_wp").bind("change",function(){jQuery("#avatar_twitter").change()}),jQuery("#update_author").bind("change",function(){var b=jQuery(".tabulation.author_name");a(this,b)}),jQuery("#twitter_avatar_username").keydown(function(a){13===a.keyCode&&(a.preventDefault(),a.stopPropagation(),"function"==typeof get_twitter_avatar&&get_twitter_avatar(this))}),jQuery("#avatar_twitter").bind("change",function(){var b=jQuery(".tabulation.twitter_avatar_choice");a(this,b)}),jQuery("#include_avatar").bind("change",function(){var b=jQuery(".tabulation.avatar");a(this,b)}),jQuery("#timestamp").bind("change",function(){var b=jQuery(".tabulation.timestamp");a(this,b)}),jQuery("#comment_notification").bind("change",function(){var b=jQuery(".tabulation.comment_notification_sound");a(this,b)}),jQuery("#remote_post").bind("change",function(){var b=jQuery(".tabulation.remote_post");a(this,b)}),jQuery("input.im_send_comments").each(function(){var a=jQuery(this),b=a.attr("id").split("_").pop(),c=function(){""!==jQuery(this).val()&&jQuery(this).val()!==jQuery(this).attr("placeholder")?a.attr("disabled",!1):a.attr("disabled",!0)};jQuery("#im_enabled_user_"+b).change(c).trigger("change")})});