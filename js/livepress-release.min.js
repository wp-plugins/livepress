/*! livepress -v1.0.1
 * http://livepress.com/
 * Copyright (c) 2013 LivePress, Inc.
 */
var Livepress=Livepress||{};Livepress.ensureExists=function(a){return void 0===a&&(a={}),a};var console=console||{log:function(){}};String.prototype.parseGMT=function(a){var b,c,d=this,e=a||"h:i:s a";return b=Date.parse(d.replace(/-/gi,"/"),"Y/m/d H:i:s"),c=new Date(b),"Invalid Date"===c.toString()?this.toString():c=c.format(e)},String.prototype.replaceAll=function(a,b){var c=this;return c=c.split(a).join(b)},jQuery.fn.getBg=function(){var a,b,c,d=jQuery(this);return a=d.css("background-color"),"transparent"!==a&&"rgba(0, 0, 0, 0)"!==a&&void 0!==a?a:(b=this.parents().filter(function(){return c=d.css("background-color"),"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c}).eq(0).css("background-color"),b?d.css("background-color",b):d.css("background-color","#ffffff"),void 0)},jQuery.extend({getUrlVars:function(a){for(var b,c=[],d=a.href||window.location.href,e=d.slice(d.indexOf("?")+1).split("&"),f=0;f<e.length;f++)b=e[f].split("="),c.push(b[0]),c[b[0]]=b[1];return c},getUrlVar:function(a,b){return jQuery.getUrlVars(b||!1)[a]}}),jQuery.fn.outerHTML=function(a){return a?this.before(a).remove():jQuery("<div>").append(this.eq(0).clone()).html()},jQuery.fn.autolink=function(){return this.each(function(){var a=new RegExp('((http|https|ftp)://[\\w?=&./-;#~%-]+(?![\\w\\s?&./;#~%"=-]*>))',"g");jQuery(this).html(jQuery(this).html().replace(a,'<a href="$1">$1</a> '))})},"undefined"==typeof document.activeElement&&jQuery(document).focusin(function(a){document.activeElement=a.target}).focusout(function(){document.activeElement=null}),jQuery.extend(jQuery.expr[":"],{focus:function(a){return a===document.activeElement}}),Date.prototype.format=function(a){var b,c,d="",e=Date.replaceChars;for(b=0;b<a.length;b++)c=a.charAt(b),d+=e[c]?e[c].call(this):c;return d},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return 1===this.getDate()%10&&11!==this.getDate()?"st":2===this.getDate()%10&&12!==this.getDate()?"nd":3===this.getDate()%10&&13!==this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){return"Not Yet Supported"},W:function(){return"Not Yet Supported"},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return"Not Yet Supported"},L:function(){return 0===this.getFullYear()%4&&0!==this.getFullYear()%100||0===this.getFullYear()%400?"1":"0"},o:function(){return"Not Supported"},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return"Not Yet Supported"},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},e:function(){return"Not Yet Supported"},I:function(){return"Not Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":"+(Math.abs(this.getTimezoneOffset()%60)<10?"0":"")+Math.abs(this.getTimezoneOffset()%60)},T:function(){var a,b;return b=this.getMonth(),this.setMonth(0),a=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1"),this.setMonth(b),a},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d")+"T"+this.format("H:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},function(a){var b=function(a){return"object"==typeof a?a:{top:a,left:a}},c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1},c.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!==a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||"BackCompat"===d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"===d&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.speed||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){var g,h=this,i=a(h),j=d,k={},l=i.is("html,body"),m=function(a){i.animate(k,e,f.easing,a&&function(){a.call(this,d,f)})};"number"!=typeof j&&"string"!=typeof j||!/^([\-+]=)?\d+(\.\d+)?(px|%)?$/.test(j)?(("number"==typeof j||"string"==typeof j)&&(j=a(j,this)),(j.is||j.style)&&(g=(j=a(j)).offset())):j=b(j),a.each(f.axis.split(""),function(a,b){var d="x"===b?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=h[n],p=c.max(h,b);if(g)k[n]=g[e]+(l?0:o-i.offset()[e]),f.margin&&(k[n]-=parseInt(j.css("margin"+d),10)||0,k[n]-=parseInt(j.css("border"+d+"Width"),10)||0),k[n]+=f.offset[e]||0,f.over[e]&&(k[n]+=j["x"===b?"width":"height"]()*f.over[e]);else{var q=j[e];k[n]=q.slice&&"%"===q.slice(-1)?parseFloat(q)/100*p:q}/^\d+$/.test(k[n])&&(k[n]=k[n]<=0?0:Math.min(k[n],p)),!a&&f.queue&&(o!==k[n]&&m(f.onAfterFirst),delete k[n])}),m(f.onAfter)}).end()},c.max=function(b,c){var d="x"===c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(jQuery),function(jQuery){var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]},b=function(b){var c;return b&&b.constructor===Array&&3===b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:a[jQuery.trim(b).toLowerCase()]},c=function(a,c){var d;do{if(d=jQuery.curCSS(a,c),""!==d&&"transparent"!==d||jQuery.nodeName(a,"body"))break;c="backgroundColor"}while(a=a.parentNode);return b(d)};jQuery.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(a,d){jQuery.fx.step[d]=function(a){void 0===a.start&&(a.start=c(a.elem,d),a.end=b(a.end)),a.elem.style[d]="rgb("+[Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)].join(",")+")"}})}(jQuery),function(a){a.gritter={},a.gritter.options={fade_in_speed:"fast",fade_out_speed:500,time:1e3};var b={fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_control:'<div class = "gritter-control"><div class ="gritter-scroll">Scroll to Comment</div><div class ="gritter-settings"></div><div class="gritter-close"></div></div>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper gritter-item [[item_class]] [[class_name]] [[comment_container_id]]" style="display:none"><div class="gritter-top"></div><div class="gritter-inner"><div class = "gritter-control"><div class ="gritter-scroll">Scroll to Comment</div><div class ="gritter-settings"></div><div class="gritter-close"></div></div>[[image]]<span class="gritter-title">[[username]]</span><div class="lp-date">[[date]]</div><p>[[text]]</p>[[comments]]<div class="bubble-point"></div></div><div class="gritter-bot"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(c){c.title||(c.title=""),c.text||(c.text=""),this._is_setup||this._runSetup();var d=c.title,e=c.commentContainerId,f=c.text,g=c.date,h=c.image,i=c.comments||"",j=c.sticky||!1,k=c.class_name||"",l=c.time||"";this._verifyWrapper(),this._item_count+=1;var m=this._item_count,n=this._tpl_item;a(["before_open","after_open","before_close","after_close"]).each(function(d,e){b["_"+e+"_"+m]=a.isFunction(c[e])?c[e]:function(){}}),this._custom_timer=0,l&&(this._custom_timer=l),void 0===h&&(h="");var o=h?'<img src="'+h+'" class="gritter-image" />':"",p=h?"gritter-with-image":"gritter-without-image";n=this._str_replace(["[[username]]","[[text]]","[[date]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]","[[comments]]","[[comment_container_id]]"],[d,f,g,o,this._item_count,p,k,i,e],n),this["_before_open_"+m](),a("#gritter-notice-wrapper").prepend(n);var q=a("#gritter-item-"+this._item_count),r=a(q.find(".gritter-scroll"));return jQuery.isFunction(c.scrollToCallback)?(r.bind("click",c.scrollToCallback),c.scrollToText&&r.text(c.scrollToText)):r.bind("click",function(a){var b=jQuery(jQuery(a.target).parents(".gritter-item-wrapper")[0]),c=b.attr("class").split(/\s+/);jQuery.each(c,function(a,b){var c=b.match(/comment\-/);return null!==c?(jQuery.scrollTo(jQuery("#"+b),900),void 0):void 0})}),q.fadeIn(this.fade_in_speed,function(){b["_after_open_"+m](a(this))}),j||this._setFadeTimer(q,m),a(q).bind("mouseenter mouseleave",function(c){"mouseenter"===c.type?j||b._restoreItemIfFading(a(this),m):j||b._setFadeTimer(a(this),m),b._hoverState(a(this),c.type)}),m},_countRemoveWrapper:function(b,c){c.remove(),this["_after_close_"+b](c),0===a(".gritter-item-wrapper").length&&a("#gritter-notice-wrapper").remove()},_fade:function(a,c,d,e){d=d||{};var f="undefined"!=typeof d.fade?d.fade:!0,g=d.speed||this.fade_out_speed;this["_before_close_"+c](a),e&&a.unbind("mouseenter mouseleave"),f?a.animate({opacity:0},g,function(){a.animate({height:0},300,function(){b._countRemoveWrapper(c,a)})}):this._countRemoveWrapper(c,a)},_hoverState:function(a,c){if("mouseenter"===c){a.addClass("hover");var d=a.find(".gritter-control");d.show(),a.find(".gritter-close").click(function(){var c=a.attr("id").split("-")[2];b.removeSpecific(c,{},a,!0)})}else a.removeClass("hover"),a.find(".gritter-control").hide()},removeSpecific:function(b,c,d,e){d||(d=a("#gritter-item-"+b)),this._fade(d,b,c||{},e)},_restoreItemIfFading:function(a,b){clearTimeout(this["_int_id_"+b]),a.stop().css({opacity:""})},_runSetup:function(){var b;for(b in a.gritter.options)a.gritter.options.hasOwnProperty(b)&&(this[b]=a.gritter.options[b]);this._is_setup=1},_setFadeTimer:function(a,c){var d=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+c]=setTimeout(function(){b._fade(a,c)},d)},stop:function(b){var c=a.isFunction(b.before_close)?b.before_close:function(){},d=a.isFunction(b.after_close)?b.after_close:function(){},e=a("#gritter-notice-wrapper");c(e),e.fadeOut(function(){a(this).remove(),d()})},_str_replace:function(a,b,c,d){var e=0,f=0,g="",h="",i=0,j=0,k=[].concat(a),l=[].concat(b),m=c,n=l instanceof Array,o=m instanceof Array;for(m=[].concat(m),d&&(this.window[d]=0),e=0,i=m.length;i>e;e++)if(""!==m[e])for(f=0,j=k.length;j>f;f++)g=m[e]+"",h=n?void 0!==l[f]?l[f]:"":l[0],m[e]=g.split(k[f]).join(h),d&&m[e]!==g&&(this.window[d]+=(g.length-m[e].length)/k[f].length);return o?m:m[0]},_verifyWrapper:function(){0===a("#gritter-notice-wrapper").length&&a("body").append(this._tpl_wrap)}};a.gritter.add=function(a){try{return b.add(a||{})}catch(c){var d="Gritter Error: "+c;"undefined"!=typeof console&&console.error?console.error(d,a):alert(d)}},a.gritter.remove=function(a,c){b.removeSpecific(a,c||{})},a.gritter.removeAll=function(a){b.stop(a||{})}}(jQuery),function(a){var b,c=function(a){return(new Date).getTime()-a.getTime()},d=function(b,c){var d=a.isFunction(b)?b(c):b;return d.replace(/%d/i,c)},e=function(a){return b.inWords(c(a))},f=function(c){if(c=a(c),!c.data("timeago")){c.data("timeago",{datetime:b.datetime(c)});var d=a.trim(c.text());d.length>0&&c.attr("title",d)}return c.data("timeago")},g=function(){var b=f(this);return isNaN(b.datetime)||a(this).text(e(b.datetime)),this};a.timeago=function(b){return b instanceof Date?e(b):"string"==typeof b?e(a.timeago.parse(b)):e(a.timeago.datetime(b))},b=a.timeago,a.extend(a.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",ago:null,fromNow:null,seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"}},inWords:function(b){var c=this.settings.strings,e=c.prefixAgo,f=c.suffixAgo||c.ago;this.settings.allowFuture&&(0>b&&(e=c.prefixFromNow,f=c.suffixFromNow||c.fromNow),b=Math.abs(b));var g=b/1e3,h=g/60,i=h/60,j=i/24,k=j/365,l=45>g&&d(c.seconds,Math.round(g))||90>g&&d(c.minute,1)||45>h&&d(c.minutes,Math.round(h))||90>h&&d(c.hour,1)||24>i&&d(c.hours,Math.round(i))||48>i&&d(c.day,1)||30>j&&d(c.days,Math.floor(j))||60>j&&d(c.month,1)||365>j&&d(c.months,Math.floor(j/30))||2>k&&d(c.year,1)||d(c.years,Math.floor(k));return a.trim([e,l,f].join(" "))},parse:function(b){var c=a.trim(b);return c=c.replace(/-/,"/").replace(/-/,"/"),c=c.replace(/T/," ").replace(/Z/," UTC"),c=c.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(c)},datetime:function(c){var d="time"===a(c).get(0).tagName.toLowerCase(),e=d?a(c).attr("datetime"):a(c).attr("title");return b.parse(e)}}),a.fn.timeago=function(){var a=this;a.each(g);var c=b.settings;return c.refreshMillis>0&&setInterval(function(){a.each(g)},c.refreshMillis),a},document.createElement("abbr"),document.createElement("time")}(jQuery),Livepress.Ui={},Livepress.Ui.View=function(a){var b=this,c=jQuery("#livepress"),d=c.find(".lp-comments-count"),e=c.find(".lp-updates-count"),f=c.find(".lp-settings-button"),g=c.find(".lp-bar"),h=jQuery("#lp-settings");this.set_comment_num=function(a){var b=d.html();d.html(parseInt(a,10)),b!==a&&d.parent().animate({color:"#ffff66"},200).animate({color:"#ffffff"},800)},this.set_live_updates_num=function(a){e.html(parseInt(a,10))};var i=h.find(".lp-settings-close");h.find(".lp-tab"),h.find(".lp-pane"),h.find(".lp-button.lp-expand-options");var j=h.find("input[name=lp-setting-sound]"),k=h.find("input[name=lp-setting-updates]"),l=h.find("input[name=lp-setting-comments]"),m=h.find("input[name=lp-setting-scroll]");h.find(".lp-button.lp-update-settings"),h.find(".lp-options-ext");var n=h.find(".lp-settings-short");a&&(g.find(".lp-sprite.comments").hide(),d.parent().hide(),l.parent().hide());var o=function(){var a=document.documentElement;return b.innerHeight||a&&a.clientHeight||document.body.clientHeight},p=function(){var a=document.documentElement;return b.innerWidth||a&&a.clientWidth||document.body.clientWidth},q=function(){p(),o(),g.offset(),h.show("blind")},r=function(){h.hide("blind"),n.removeClass("expanded")},s=function(){return h.is(":visible")?r():q()};f.click(function(){return s()}),i.click(function(){return r()});var t=function(a,b,c,d){return b.attr("checked",a).change(function(){return b.is(":checked")?c():d()}),a?c():d()};this.sound_control=function(a,b,c){t(a,j,b,c)},this.live_control=function(a,b,c){t(a,k,b,c)},this.follow_comments_control=function(a,b,c){t(a,l,b,c)},this.scroll_control=function(a,b,c){t(a,m,b,c)},this.add_link_to_greader=function(a){h.find(".lp-greader-link").attr("href",a)},this.subscribeIm=function(a){h.find(".lp-subscribe .lp-button").click(function(){var b=h.find("[name=lp-im-type]").val(),c=h.find("[name=lp-im-username]").val();a(c,b)})},this.imFeedbackSpin=function(a){h.find(".lp-subscribe-im-spin")[a?"show":"hide"]()},this.handleImFeedback=function(a,b){var c={INVALID_JID:"Error: [USERNAME] isn't a valid Google Talk account",NOT_IN_ROSTER:"Error: [USERNAME] wasn't find in jabber client bot roster",NOT_AUTHORIZED:"[USERNAME] has been authorized",AUTHORIZED:"[USERNAME] has been authorized",INTERNAL_SERVER_ERROR:"LivePress! error. Try again in a few minutes",AUTHORIZATION_SENT:"Authorization request sent to [USERNAME]"},d=c[a];d="undefined"!=typeof d?d.replace("[USERNAME]",b):c.INTERNAL_SERVER_ERROR,d.length>0&&(this.imFeedbackSpin(!1),h.find(".lp-im-subscription-message").html(d).show())};var u=h.find(".live-updates-status"),v=g.find(".lp-counter");this.connected=function(){u.text("ON"),v.removeClass("lp-off").addClass("lp-on"),g.find(".lp-logo").attr("title","Connected")},this.disconnected=function(){u.text("OFF"),v.removeClass("lp-on").addClass("lp-off"),g.find(".lp-logo").attr("title","Not Connected")};var w=function(){jQuery(".gritter-settings").click(function(){q()})};this.post_alert=function(a,b,c,d){if(console.log("Post alert",{title:a,link:b,author:c,date:d}),void 0!==a||void 0!==c||void 0!==d){var e=jQuery("<div>"),f=jQuery("<abbr>").attr("class","timeago").attr("title",d).text(d.replace(/Z/," UTC"));e.append(f).append(" by "+c),jQuery.gritter.add({title:'<a href="'+b+'">'+a+"</a>",date:"New Post - "+e.html(),class_name:"new-post",time:7e3}),w(),jQuery("abbr.timeago").timeago()}},this.comment_alert=function(a,b){console.log("Comment alert",a);var c=jQuery("<div>"),d=jQuery("<abbr>").attr("class","timeago").attr("title",b).text(b.replace(/Z/," UTC"));c.append(d);var e={class_name:"comment",date:c.html(),time:7e3};jQuery.gritter.add(jQuery.extend({},e,a)),jQuery(".gritter-comments .add-comment").click(function(){jQuery().scrollTo("#respond, #commentform, #submit",900)}),w(),jQuery("abbr.timeago").timeago()}},Livepress.Ui.UpdateBoxView=function(a){function b(a){var b=['<li style="display:none;">',a,"</li>"].join("");if(m+=1,m>1?(j.html(" new updates."),k.html("them")):(j.html(" new update."),k.html("it")),m>7)h.slideDown(300);else{g.append(b);var c=g.find("li:last");c.show()}i.text(m),e.is(":visible")||(e.slideDown(600),e.css("display","inline-block")),jQuery("abbr.timeago").timeago()}"undefined"==typeof a&&(a=!0);var c=['<div class="update-box-content">','<div class="lp-update-count">','<strong class="lp-update-num">0</strong>','<strong class="lp-update-new-update"> new updates. </strong>','<a href="javascript:location.reload();" class="lp-refresher">Refresh</a> to see <span class="lp-update-it-them">them</span>.',"</div>",'<div class="lp-balloon">','<img class="lp-close-button" title="Close" />','<ul class="lp-new-posts"></ul>','<a class="lp-more-link" href="javascript:location.reload();">+ more</a>','<div class="lp-balloon-tail">&nbsp;</div>',"</div>","</div>",'<div class="clear"></div>'].join(""),d=".livepress lp-update-container",e=jQuery("#lp-update-box");e.addClass(d),e.append(c);var f=e.find(".lp-balloon"),g=e.find(".lp-new-posts"),h=e.find(".lp-more-link"),i=e.find(".lp-update-num"),j=e.find(".lp-update-new-update"),k=e.find(".lp-update-it-them"),l=e.find(".lp-close-button"),m=0;l.click(function(){f.fadeOut()}),l.attr("src",Livepress.Config.lp_plugin_url+"/img/lp-settings-close.png"),this.reposition_balloon=function(){f.css("margin-top",-(f.height()+60))},this.new_post=function(a,c,d,e){if(void 0!==e){var f=jQuery("<div>"),g=jQuery("<abbr>").attr("class","timeago").attr("title",e).text(e.replace(/Z/," UTC")),h=jQuery("<a></a>").attr("href",c).text("Update: "+a);f.append(g).append(h),b(f.html()),this.reposition_balloon()}},this.post_update=function(a,c){var d=25,e=28,f=jQuery("<div>"),g=jQuery("<abbr>").attr("class","timeago").attr("title",c).text(c.replace(/Z/," UTC")),h=a.indexOf(" ",d);-1===h&&(h=a.length),h>e&&(h=a.substr(0,h).lastIndexOf(" ")),(-1===h||h>e)&&(h=e);var i=a.substr(0,h)+(h<a.length?"&hellip;":""),j=" Update: <strong>"+i+"</strong>";f.append(g).append(j),b(f.html())},this.clear=function(){h.hide(),g.html(""),m=0,i.text("0"),e.is(":visible")&&e.slideUp(600)}},Livepress.Ui.UpdateView=function(a,b,c,d){var e,f={},g=function(){e&&e.remove(),a.removeClass("ui-container"),a.removeClass("lp-borders"),a.find("lp-pre-update-ui").remove()},h=function(b){var c,d=a.clone();d.find(".livepress-meta").remove();var e=d.text();e=d.text().replace(/\n/g,""),e=e.replace(/\s+/," ");var f=[];for(f.push(0),c=1;c<e.length;c+=1)" "===e.charAt(c)&&f.push(c);if(f.push(e.length),e.length>b){c=0;for(var g=b;f[c]<b&&c<f.length-1;)g=f[c],c+=1;e=e.substring(0,g)+"…"}return'"'+e+'"'};if(void 0===e){f.element=a,f.link=b+"#"+a.attr("id"),f.shortExcerpt=h(100),f.longExcerpt=h(1e3);var i=["facebook","twitter"];d||i.push("comment");var j=Livepress.Ui.ReactButtons(f,i);f.element.append(j),e=a.find(".lp-pre-update-ui"),a.get(0)===jQuery(".livepress-update").get(0)&&e.addClass("lp-first-update"),a.addClass("ui-container"),isFinite(c)?setTimeout(function(){g()},1e3*c):(e.bind("mouseleave",function(){g()}),e.bind("mouseover",function(){}),a.bind("mouseleave",function(a){var b=a.relatedTarget||a.fromElement;-1===b.className.indexOf("lp-pre-update-ui")&&g()}))}},Livepress.Ui.ReactButton=function(a,b){var c={},d={};return d.btnDiv=jQuery("<div>").addClass("lp-pu-ui-feature lp-pu-"+a),c.buttonFor=function(a,b){var c={};return c.link=b.link,c.type=a,d[a+"Button"](c),c.div},d.constructButtonMarkup=function(b){var c=jQuery("<div>").addClass("lp-pu-ui-text lp-"+a+"-text").text(b),e=jQuery("<div>").addClass("lp-"+a+"-ico lp-pu-ico");return d.btnDiv.append(e).append(c)},d.twitterButton=function(a){a.div=d.constructButtonMarkup("Tweet"),a.div.click(function(){window.open("http://twitter.com/home?status="+b.shortExcerpt+" "+a.link,"_blank")})},d.facebookButton=function(a){a.div=d.constructButtonMarkup("Share"),a.div.click(function(){var a=b.link,c=b.shortExcerpt,d=436,e=626,f=(screen.width-e)/2,g=(screen.height-d)/2,h="toolbar=0, status=0, width="+e+", height="+d+", left="+f+", top="+g;return window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(a)+"&t="+encodeURIComponent(c)," sharer",h),!1})},d.commentButton=function(a){a.div=d.constructButtonMarkup("Reply"),a.div.click(function(){var a=jQuery("#comment");jQuery().scrollTo(a,900),a.focus();var c='<blockquote class="lp-update-comment">'+b.shortExcerpt+"\n"+b.link+"</blockquote>\n";a.attr("value",c)})},c.buttonFor(a,b)},Livepress.Ui.ReactButtons=function(a,b){var c=jQuery("<div>").addClass("lp-pre-update-ui");return jQuery.each(b,function(b,d){var e=Livepress.Ui.ReactButton(d,a);c.append(e)}),c},function(a){function b(b,c){function d(a){return function(b){var c,d=this._t;return d&&d._a?c=a.call(this,b):(d&&d.sID?fb._wD(jb+"ignoring "+b.type+": "+d.sID):fb._wD(jb+"ignoring "+b.type),c=null),c}}this.flashVersion=8,this.debugMode=!0,this.debugFlash=!1,this.useConsole=!0,this.consoleOnly=!0,this.waitForWindowLoad=!1,this.bgColor="#ffffff",this.useHighPerformance=!1,this.flashPollingInterval=null,this.html5PollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.noSWFCache=!1,this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.movieID="sm2-container",this.id=c||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20120513",this.version=null,this.movieURL=null,this.url=b||null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.hasHTML5=function(){try{return"undefined"!=typeof Audio&&"undefined"!=typeof(new Audio).canPlayType}catch(a){return!1}}(),this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb=this,gb=null,hb="soundManager",ib=hb+"::",jb="HTML5::",kb=navigator.userAgent,lb=a,mb=lb.location.href.toString(),nb=document,ob=[],pb=!0,qb=!1,rb=!1,sb=!1,tb=!1,ub=!1,vb=0,wb=["log","info","warn","error"],xb=8,yb=null,zb=null,Ab=!1,Bb=!1,Cb=0,Db=null,Eb=null,Fb=Array.prototype.slice,Gb=!1,Hb=kb.match(/(ipad|iphone|ipod)/i),Ib=kb.match(/firefox/i),Jb=kb.match(/msie/i),Kb=kb.match(/webkit/i),Lb=kb.match(/safari/i)&&!kb.match(/chrome/i),Mb=kb.match(/opera/i),Nb=kb.match(/(mobile|pre\/|xoom)/i)||Hb,Ob=!mb.match(/usehtml5audio/i)&&!mb.match(/sm2\-ignorebadua/i)&&Lb&&!kb.match(/silk/i)&&kb.match(/OS X 10_6_([3-7])/i),Pb="undefined"!=typeof console&&"undefined"!=typeof console.log,Qb="undefined"!=typeof nb.hasFocus?nb.hasFocus():null,Rb=Lb&&"undefined"==typeof nb.hasFocus,Sb=!Rb,Tb=/(mp3|mp4|mpa)/i,Ub="about:blank",Vb=nb.location?nb.location.protocol.match(/http/i):null,Wb=Vb?"":"http://",Xb=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,Yb=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],Zb=new RegExp("\\.("+Yb.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Vb,this._global_a=null,K={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},Nb&&(fb.useHTML5Audio=!0,fb.preferFlash=!1,Hb&&(fb.ignoreFlash=!0,Gb=!0)),this.ok=function(){return Eb?sb&&!tb:fb.useHTML5Audio&&fb.hasHTML5},this.supported=this.ok,this.getMovie=function(a){return f(a)||nb[a]||lb[a]},this.createSound=function(a,b){function c(){return g=M(g),fb.sounds[j.id]=new e(j),fb.soundIDs.push(j.id),fb.sounds[j.id]}var d,f,g=null,h=null,j=null;return d=hb+".createSound(): ",f=d+H(sb?"notOK":"notReady"),sb&&fb.ok()?("undefined"!=typeof b&&(a={id:a,url:b}),g=m(a),g.url=T(g.url),j=g,j.id.toString().charAt(0).match(/^[0-9]$/)&&fb._wD(d+H("badID",j.id),2),fb._wD(d+j.id+" ("+j.url+")",1),P(j.id,!0)?(fb._wD(d+j.id+" exists",1),fb.sounds[j.id]):(V(j)?(h=c(),fb._wD("Loading sound "+j.id+" via HTML5"),h._setup_html5(j)):(i>8&&(null===j.isMovieStar&&(j.isMovieStar=j.serverURL||(j.type?j.type.match(Xb):!1)||j.url.match(Zb)),j.isMovieStar&&(fb._wD(d+"using MovieStar handling"),j.loops>1&&k("noNSLoop"))),j=N(j,d),h=c(),8===i?gb._createSound(j.id,j.loops||1,j.usePolicyFile):(gb._createSound(j.id,j.url,j.usePeakData,j.useWaveformData,j.useEQData,j.isMovieStar,j.isMovieStar?j.bufferTime:!1,j.loops||1,j.serverURL,j.duration||null,j.autoPlay,!0,j.autoLoad,j.usePolicyFile),j.serverURL||(h.connected=!0,j.onconnect&&j.onconnect.apply(h))),j.serverURL||!j.autoLoad&&!j.autoPlay||h.load(j)),!j.serverURL&&j.autoPlay&&h.play(),h)):(O(f),!1)},this.destroySound=function(a,b){if(!P(a))return!1;var c,d=fb.sounds[a];for(d._iO={},d.stop(),d.unload(),c=0;c<fb.soundIDs.length;c++)if(fb.soundIDs[c]===a){fb.soundIDs.splice(c,1);break}return b||d.destruct(!0),d=null,delete fb.sounds[a],!0},this.load=function(a,b){return P(a)?fb.sounds[a].load(b):!1},this.unload=function(a){return P(a)?fb.sounds[a].unload():!1},this.onPosition=function(a,b,c,d){return P(a)?fb.sounds[a].onposition(b,c,d):!1},this.onposition=this.onPosition,this.clearOnPosition=function(a,b,c){return P(a)?fb.sounds[a].clearOnPosition(b,c):!1},this.play=function(a,b){var c=!1;return sb&&fb.ok()?P(a)?fb.sounds[a].play(b):(b instanceof Object||(b={url:b}),b&&b.url&&(fb._wD(hb+'.play(): attempting to create "'+a+'"',1),b.id=a,c=fb.createSound(b).play()),c):(O(hb+".play(): "+H(sb?"notOK":"notReady")),c)},this.start=this.play,this.setPosition=function(a,b){return P(a)?fb.sounds[a].setPosition(b):!1},this.stop=function(a){return P(a)?(fb._wD(hb+".stop("+a+")",1),fb.sounds[a].stop()):!1},this.stopAll=function(){var a;fb._wD(hb+".stopAll()",1);for(a in fb.sounds)fb.sounds.hasOwnProperty(a)&&fb.sounds[a].stop()},this.pause=function(a){return P(a)?fb.sounds[a].pause():!1},this.pauseAll=function(){var a;for(a=fb.soundIDs.length-1;a>=0;a--)fb.sounds[fb.soundIDs[a]].pause()},this.resume=function(a){return P(a)?fb.sounds[a].resume():!1},this.resumeAll=function(){var a;for(a=fb.soundIDs.length-1;a>=0;a--)fb.sounds[fb.soundIDs[a]].resume()},this.togglePause=function(a){return P(a)?fb.sounds[a].togglePause():!1},this.setPan=function(a,b){return P(a)?fb.sounds[a].setPan(b):!1},this.setVolume=function(a,b){return P(a)?fb.sounds[a].setVolume(b):!1},this.mute=function(a){var b=0;if("string"!=typeof a&&(a=null),a)return P(a)?(fb._wD(hb+'.mute(): Muting "'+a+'"'),fb.sounds[a].mute()):!1;for(fb._wD(hb+".mute(): Muting all sounds"),b=fb.soundIDs.length-1;b>=0;b--)fb.sounds[fb.soundIDs[b]].mute();return fb.muted=!0,!0},this.muteAll=function(){fb.mute()},this.unmute=function(a){var b;if("string"!=typeof a&&(a=null),a)return P(a)?(fb._wD(hb+'.unmute(): Unmuting "'+a+'"'),fb.sounds[a].unmute()):!1;for(fb._wD(hb+".unmute(): Unmuting all sounds"),b=fb.soundIDs.length-1;b>=0;b--)fb.sounds[fb.soundIDs[b]].unmute();return fb.muted=!1,!0},this.unmuteAll=function(){fb.unmute()},this.toggleMute=function(a){return P(a)?fb.sounds[a].toggleMute():!1},this.getMemoryUse=function(){var a=0;return gb&&8!==i&&(a=parseInt(gb._getMemoryUse(),10)),a},this.disable=function(a){var b;
if("undefined"==typeof a&&(a=!1),tb)return!1;for(tb=!0,k("shutdown",1),b=fb.soundIDs.length-1;b>=0;b--)E(fb.sounds[fb.soundIDs[b]]);return l(a),_.remove(lb,"load",p),!0},this.canPlayMIME=function(a){var b;return fb.hasHTML5&&(b=W({type:a})),!b&&Eb&&(b=a&&fb.ok()?!!((i>8?a.match(Xb):null)||a.match(fb.mimePattern)):null),b},this.canPlayURL=function(a){var b;return fb.hasHTML5&&(b=W({url:a})),!b&&Eb&&(b=a&&fb.ok()?!!a.match(fb.filePattern):null),b},this.canPlayLink=function(a){return"undefined"!=typeof a.type&&a.type&&fb.canPlayMIME(a.type)?!0:fb.canPlayURL(a.href)},this.getSoundById=function(a,b){if(!a)throw new Error(hb+".getSoundById(): sID is null/undefined");var c=fb.sounds[a];return c||b||fb._wD('"'+a+'" is an invalid sound ID.',2),c},this.onready=function(a,b){var c="onready",d=!1;if(!(a&&a instanceof Function))throw H("needFunction",c);return sb&&fb._wD(H("queue",c)),b||(b=lb),n(c,a,b),o(),d=!0,d},this.ontimeout=function(a,b){var c="ontimeout",d=!1;if(!(a&&a instanceof Function))throw H("needFunction",c);return sb&&fb._wD(H("queue",c)),b||(b=lb),n(c,a,b),o({type:c}),d=!0,d},this._writeDebug=function(a,b,c){var d,e,g,h="soundmanager-debug";if(!fb.debugMode)return!1;if("undefined"!=typeof c&&c&&(a=a+" | "+(new Date).getTime()),Pb&&fb.useConsole&&(g=wb[b],"undefined"!=typeof console[g]?console[g](a):console.log(a),fb.consoleOnly))return!0;try{if(d=f(h),!d)return!1;e=nb.createElement("div"),0===++vb%2&&(e.className="sm2-alt"),b="undefined"==typeof b?0:parseInt(b,10),e.appendChild(nb.createTextNode(a)),b&&(b>=2&&(e.style.fontWeight="bold"),3===b&&(e.style.color="#ff3333")),d.insertBefore(e,d.firstChild)}catch(i){}return d=null,!0},this._wD=this._writeDebug,this._debug=function(){var a,b;for(k("currentObj",1),a=0,b=fb.soundIDs.length;b>a;a++)fb.sounds[fb.soundIDs[a]]._debug()},this.reboot=function(){fb._wD(hb+".reboot()"),fb.soundIDs.length&&fb._wD("Destroying "+fb.soundIDs.length+" SMSound objects...");var a,b;for(a=fb.soundIDs.length-1;a>=0;a--)fb.sounds[fb.soundIDs[a]].destruct();try{Jb&&(zb=gb.innerHTML),yb=gb.parentNode.removeChild(gb),fb._wD("Flash movie removed.")}catch(c){k("badRemove",2)}zb=yb=Eb=null,fb.enabled=y=sb=Ab=Bb=qb=rb=tb=fb.swfLoaded=!1,fb.soundIDs=[],fb.sounds={},gb=null;for(a in ob)if(ob.hasOwnProperty(a))for(b=ob[a].length-1;b>=0;b--)ob[a][b].fired=!1;fb._wD(hb+": Rebooting..."),lb.setTimeout(fb.beginDelayedInit,20)},this.getMoviePercent=function(){return gb&&"undefined"!=typeof gb.PercentLoaded?gb.PercentLoaded():null},this.beginDelayedInit=function(){ub=!0,w(),setTimeout(function(){return Bb?!1:(A(),v(),Bb=!0,!0)},20),q()},this.destruct=function(){fb._wD(hb+".destruct()"),fb.disable(!0)},e=function(a){var b,c,d,e,f,g,h,l,n,o=this,p=!1,q=[],r=0,s=null;n={duration:null,time:null},this.sID=a.id,this.url=a.url,this.options=m(a),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){if(fb.debugMode){var a,b,c=null,d=[],e=64;for(c in o.options)null!==o.options[c]&&(o.options[c]instanceof Function?(a=o.options[c].toString(),a=a.replace(/\s\s+/g," "),b=a.indexOf("{"),d.push(" "+c+": {"+a.substr(b+1,Math.min(Math.max(a.indexOf("\n")-1,e),e)).replace(/\n/g,"")+"... }")):d.push(" "+c+": "+o.options[c]));fb._wD("SMSound() merged options: {\n"+d.join(", \n")+"\n}")}},this._debug(),this.load=function(a){var b,c=null;if("undefined"!=typeof a?(o._iO=m(a,o.options),o.instanceOptions=o._iO):(a=o.options,o._iO=a,o.instanceOptions=o._iO,s&&s!==o.url&&(k("manURL"),o._iO.url=o.url,o.url=null)),o._iO.url||(o._iO.url=o.url),o._iO.url=T(o._iO.url),fb._wD("SMSound.load(): "+o._iO.url,1),o._iO.url===o.url&&0!==o.readyState&&2!==o.readyState)return k("onURL",1),3===o.readyState&&o._iO.onload&&o._iO.onload.apply(o,[!!o.duration]),o;if(b=o._iO,s=o.url,o.loaded=!1,o.readyState=1,o.playState=0,V(b))c=o._setup_html5(b),c._called_load?fb._wD(jb+"ignoring request to load again: "+o.sID):(fb._wD(jb+"load: "+o.sID),o._html5_canplay=!1,o._a.autobuffer="auto",o._a.preload="auto",c._called_load=!0,b.autoPlay?o.play():c.load());else try{o.isHTML5=!1,o._iO=N(M(b)),b=o._iO,8===i?gb._load(o.sID,b.url,b.stream,b.autoPlay,b.whileloading?1:0,b.loops||1,b.usePolicyFile):gb._load(o.sID,b.url,!!b.stream,!!b.autoPlay,b.loops||1,!!b.autoLoad,b.usePolicyFile)}catch(d){k("smError",2),j("onload",!1),B({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return o},this.unload=function(){return 0!==o.readyState&&(fb._wD('SMSound.unload(): "'+o.sID+'"'),o.isHTML5?(e(),o._a&&(o._a.pause(),Y(o._a))):8===i?gb._unload(o.sID,Ub):gb._unload(o.sID),b()),o},this.destruct=function(a){fb._wD('SMSound.destruct(): "'+o.sID+'"'),o.isHTML5?(e(),o._a&&(o._a.pause(),Y(o._a),Gb||d(),o._a._t=null,o._a=null)):(o._iO.onfailure=null,gb._destroySound(o.sID)),a||fb.destroySound(o.sID,!0)},this.play=function(a,b){var c,d,e,h,j,k=null;if(c="SMSound.play(): ",b=void 0===b?!0:b,a||(a={}),o._iO=m(a,o._iO),o._iO=m(o._iO,o.options),o._iO.url=T(o._iO.url),o.instanceOptions=o._iO,o._iO.serverURL&&!o.connected)return o.getAutoPlay()||(fb._wD(c+" Netstream not connected yet - setting autoPlay"),o.setAutoPlay(!0)),o;if(V(o._iO)&&(o._setup_html5(o._iO),f()),1!==o.playState||o.paused||(d=o._iO.multiShot,d?fb._wD(c+'"'+o.sID+'" already playing (multi-shot)',1):(fb._wD(c+'"'+o.sID+'" already playing (one-shot)',1),k=o)),null!==k)return k;if(o.loaded?fb._wD(c+'"'+o.sID+'"'):0===o.readyState?(fb._wD(c+'Attempting to load "'+o.sID+'"',1),o.isHTML5?Hb&&o.load(o._iO):(o._iO.autoPlay=!0,o.load(o._iO))):2===o.readyState?(fb._wD(c+'Could not load "'+o.sID+'" - exiting',2),k=o):fb._wD(c+'"'+o.sID+'" is loading - attempting to play..',1),null!==k)return k;if(!o.isHTML5&&9===i&&o.position>0&&o.position===o.duration&&(fb._wD(c+'"'+o.sID+'": Sound at end, resetting to position:0'),a.position=0),o.paused&&o.position&&o.position>0)fb._wD(c+'"'+o.sID+'" is resuming from paused state',1),o.resume();else{if(o._iO=m(a,o._iO),null!==o._iO.from&&null!==o._iO.to&&0===o.instanceCount&&0===o.playState&&!o._iO.serverURL){if(h=function(){o._iO=m(a,o._iO),o.play(o._iO)},o.isHTML5&&!o._html5_canplay?(fb._wD(c+'Beginning load of "'+o.sID+'" for from/to case'),o.load({_oncanplay:h}),k=!1):o.isHTML5||o.loaded||o.readyState&&2===o.readyState||(fb._wD(c+'Preloading "'+o.sID+'" for from/to case'),o.load({onload:h}),k=!1),null!==k)return k;o._iO=l()}fb._wD(c+'"'+o.sID+'" is starting to play'),(!o.instanceCount||o._iO.multiShotEvents||!o.isHTML5&&i>8&&!o.getAutoPlay())&&o.instanceCount++,o._iO.onposition&&0===o.playState&&g(o),o.playState=1,o.paused=!1,o.position="undefined"==typeof o._iO.position||isNaN(o._iO.position)?0:o._iO.position,o.isHTML5||(o._iO=N(M(o._iO))),o._iO.onplay&&b&&(o._iO.onplay.apply(o),p=!0),o.setVolume(o._iO.volume,!0),o.setPan(o._iO.pan,!0),o.isHTML5?(f(),e=o._setup_html5(),o.setPosition(o._iO.position),e.play()):j=gb._start(o.sID,o._iO.loops||1,9===i?o._iO.position:o._iO.position/1e3,o._iO.multiShot),9!==i||j||(fb._wD(c+o.sID+": No sound hardware, or 32-sound ceiling hit"),o._iO.onplayerror&&o._iO.onplayerror.apply(o))}return o},this.start=this.play,this.stop=function(a){var b,c=o._iO;return 1===o.playState&&(o._onbufferchange(0),o._resetOnPosition(0),o.paused=!1,o.isHTML5||(o.playState=0),h(),c.to&&o.clearOnPosition(c.to),o.isHTML5?o._a&&(b=o.position,o.setPosition(0),o.position=b,o._a.pause(),o.playState=0,o._onTimer(),e()):(gb._stop(o.sID,a),c.serverURL&&o.unload()),o.instanceCount=0,o._iO={},c.onstop&&c.onstop.apply(o)),o},this.setAutoPlay=function(a){fb._wD("sound "+o.sID+" turned autoplay "+(a?"on":"off")),o._iO.autoPlay=a,o.isHTML5||(gb._setAutoPlay(o.sID,a),a&&(o.instanceCount||1!==o.readyState||(o.instanceCount++,fb._wD("sound "+o.sID+" incremented instance count to "+o.instanceCount))))},this.getAutoPlay=function(){return o._iO.autoPlay},this.setPosition=function(a){void 0===a&&(a=0);var b,c,d,e=o.isHTML5?Math.max(a,0):Math.min(o.duration||o._iO.duration,Math.max(a,0));if(b=o.position,o.position=e,d=o.position/1e3,o._resetOnPosition(o.position),o._iO.position=e,o.isHTML5){if(o._a)if(o._html5_canplay){if(o._a.currentTime!==d){fb._wD("setPosition("+d+"): setting position");try{o._a.currentTime=d,(0===o.playState||o.paused)&&o._a.pause()}catch(f){fb._wD("setPosition("+d+"): setting position failed: "+f.message,2)}}}else fb._wD("setPosition("+d+"): delaying, sound not ready")}else c=9===i?o.position:d,o.readyState&&2!==o.readyState&&gb._setPosition(o.sID,c,o.paused||!o.playState,o._iO.multiShot);return o.isHTML5&&o.paused&&o._onTimer(!0),o},this.pause=function(a){return o.paused||0===o.playState&&1!==o.readyState?o:(fb._wD("SMSound.pause()"),o.paused=!0,o.isHTML5?(o._setup_html5().pause(),e()):(a||void 0===a)&&gb._pause(o.sID,o._iO.multiShot),o._iO.onpause&&o._iO.onpause.apply(o),o)},this.resume=function(){var a=o._iO;return o.paused?(fb._wD("SMSound.resume()"),o.paused=!1,o.playState=1,o.isHTML5?(o._setup_html5().play(),f()):(a.isMovieStar&&!a.serverURL&&o.setPosition(o.position),gb._pause(o.sID,a.multiShot)),!p&&a.onplay?(a.onplay.apply(o),p=!0):a.onresume&&a.onresume.apply(o),o):o},this.togglePause=function(){return fb._wD("SMSound.togglePause()"),0===o.playState?(o.play({position:9!==i||o.isHTML5?o.position/1e3:o.position}),o):(o.paused?o.resume():o.pause(),o)},this.setPan=function(a,b){return"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=!1),o.isHTML5||gb._setPan(o.sID,a),o._iO.pan=a,b||(o.pan=a,o.options.pan=a),o},this.setVolume=function(a,b){return"undefined"==typeof a&&(a=100),"undefined"==typeof b&&(b=!1),o.isHTML5?o._a&&(o._a.volume=Math.max(0,Math.min(1,a/100))):gb._setVolume(o.sID,fb.muted&&!o.muted||o.muted?0:a),o._iO.volume=a,b||(o.volume=a,o.options.volume=a),o},this.mute=function(){return o.muted=!0,o.isHTML5?o._a&&(o._a.muted=!0):gb._setVolume(o.sID,0),o},this.unmute=function(){o.muted=!1;var a="undefined"!=typeof o._iO.volume;return o.isHTML5?o._a&&(o._a.muted=!1):gb._setVolume(o.sID,a?o._iO.volume:o.options.volume),o},this.toggleMute=function(){return o.muted?o.unmute():o.mute()},this.onPosition=function(a,b,c){return q.push({position:parseInt(a,10),method:b,scope:"undefined"!=typeof c?c:o,fired:!1}),o},this.onposition=this.onPosition,this.clearOnPosition=function(a,b){var c;if(a=parseInt(a,10),isNaN(a))return!1;for(c=0;c<q.length;c++)a===q[c].position&&(b&&b!==q[c].method||(q[c].fired&&r--,q.splice(c,1)))},this._processOnPosition=function(){var a,b,c=q.length;if(!c||!o.playState||r>=c)return!1;for(a=c-1;a>=0;a--)b=q[a],!b.fired&&o.position>=b.position&&(b.fired=!0,r++,b.method.apply(b.scope,[b.position]));return!0},this._resetOnPosition=function(a){var b,c,d=q.length;if(!d)return!1;for(b=d-1;b>=0;b--)c=q[b],c.fired&&a<=c.position&&(c.fired=!1,r--);return!0},l=function(){var a,b,c=o._iO,d=c.from,e=c.to;return b=function(){fb._wD(o.sID+': "to" time of '+e+" reached."),o.clearOnPosition(e,b),o.stop()},a=function(){fb._wD(o.sID+': playing "from" '+d),null===e||isNaN(e)||o.onPosition(e,b)},null===d||isNaN(d)||(c.position=d,c.multiShot=!1,a()),c},g=function(){var a,b=o._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&o.onPosition(parseInt(a,10),b[a])},h=function(){var a,b=o._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&o.clearOnPosition(parseInt(a,10))},f=function(){o.isHTML5&&Q(o)},e=function(){o.isHTML5&&R(o)},b=function(a){a||(q=[],r=0),p=!1,o._hasTimer=null,o._a=null,o._html5_canplay=!1,o.bytesLoaded=null,o.bytesTotal=null,o.duration=o._iO&&o._iO.duration?o._iO.duration:null,o.durationEstimate=null,o.eqData=[],o.eqData.left=[],o.eqData.right=[],o.failures=0,o.isBuffering=!1,o.instanceOptions={},o.instanceCount=0,o.loaded=!1,o.metadata={},o.readyState=0,o.muted=!1,o.paused=!1,o.peakData={left:0,right:0},o.waveformData={left:[],right:[]},o.playState=0,o.position=null},b(),this._onTimer=function(a){var b,c,d=!1,e={};return o._hasTimer||a?(o._a&&(a||(o.playState>0||1===o.readyState)&&!o.paused)&&(b=o._get_html5_duration(),b!==n.duration&&(n.duration=b,o.duration=b,d=!0),o.durationEstimate=o.duration,c=1e3*o._a.currentTime||0,c!==n.time&&(n.time=c,d=!0),(d||a)&&o._whileplaying(c,e,e,e,e)),d):void 0},this._get_html5_duration=function(){var a=o._iO,b=o._a?1e3*o._a.duration:a?a.duration:void 0,c=b&&!isNaN(b)&&1/0!==b?b:a?a.duration:null;return c},this._apply_loop=function(a,b){!a.loop&&b>1&&fb._wD("Note: Native HTML5 looping is infinite."),a.loop=b>1?"loop":""},this._setup_html5=function(a){var d,e=m(o._iO,a),f=decodeURI,g=Gb?fb._global_a:o._a,h=f(e.url),i=g&&g._t?g._t.instanceOptions:null;if(g){if(g._t&&(Gb||h!==f(s)?!Gb||i.url!==e.url||s&&s!==i.url||(d=g):d=g,d))return o._apply_loop(g,e.loops),d;fb._wD("setting new URL on existing object: "+h+(s?", old URL: "+s:"")),Gb&&g._t&&g._t.playState&&e.url!==i.url&&g._t.stop(),b(i.url?e.url===i.url:s?s===e.url:!1),g.src=e.url,o.url=e.url,s=e.url,g._called_load=!1}else fb._wD("creating HTML5 Audio() element with URL: "+h),g=new Audio(e.url),g._called_load=!1,Gb&&(fb._global_a=g);return o.isHTML5=!0,o._a=g,g._t=o,c(),o._apply_loop(g,e.loops),e.autoLoad||e.autoPlay?o.load():(g.autobuffer=!1,g.preload="none",Nb||o.load()),g},c=function(){function a(a,b,c){return o._a?o._a.addEventListener(a,b,c||!1):null}if(o._a._added_events)return!1;var b;fb._wD(jb+"adding event listeners: "+o.sID),o._a._added_events=!0;for(b in db)db.hasOwnProperty(b)&&a(b,db[b]);return!0},d=function(){function a(a,b,c){return o._a?o._a.removeEventListener(a,b,c||!1):null}var b;fb._wD(jb+"removing event listeners: "+o.sID),o._a._added_events=!1;for(b in db)db.hasOwnProperty(b)&&a(b,db[b])},this._onload=function(a){var b,c=!!a;return b="SMSound._onload(): ",fb._wD(b+'"'+o.sID+'"'+(c?" loaded.":" failed to load? - "+o.url),c?1:2),c||o.isHTML5||(fb.sandbox.noRemote===!0&&fb._wD(b+H("noNet"),1),fb.sandbox.noLocal===!0&&fb._wD(b+H("noLocal"),1)),o.loaded=c,o.readyState=c?3:2,o._onbufferchange(0),o._iO.onload&&o._iO.onload.apply(o,[c]),!0},this._onbufferchange=function(a){return 0===o.playState?!1:a&&o.isBuffering||!a&&!o.isBuffering?!1:(o.isBuffering=1===a,o._iO.onbufferchange&&(fb._wD("SMSound._onbufferchange(): "+a),o._iO.onbufferchange.apply(o)),!0)},this._onsuspend=function(){return o._iO.onsuspend&&(fb._wD("SMSound._onsuspend()"),o._iO.onsuspend.apply(o)),!0},this._onfailure=function(a,b,c){o.failures++,fb._wD('SMSound._onfailure(): "'+o.sID+'" count '+o.failures),o._iO.onfailure&&1===o.failures?o._iO.onfailure(o,a,b,c):fb._wD("SMSound._onfailure(): ignoring")},this._onfinish=function(){var a=o._iO.onfinish;o._onbufferchange(0),o._resetOnPosition(0),o.instanceCount&&(o.instanceCount--,o.instanceCount||(h(),o.playState=0,o.paused=!1,o.instanceCount=0,o.instanceOptions={},o._iO={},e()),(!o.instanceCount||o._iO.multiShotEvents)&&a&&(fb._wD('SMSound._onfinish(): "'+o.sID+'"'),a.apply(o)))},this._whileloading=function(a,b,c,d){var e=o._iO;o.bytesLoaded=a,o.bytesTotal=b,o.duration=Math.floor(c),o.bufferLength=d,e.isMovieStar?(o.durationEstimate=o.duration,3!==o.readyState&&e.whileloading&&e.whileloading.apply(o)):(o.durationEstimate=e.duration?o.duration>e.duration?o.duration:e.duration:parseInt(o.bytesTotal/o.bytesLoaded*o.duration,10),void 0===o.durationEstimate&&(o.durationEstimate=o.duration),3!==o.readyState&&e.whileloading&&e.whileloading.apply(o))},this._whileplaying=function(a,b,c,d,e){var f,g=o._iO;return isNaN(a)||null===a?!1:(o.position=a,o._processOnPosition(),!o.isHTML5&&i>8&&(g.usePeakData&&"undefined"!=typeof b&&b&&(o.peakData={left:b.leftPeak,right:b.rightPeak}),g.useWaveformData&&"undefined"!=typeof c&&c&&(o.waveformData={left:c.split(","),right:d.split(",")}),g.useEQData&&"undefined"!=typeof e&&e&&e.leftEQ&&(f=e.leftEQ.split(","),o.eqData=f,o.eqData.left=f,"undefined"!=typeof e.rightEQ&&e.rightEQ&&(o.eqData.right=e.rightEQ.split(",")))),1===o.playState&&(o.isHTML5||8!==i||o.position||!o.isBuffering||o._onbufferchange(0),g.whileplaying&&g.whileplaying.apply(o)),!0)},this._oncaptiondata=function(a){fb._wD('SMSound._oncaptiondata(): "'+this.sID+'" caption data received.'),o.captiondata=a,o._iO.oncaptiondata&&o._iO.oncaptiondata.apply(o)},this._onmetadata=function(a,b){fb._wD('SMSound._onmetadata(): "'+this.sID+'" metadata received.');var c,d,e={};for(c=0,d=a.length;d>c;c++)e[a[c]]=b[c];o.metadata=e,o._iO.onmetadata&&o._iO.onmetadata.apply(o)},this._onid3=function(a,b){fb._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var c,d,e=[];for(c=0,d=a.length;d>c;c++)e[a[c]]=b[c];o.id3=m(o.id3,e),o._iO.onid3&&o._iO.onid3.apply(o)},this._onconnect=function(a){a=1===a,fb._wD('SMSound._onconnect(): "'+o.sID+'"'+(a?" connected.":" failed to connect? - "+o.url),a?1:2),o.connected=a,a&&(o.failures=0,P(o.sID)&&(o.getAutoPlay()?o.play(void 0,o.getAutoPlay()):o._iO.autoLoad&&o.load()),o._iO.onconnect&&o._iO.onconnect.apply(o,[a]))},this._ondataerror=function(a){o.playState>0&&(fb._wD("SMSound._ondataerror(): "+a),o._iO.ondataerror&&o._iO.ondataerror.apply(o))}},z=function(){return nb.body||nb._docElement||nb.getElementsByTagName("div")[0]},f=function(a){return nb.getElementById(a)},m=function(a,b){var c,d,e,f={};for(c in a)a.hasOwnProperty(c)&&(f[c]=a[c]);d="undefined"==typeof b?fb.defaultOptions:b;for(e in d)d.hasOwnProperty(e)&&"undefined"==typeof f[e]&&(f[e]=d[e]);return f},_=function(){function a(a){var b=Fb.call(a),c=b.length;return e?(b[1]="on"+b[1],c>3&&b.pop()):3===c&&b.push(!1),b}function b(a,b){var c=a.shift(),d=[f[b]];e?c[d](a[0],a[1]):c[d].apply(c,a)}function c(){b(a(arguments),"add")}function d(){b(a(arguments),"remove")}var e=lb.attachEvent,f={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};return{add:c,remove:d}}(),db={abort:d(function(){fb._wD(jb+"abort: "+this._t.sID)}),canplay:d(function(){var a,b=this._t;if(b._html5_canplay)return!0;if(b._html5_canplay=!0,fb._wD(jb+"canplay: "+b.sID+", "+b.url),b._onbufferchange(0),a=isNaN(b.position)?null:b.position/1e3,b.position&&this.currentTime!==a){fb._wD(jb+"canplay: setting position to "+a);try{this.currentTime=a}catch(c){fb._wD(jb+"setting position failed: "+c.message,2)}}b._iO._oncanplay&&b._iO._oncanplay()}),load:d(function(){var a=this._t;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesTotal,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),ended:d(function(){var a=this._t;fb._wD(jb+"ended: "+a.sID),a._onfinish()}),error:d(function(){fb._wD(jb+"error: "+this.error.code),this._t._onload(!1)}),loadeddata:d(function(){var a=this._t,b=a.bytesTotal||1;fb._wD(jb+"loadeddata: "+this._t.sID),a._loaded||Lb||(a.duration=a._get_html5_duration(),a._whileloading(b,b,a._get_html5_duration()),a._onload(!0))}),loadedmetadata:d(function(){fb._wD(jb+"loadedmetadata: "+this._t.sID)}),loadstart:d(function(){fb._wD(jb+"loadstart: "+this._t.sID),this._t._onbufferchange(1)}),play:d(function(){fb._wD(jb+"play: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0)}),playing:d(function(){fb._wD(jb+"playing: "+this._t.sID),this._t._onbufferchange(0)}),progress:d(function(a){var b,c,d,e=this._t,f=0,g="progress"===a.type,h=a.target.buffered,i=a.loaded||0,j=a.total||1;if(e.loaded)return!1;if(h&&h.length){for(b=h.length-1;b>=0;b--)f=h.end(b)-h.start(b);if(i=f/a.target.duration,g&&h.length>1){for(d=[],c=h.length,b=0;c>b;b++)d.push(a.target.buffered.start(b)+"-"+a.target.buffered.end(b));fb._wD(jb+"progress: timeRanges: "+d.join(", "))}g&&!isNaN(i)&&fb._wD(jb+"progress: "+e.sID+": "+Math.floor(100*i)+"% loaded")}isNaN(i)||(e._onbufferchange(0),e._whileloading(i,j,e._get_html5_duration()),i&&j&&i===j&&db.load.call(this,a))}),ratechange:d(function(){fb._wD(jb+"ratechange: "+this._t.sID)}),suspend:d(function(a){var b=this._t;fb._wD(jb+"suspend: "+b.sID),db.progress.call(this,a),b._onsuspend()}),stalled:d(function(){fb._wD(jb+"stalled: "+this._t.sID)}),timeupdate:d(function(){this._t._onTimer()}),waiting:d(function(){var a=this._t;fb._wD(jb+"waiting: "+a.sID),a._onbufferchange(1)})},V=function(a){return!a.serverURL&&(a.type?W({type:a.type}):W({url:a.url})||fb.html5Only)},Y=function(a){a&&(a.src=Ib?"":Ub)},W=function(a){function b(a){return fb.preferFlash&&ab&&!fb.ignoreFlash&&"undefined"!=typeof fb.flash[a]&&fb.flash[a]}if(!fb.useHTML5Audio||!fb.hasHTML5)return!1;var c,d,e,f,g=a.url||null,h=a.type||null,i=fb.audioFormats;if(h&&"undefined"!=typeof fb.html5[h])return fb.html5[h]&&!b(h);if(!X){X=[];for(f in i)i.hasOwnProperty(f)&&(X.push(f),i[f].related&&(X=X.concat(i[f].related)));X=new RegExp("\\.("+X.join("|")+")(\\?.*)?$","i")}return e=g?g.toLowerCase().match(X):null,e&&e.length?e=e[1]:h?(d=h.indexOf(";"),e=(-1!==d?h.substr(0,d):h).substr(6)):c=!1,e&&"undefined"!=typeof fb.html5[e]?c=fb.html5[e]&&!b(e):(h="audio/"+e,c=fb.html5.canPlayType({type:h}),fb.html5[e]=c,c=c&&fb.html5[h]&&!b(h)),c},$=function(){function a(a){var b,c,d,f=!1,g=!1;if(!e||"function"!=typeof e.canPlayType)return f;if(a instanceof Array){for(c=0,d=a.length;d>c&&!g;c++)(fb.html5[a[c]]||e.canPlayType(a[c]).match(fb.html5Test))&&(g=!0,fb.html5[a[c]]=!0,fb.flash[a[c]]=!!(fb.preferFlash&&ab&&a[c].match(Tb)));f=g}else b=e&&"function"==typeof e.canPlayType?e.canPlayType(a):!1,f=!(!b||!b.match(fb.html5Test));return f}if(!fb.useHTML5Audio||"undefined"==typeof Audio)return!1;var b,c,d,e="undefined"!=typeof Audio?Mb?new Audio(null):new Audio:null,f={};c=fb.audioFormats;for(b in c)if(c.hasOwnProperty(b)&&(f[b]=a(c[b].type),f["audio/"+b]=f[b],fb.flash[b]=fb.preferFlash&&!fb.ignoreFlash&&b.match(Tb)?!0:!1,c[b]&&c[b].related))for(d=c[b].related.length-1;d>=0;d--)f["audio/"+c[b].related[d]]=f[b],fb.html5[c[b].related[d]]=f[b],fb.flash[c[b].related[d]]=f[b];return f.canPlayType=e?a:null,fb.html5=m(fb.html5,f),!0},u={notReady:"Not loaded yet - wait for soundManager.onload()/onready()",notOK:"Audio support is not available.",domError:ib+"createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:ib+"createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:hb+": Verify that %s is a valid path.",tryDebug:"Try "+hb+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:hb+": Non-HTTP page ("+nb.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:hb+": Special case: Waiting for focus-related event..",waitImpatient:hb+": Getting impatient, still waiting for Flash%s...",waitForever:hb+": Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:hb+": Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- "+hb+"._debug(): Current sound objects ---",waitEI:ib+"initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:hb+": Waiting for window.onload()",docLoaded:hb+": Document already loaded",onload:ib+"initComplete(): calling soundManager.onload()",onloadOK:hb+".onload() complete",init:ib+"init()",didInit:ib+"init(): Already called?",flashJS:hb+": Attempting to call Flash from JS..",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",shutdown:hb+".disable(): Shutting down",queue:hb+": Queueing %s handler",smFail:hb+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+K.swfTimedout+" CSS..",fbLoaded:"Flash loaded",fbHandler:ib+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:hb+".load(): current URL already assigned.",badFV:hb+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access"},H=function(){var a,b,c=Fb.call(arguments),d=c.shift(),e=u&&u[d]?u[d]:"";if(e&&c&&c.length)for(a=0,b=c.length;b>a;a++)e=e.replace("%s",c[a]);return e},M=function(a){return 8===i&&a.loops>1&&a.stream&&(k("as2loop"),a.stream=!1),a},N=function(a,b){return a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(fb._wD((b||"")+H("policy")),a.usePolicyFile=!0),a},O=function(a){"undefined"!=typeof console&&"undefined"!=typeof console.warn?console.warn(a):fb._wD(a)},g=function(){return!1},E=function(a){var b;for(b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(a[b]=g);b=null},F=function(a){"undefined"==typeof a&&(a=!1),(tb||a)&&(k("smFail",2),fb.disable(a))},G=function(a){var b,c=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(c=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return b=(a&&-1!==a.lastIndexOf("/")?a.substr(0,a.lastIndexOf("/")+1):"./")+fb.movieURL,fb.noSWFCache&&(b+="?ts="+(new Date).getTime()),b},s=function(){i=parseInt(fb.flashVersion,10),8!==i&&9!==i&&(fb._wD(H("badFV",i,xb)),fb.flashVersion=i=xb);var a=fb.debugMode||fb.debugFlash?"_debug.swf":".swf";fb.useHTML5Audio&&!fb.html5Only&&fb.audioFormats.mp4.required&&9>i&&(fb._wD(H("needfl9")),fb.flashVersion=i=9),fb.version=fb.versionNumber+(fb.html5Only?" (HTML5-only mode)":9===i?" (AS3/Flash 9)":" (AS2/Flash 8)"),i>8?(fb.defaultOptions=m(fb.defaultOptions,fb.flash9Options),fb.features.buffering=!0,fb.defaultOptions=m(fb.defaultOptions,fb.movieStarOptions),fb.filePatterns.flash9=new RegExp("\\.(mp3|"+Yb.join("|")+")(\\?.*)?$","i"),fb.features.movieStar=!0):fb.features.movieStar=!1,fb.filePattern=fb.filePatterns[8!==i?"flash9":"flash8"],fb.movieURL=(8===i?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),fb.features.peakData=fb.features.waveformData=fb.features.eqData=i>8},C=function(a,b){return gb?(gb._setPolling(a,b),void 0):!1},D=function(){if(fb.debugURLParam.test(mb)&&(fb.debugMode=!0),f(fb.debugID))return!1;var a,b,c,d,e;if(!(!fb.debugMode||f(fb.debugID)||Pb&&fb.useConsole&&fb.consoleOnly)){a=nb.createElement("div"),a.id=fb.debugID+"-toggle",d={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},a.appendChild(nb.createTextNode("-")),a.onclick=L,a.title="Toggle SM2 debug console",kb.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(e in d)d.hasOwnProperty(e)&&(a.style[e]=d[e]);if(b=nb.createElement("div"),b.id=fb.debugID,b.style.display=fb.debugMode?"block":"none",fb.debugMode&&!f(a.id)){try{c=z(),c.appendChild(a)}catch(g){throw new Error(H("domError")+" \n"+g.toString())}c.appendChild(b)}}c=null},P=this.getSoundById,k=function(a,b){return a?fb._wD(H(a),b):""},mb.indexOf("sm2-debug=alert")+1&&fb.debugMode&&(fb._wD=function(b){a.alert(b)}),L=function(){var a=f(fb.debugID),b=f(fb.debugID+"-toggle");return a?(pb?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block"),pb=!pb,void 0):!1},j=function(a,b,c){if("undefined"!=typeof sm2Debugger)try{sm2Debugger.handleEvent(a,b,c)}catch(d){}return!0},J=function(){var a=[];return fb.debugMode&&a.push(K.sm2Debug),fb.debugFlash&&a.push(K.flashDebug),fb.useHighPerformance&&a.push(K.highPerf),a.join(" ")},I=function(){var a=H("fbHandler"),b=fb.getMoviePercent(),c=K,d={type:"FLASHBLOCK"};return fb.html5Only?!1:(fb.ok()?(fb.didFlashBlock&&fb._wD(a+": Unblocked"),fb.oMC&&(fb.oMC.className=[J(),c.swfDefault,c.swfLoaded+(fb.didFlashBlock?" "+c.swfUnblocked:"")].join(" "))):(Eb&&(fb.oMC.className=J()+" "+c.swfDefault+" "+(null===b?c.swfTimedout:c.swfError),fb._wD(a+": "+H("fbTimeout")+(b?" ("+H("fbLoaded")+")":""))),fb.didFlashBlock=!0,o({type:"ontimeout",ignoreInit:!0,error:d}),B(d)),void 0)},n=function(a,b,c){"undefined"==typeof ob[a]&&(ob[a]=[]),ob[a].push({method:b,scope:c||null,fired:!1})},o=function(a){if(a||(a={type:fb.ok()?"onready":"ontimeout"}),!sb&&a&&!a.ignoreInit)return!1;if("ontimeout"===a.type&&(fb.ok()||tb&&!a.ignoreInit))return!1;var b,c,d={success:a&&a.ignoreInit?fb.ok():!tb},e=a&&a.type?ob[a.type]||[]:[],f=[],g=[d],h=Eb&&fb.useFlashBlock&&!fb.ok();for(a.error&&(g[0].error=a.error),b=0,c=e.length;c>b;b++)e[b].fired!==!0&&f.push(e[b]);if(f.length)for(fb._wD(hb+": Firing "+f.length+" "+a.type+"() item"+(1===f.length?"":"s")),b=0,c=f.length;c>b;b++)f[b].scope?f[b].method.apply(f[b].scope,g):f[b].method.apply(this,g),h||(f[b].fired=!0);return!0},p=function(){lb.setTimeout(function(){fb.useFlashBlock&&I(),o(),fb.onload instanceof Function&&(k("onload",1),fb.onload.apply(lb),k("onloadOK",1)),fb.waitForWindowLoad&&_.add(lb,"load",p)},1)},bb=function(){if(void 0!==ab)return ab;var a,b,c,d=!1,e=navigator,f=e.plugins,g=lb.ActiveXObject;if(f&&f.length)b="application/x-shockwave-flash",c=e.mimeTypes,c&&c[b]&&c[b].enabledPlugin&&c[b].enabledPlugin.description&&(d=!0);else if("undefined"!=typeof g){try{a=new g("ShockwaveFlash.ShockwaveFlash")}catch(h){}d=!!a}return ab=d,d},U=function(){var a,b,c=!0,d=Hb&&!!kb.match(/os (1|2|3_0|3_1)/i);if(d?(fb.hasHTML5=!1,fb.html5Only=!0,fb.oMC&&(fb.oMC.style.display="none"),c=!1):fb.useHTML5Audio&&(fb.html5&&fb.html5.canPlayType?fb.hasHTML5=!0:(fb._wD("SoundManager: No HTML5 Audio() support detected."),fb.hasHTML5=!1),Ob&&fb._wD(ib+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(ab?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),fb.useHTML5Audio&&fb.hasHTML5)for(b in fb.audioFormats)fb.audioFormats.hasOwnProperty(b)&&(fb.audioFormats[b].required&&!fb.html5.canPlayType(fb.audioFormats[b].type)||fb.flash[b]||fb.flash[fb.audioFormats[b].type])&&(a=!0);return fb.ignoreFlash&&(a=!1),fb.html5Only=fb.hasHTML5&&fb.useHTML5Audio&&!a,!fb.html5Only},T=function(a){var b,c,d,e=0;if(a instanceof Array){for(b=0,c=a.length;c>b;b++)if(a[b]instanceof Object){if(fb.canPlayMIME(a[b].type)){e=b;break}}else if(fb.canPlayURL(a[b])){e=b;break}a[e].url&&(a[e]=a[e].url),d=a[e]}else d=a;return d},Q=function(b){b._hasTimer||(b._hasTimer=!0,!Nb&&fb.html5PollingInterval&&(null===Db&&0===Cb&&(Db=a.setInterval(S,fb.html5PollingInterval)),Cb++))},R=function(a){a._hasTimer&&(a._hasTimer=!1,!Nb&&fb.html5PollingInterval&&Cb--)},S=function(){var b;if(null!==Db&&!Cb)return a.clearInterval(Db),Db=null,!1;for(b=fb.soundIDs.length-1;b>=0;b--)fb.sounds[fb.soundIDs[b]].isHTML5&&fb.sounds[fb.soundIDs[b]]._hasTimer&&fb.sounds[fb.soundIDs[b]]._onTimer()},B=function(a){a="undefined"!=typeof a?a:{},fb.onerror instanceof Function&&fb.onerror.apply(lb,[{type:"undefined"!=typeof a.type?a.type:null}]),"undefined"!=typeof a.fatal&&a.fatal&&fb.disable()},cb=function(){if(!Ob||!bb())return!1;var a,b,c=fb.audioFormats;for(b in c)if(c.hasOwnProperty(b)&&("mp3"===b||"mp4"===b)&&(fb._wD(hb+": Using flash fallback for "+b+" format"),fb.html5[b]=!1,c[b]&&c[b].related))for(a=c[b].related.length-1;a>=0;a--)fb.html5[c[b].related[a]]=!1},this._setSandboxType=function(a){var b=fb.sandbox;b.type=a,b.description=b.types["undefined"!=typeof b.types[a]?a:"unknown"],fb._wD("Flash security sandbox type: "+b.type),"localWithFile"===b.type?(b.noRemote=!0,b.noLocal=!1,k("secNote",2)):"localWithNetwork"===b.type?(b.noRemote=!1,b.noLocal=!0):"localTrusted"===b.type&&(b.noRemote=!1,b.noLocal=!1)},this._externalInterfaceOK=function(a,b){if(fb.swfLoaded)return!1;var c,d=(new Date).getTime();return fb._wD(ib+"externalInterfaceOK()"+(a?" (~"+(d-a)+" ms)":"")),j("swf",!0),j("flashtojs",!0),fb.swfLoaded=!0,Rb=!1,Ob&&cb(),b&&b.replace(/\+dev/i,"")===fb.versionNumber.replace(/\+dev/i,"")?(Jb?setTimeout(h,100):h(),void 0):(c=hb+': Fatal: JavaScript file build "'+fb.versionNumber+'" does not match Flash SWF build "'+b+'" at '+fb.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(c)
},0),!1)},A=function(a,b){function c(){fb._wD("-- SoundManager 2 "+fb.version+(!fb.html5Only&&fb.useHTML5Audio?fb.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(fb.html5Only?"":(fb.useHighPerformance?", high performance mode, ":", ")+((fb.flashPollingInterval?"custom ("+fb.flashPollingInterval+"ms)":"normal")+" polling")+(fb.wmode?", wmode: "+fb.wmode:"")+(fb.debugFlash?", flash debug mode":"")+(fb.useFlashBlock?", flashBlock mode":""))+" --",1)}function d(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(qb&&rb)return!1;if(fb.html5Only)return s(),c(),fb.oMC=f(fb.movieID),h(),qb=!0,rb=!0,!1;var e,g,i,j,l,m,n,o,p=b||fb.url,q=fb.altURL||p,r="JS/Flash audio component (SoundManager 2)",t=z(),u=J(),v=null,w=nb.getElementsByTagName("html")[0];if(v=w&&w.dir&&w.dir.match(/rtl/i),a="undefined"==typeof a?fb.id:a,s(),fb.url=G(Vb?p:q),b=fb.url,fb.wmode=!fb.wmode&&fb.useHighPerformance?"transparent":fb.wmode,null!==fb.wmode&&(kb.match(/msie 8/i)||!Jb&&!fb.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(k("spcWmode"),fb.wmode=null),e={name:a,id:a,src:b,quality:"high",allowScriptAccess:fb.allowScriptAccess,bgcolor:fb.bgColor,pluginspage:Wb+"www.macromedia.com/go/getflashplayer",title:r,type:"application/x-shockwave-flash",wmode:fb.wmode,hasPriority:"true"},fb.debugFlash&&(e.FlashVars="debug=1"),fb.wmode||delete e.wmode,Jb)g=nb.createElement("div"),j=['<object id="'+a+'" data="'+b+'" type="'+e.type+'" title="'+e.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Wb+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',d("movie",b),d("AllowScriptAccess",fb.allowScriptAccess),d("quality",e.quality),fb.wmode?d("wmode",fb.wmode):"",d("bgcolor",fb.bgColor),d("hasPriority","true"),fb.debugFlash?d("FlashVars",e.FlashVars):"","</object>"].join("");else{g=nb.createElement("embed");for(i in e)e.hasOwnProperty(i)&&g.setAttribute(i,e[i])}if(D(),u=J(),t=z())if(fb.oMC=f(fb.movieID)||nb.createElement("div"),fb.oMC.id)o=fb.oMC.className,fb.oMC.className=(o?o+" ":K.swfDefault)+(u?" "+u:""),fb.oMC.appendChild(g),Jb&&(l=fb.oMC.appendChild(nb.createElement("div")),l.className=K.swfBox,l.innerHTML=j),rb=!0;else{if(fb.oMC.id=fb.movieID,fb.oMC.className=K.swfDefault+" "+u,m=null,l=null,fb.useFlashBlock||(fb.useHighPerformance?m={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(m={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},v&&(m.left=Math.abs(parseInt(m.left,10))+"px"))),Kb&&(fb.oMC.style.zIndex=1e4),!fb.debugFlash)for(n in m)m.hasOwnProperty(n)&&(fb.oMC.style[n]=m[n]);try{Jb||fb.oMC.appendChild(g),t.appendChild(fb.oMC),Jb&&(l=fb.oMC.appendChild(nb.createElement("div")),l.className=K.swfBox,l.innerHTML=j),rb=!0}catch(x){throw new Error(H("domError")+" \n"+x.toString())}}return qb=!0,c(),fb._wD(ib+"createMovie(): Trying to load "+b+(!Vb&&fb.altURL?" (alternate URL)":""),1),!0},v=function(){return fb.html5Only?(A(),!1):gb?!1:(gb=fb.getMovie(fb.id),gb||(yb?(Jb?fb.oMC.innerHTML=zb:fb.oMC.appendChild(yb),yb=null,qb=!0):A(fb.id,fb.url),gb=fb.getMovie(fb.id)),gb&&k("waitEI"),fb.oninitmovie instanceof Function&&setTimeout(fb.oninitmovie,1),!0)},q=function(){setTimeout(r,1e3)},r=function(){if(Ab)return!1;if(Ab=!0,_.remove(lb,"load",q),Rb&&!Qb)return k("waitFocus"),!1;var a;sb||(a=fb.getMoviePercent(),fb._wD(H("waitImpatient",100===a?" (SWF loaded)":a>0?" (SWF "+a+"% loaded)":""))),setTimeout(function(){a=fb.getMoviePercent(),sb||(fb._wD(hb+": No Flash response within expected time.\nLikely causes: "+(0===a?"Loading "+fb.movieURL+" may have failed (and/or Flash "+i+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(fb.debugFlash?" "+H("checkSWF"):""),2),!Vb&&a&&(k("localFail",2),fb.debugFlash||k("tryDebug",2)),0===a&&fb._wD(H("swf404",fb.url)),j("flashtojs",!1," (Check flash security or flash blockers)")),!sb&&Sb&&(null===a?fb.useFlashBlock||0===fb.flashLoadTimeout?(fb.useFlashBlock&&I(),k("waitForever")):F(!0):0===fb.flashLoadTimeout?k("waitForever"):F(!0))},fb.flashLoadTimeout)},t=function(){function a(){_.remove(lb,"focus",t),_.remove(lb,"load",t)}return Qb||!Rb?(a(),!0):(Sb=!0,Qb=!0,fb._wD(ib+"handleFocus()"),Lb&&Rb&&_.remove(lb,"mousemove",t),Ab=!1,a(),!0)},eb=function(){var a,b=[];if(fb.useHTML5Audio&&fb.hasHTML5){for(a in fb.audioFormats)fb.audioFormats.hasOwnProperty(a)&&b.push(a+": "+fb.html5[a]+(!fb.html5[a]&&ab&&fb.flash[a]?" (using flash)":fb.preferFlash&&fb.flash[a]&&ab?" (preferring flash)":fb.html5[a]?"":" ("+(fb.audioFormats[a].required?"required, ":"")+"and no flash support)"));fb._wD("-- SoundManager 2: HTML5 support tests ("+fb.html5Test+"): "+b.join(", ")+" --",1)}},l=function(a){if(sb)return!1;if(fb.html5Only)return fb._wD("-- SoundManager 2: loaded --"),sb=!0,p(),j("onload",!0),!0;var b,c=fb.useFlashBlock&&fb.flashLoadTimeout&&!fb.getMoviePercent(),d=!0;return c||(sb=!0,tb&&(b={type:!ab&&Eb?"NO_FLASH":"INIT_TIMEOUT"})),fb._wD("-- SoundManager 2 "+(tb?"failed to load":"loaded")+" ("+(tb?"security/load error":"OK")+") --",1),tb||a?(fb.useFlashBlock&&fb.oMC&&(fb.oMC.className=J()+" "+(null===fb.getMoviePercent()?K.swfTimedout:K.swfError)),o({type:"ontimeout",error:b}),j("onload",!1),B(b),d=!1):j("onload",!0),fb.waitForWindowLoad&&!ub?(k("waitOnload"),_.add(lb,"load",p)):(fb.waitForWindowLoad&&ub&&k("docLoaded"),p()),d},h=function(){function a(){_.remove(lb,"load",fb.beginDelayedInit)}if(k("init"),sb)return k("didInit"),!1;if(fb.html5Only)return sb||(a(),fb.enabled=!0,l()),!0;v();try{k("flashJS"),gb._externalInterfaceTest(!1),C(!0,fb.flashPollingInterval||(fb.useHighPerformance?10:50)),fb.debugMode||gb._disableDebug(),fb.enabled=!0,j("jstoflash",!0),fb.html5Only||_.add(lb,"unload",g)}catch(b){return fb._wD("js/flash exception: "+b.toString()),j("jstoflash",!1),B({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),F(!0),l(),!1}return l(),a(),!0},w=function(){return y?!1:(y=!0,D(),function(){var a="sm2-usehtml5audio=",b=mb.toLowerCase(),c=null,d="sm2-preferflash=",e=null,f="undefined"!=typeof console&&"undefined"!=typeof console.log;-1!==b.indexOf(a)&&(c="1"===b.charAt(b.indexOf(a)+a.length),f&&console.log((c?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),fb.useHTML5Audio=c),-1!==b.indexOf(d)&&(e="1"===b.charAt(b.indexOf(d)+d.length),f&&console.log((e?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),fb.preferFlash=e)}(),!ab&&fb.hasHTML5&&(fb._wD("SoundManager: No Flash detected"+(fb.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5.")),fb.useHTML5Audio=!0,fb.preferFlash=!1),$(),fb.html5.usingFlash=U(),Eb=fb.html5.usingFlash,eb(),!ab&&Eb&&(fb._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available."),fb.flashLoadTimeout=1),nb.removeEventListener&&nb.removeEventListener("DOMContentLoaded",w,!1),v(),!0)},Z=function(){return"complete"===nb.readyState&&(w(),nb.detachEvent("onreadystatechange",Z)),!0},x=function(){ub=!0,_.remove(lb,"load",x)},bb(),_.add(lb,"focus",t),_.add(lb,"load",t),_.add(lb,"load",q),_.add(lb,"load",x),Lb&&Rb&&_.add(lb,"mousemove",t),nb.addEventListener?nb.addEventListener("DOMContentLoaded",w,!1):nb.attachEvent?nb.attachEvent("onreadystatechange",Z):(j("onload",!1),B({type:"NO_DOM2_EVENTS",fatal:!0})),"complete"===nb.readyState&&setTimeout(w,100)}var c=null;"undefined"!=typeof SM2_DEFER&&SM2_DEFER||(c=new b),a.SoundManager=b,a.soundManager=c}(window),Livepress.sounds=function(){function a(){var a;for(a in e)e.hasOwnProperty(a)&&"function"==typeof e[a].load&&g[a].load()}var b="http://static2.photophlow.com/photophlow/sounds/jerome/",c=!0;soundManager.debugMode=!1,soundManager.useFlashBlock=!0,soundManager.url=Livepress.Config.lp_plugin_url+"/swf/",soundManager.useHTML5Audio=!0,soundManager.flashLoadTimeout=5e3,soundManager.useFlashBlock=!0,soundManager.useHighPerformance=!0;var d,e={commentAdded:"vibes_04-04LR_02-01.mp3",firstComment:"vibes_04-04LR_02-01.mp3",commentReplyToUserReceived:"vibes-short_09-08.mp3",commented:"vibes_04-04LR_02-01.mp3",newPost:"piano_w-pad_01-17M_01.mp3",postUpdated:"piano_w-pad_01-16M_01-01.mp3"},f={play:function(){}},g={};for(d in e)e.hasOwnProperty(d)&&"string"==typeof e[d]&&(g[d]=f);g.on=function(){c=!0},g.off=function(){c=!1};var h=function(a,d){var e=soundManager.createSound({id:a,url:b+d});this.load=function(){e.load()},this.play=function(){c&&e.play()}},i=function(){var a;for(a in e)e.hasOwnProperty(a)&&"string"==typeof e[a]&&(g[a]=new h(a,e[a]))};return soundManager.onload=i,g.load=function(){soundManager.supported()?a():soundManager.onload=function(){i(),a()}},soundManager.onerror=function(){soundManager.flashLoadTimeout=0,setTimeout(soundManager.reboot,20),setTimeout(function(){soundManager.supported()||console.log("Sound manager error!")},1500)},g}(),function(){var a=function(){var a=!1;this.settings_enabled=!1,jQuery("input:text, textarea").on("focusin",function(){a=!0}).on("focusout",function(){a=!1}),this.shouldScroll=function(){return this.settings_enabled&&!a}};Livepress.Scroll=new a}(),Livepress.DOMManipulator=function(a,b){this.custom_background_color=b,this.containerJQueryElement="string"==typeof a?jQuery(a):a,this.containerElement=this.containerJQueryElement[0],this.cleaned_ws=!1},Livepress.DOMManipulator.prototype={debug:!1,log:function(){this.debug&&console.log.apply(console,arguments)},update:function(a,b){b=b||{},this.log("Livepress.DOMManipulator.update begin."),this.clean_updates(),this.apply_changes(a,b);var c=this;setTimeout(function(){c.clean_updates()},1500),this.log("Livepress.DOMManipulator.update end.")},selector:function(a){return this.containerJQueryElement.find(a)},selectors:function(){if(0===arguments.length)throw"The method expects arguments.";var a=jQuery.map(arguments,function(a){return a});return this.containerJQueryElement.find(a.join(","))},clean_whitespaces:function(){if(this.cleaned_ws)return!1;this.cleaned_ws=!0;var a=this.containerElement;return this.clean_children_ws(a),!0},block_elements:function(){return{address:1,blockquote:1,center:1,dir:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,noscript:1,ol:1,p:1,pre:1,table:1,ul:1,div:1,math:1,caption:1,colgroup:1,col:1,dd:1,dt:1,frameset:1,li:1,tbody:1,td:1,thead:1,tfoot:1,th:1,tr:1}},is_block_element:function(a){return"string"==typeof a?this.block_elements().hasOwnProperty(a.toLowerCase()):!1},remove_whitespace:function(a){var b,c=!1,d=a.parentNode;return a===d.firstChild||a===d.lastChild?c=!0:(b=a.previousSibling,null!==b&&1===b.nodeType&&this.is_block_element(b.tagName)&&(c=!0)),c},clean_children_ws:function(a){var b,c;for(b=!1,c=a.firstChild;null!==c;null)if(3===c.nodeType?/^\s*$/.test(c.nodeValue)&&this.remove_whitespace(c)&&(b=!0):this.clean_children_ws(c),b){var d=c;c=c.nextSibling,a.removeChild(d),b=!1}else c=c.nextSibling},clean_updates:function(){this.log("DOMManipulator clean_updates."),jQuery.each(this.selector("span.oortle-diff-text-updated"),function(){var a;a=this.childNodes.length>1?this.childNodes[1]:this.childNodes[0],8!==a.nodeType&&(a=a.childNodes[0]),this.parentNode.replaceChild(a,this)}),this.selector(".oortle-diff-changed").removeClass("oortle-diff-changed"),this.selector(".oortle-diff-inserted").removeClass("oortle-diff-inserted"),this.selector(".oortle-diff-inserted-block").removeClass("oortle-diff-inserted-block"),this.selector(".oortle-diff-removed").remove(),this.selector(".oortle-diff-removed-block").remove()},apply_changes:function(a,b){var c,d=b.effects_display||!1,e=[];for(this.clean_whitespaces(),c=0;c<a.length;c++){this.log("apply changes i=",c," changes.length = ",a.length);var f=a[c];this.log("change[i] = ",f[c]);var g,h,i,j,k,l,m,n;switch(f[0]){case"add_class":try{g=this.get_path_parts(f[1]),h=this.node_at_path(g),this.add_class(h,f[2])}catch(o){this.log("Exception on add_class: ",o)}break;case"set_attr":try{g=this.get_path_parts(f[1]),h=this.node_at_path(g),this.set_attr(h,f[2],f[3])}catch(p){this.log("Exception on set_attr: ",p)}break;case"del_attr":try{g=this.get_path_parts(f[1]),h=this.node_at_path(g),this.del_attr(h,f[2])}catch(q){this.log("Exception on del_attr: ",q)}break;case"set_text":try{this.set_text(f[1],f[2])}catch(r){this.log("Exception on set_text: ",r)}break;case"del_node":try{if(g=this.get_path_parts(f[1]),h=this.node_at_path(g),3===h.nodeType){i=h.parentNode;for(var s=0;s<i.childNodes.length;s++)if(i.childNodes[s]===h){j=i.ownerDocument.createElement("span"),j.appendChild(h),j.className="oortle-diff-removed";break}s<i.childNodes.length?i.insertBefore(j,i.childNodes[s]):i.appendChild(j)}else 8===h.nodeType?h.parentNode.removeChild(h):this.add_class(h,"oortle-diff-removed")}catch(t){this.log("Exception on del_node: ",t)}break;case"push_node":try{if(g=this.get_path_parts(f[1]),h=this.node_at_path(g),null!==h){var u=h.parentNode;this.log("push_node: parentNode = ",u,", node = ",h),e[f[2]]=u.removeChild(h)}}catch(v){this.log("Exception on push_node: ",v)}break;case"pop_node":try{g=this.get_path_parts(f[1]),k=this.get_child_index(g),i=this.node_at_path(this.get_parent_path(g)),k>-1&&null!==i&&(l=e[f[2]],m=i.childNodes.length<=k?null:i.childNodes[k],this.log("pop_node",l,"from register",f[2],"before element",m,"on index ",k," on parent ",i),i.insertBefore(l,m))}catch(w){this.log("Exception on pop_node: ",w)}break;case"ins_node":try{if(g=this.get_path_parts(f[1]),k=this.get_child_index(g),n=this.get_parent_path(g),i=this.node_at_path(n),this.log("ins_node: childIndex = ",k,", parent = ",i),k>-1&&null!==i){l=document.createElement("span");var x=f[2],y=x.match(/(<p>)?<script.*?src="\/\/platform.twitter.com\/widgets.js".*?<\/script>(<\/p>)?/i);x=x.replace(/(<p>)?<script.*?src="\/\/platform.twitter.com\/widgets.js".*?<\/script>(<\/p>)?/i,""),l.innerHTML=x;var z=l.childNodes[0];if(m=i.childNodes.length<=k?null:i.childNodes[k],this.log("the case, childRef = ",m,", content = ",z),i.insertBefore(z,m),null!==y){var A=document.createElement("script");A.src="//platform.twitter.com/widgets.js",i.appendChild(A)}}}catch(B){this.log("Exception on ins_node: ",B)}break;default:throw this.log("Operation not implemented yet."),"Operation not implemented yet."}this.log("i=",c," container: ",this.containerElement.childNodes," -- registers: ",e)}try{this.display(d)}catch(C){this.log("Exception on display: ",C)}try{if(Livepress.Scroll.shouldScroll()){var D=void 0===b.custom_scroll_class?".oortle-diff-inserted-block, .oortle-diff-changed, .oortle-diff-inserted":b.custom_scroll_class;jQuery.scrollTo(D,900,{axis:"y",offset:-30})}}catch(E){this.log("Exception on scroll ",E)}this.log("end apply_changes.")},colorForOperation:function(a){if(0===a.length)return!1;var b={"oortle-diff-inserted":"#55C64D","oortle-diff-changed":"#55C64D","oortle-diff-inserted-block":"#ffff66","oortle-diff-removed-block":"#C63F32","oortle-diff-removed":"#C63F32"},c="#fff";return jQuery.each(b,function(b,d){return a.hasClass(b)?(c=d,!1):void 0}),c},show:function(a){var b=jQuery(a);Livepress.Config.page_active||(b.getBg(),b.data("oldbg",b.css("background-color")),b.addClass("unfocused-lp-update"),b.css("background-color",this.colorForOperation(b))),b.show()},sliderFixed:function(a,b){var c=jQuery,d={slideType:"down",duration:250};b=c.extend({},d,b);var e="down"===b.slideType,f=c(a),g=f.data("originalHeight"),h=f.is(":visible"),i=f.data("originalStyle");return 1===arguments.length&&(e=!h),e===h?!1:(g&&i||(g=f.show().height(),i=f.attr("style"),f.data("originalStyle",i),f.data("originalHeight",g),h||f.hide()),e?f.show().animate({height:g},{duration:b.duration,complete:function(){f.css({height:f.data("originalHeight")}),f.attr("style",f.data("originalStyle")),f.show()}}):f.animate({height:0},{duration:b.duration,complete:function(){f.hide()}}),void 0)},show_with_effects:function(a,b){"string"===this.custom_background_color&&a.css("background-color",this.custom_background_color),a.getBg(),b(a,a.css("background-color"))},display:function(a){if(a){var b=this.selector(".oortle-diff-inserted-block");b.hide().css("height","");var c=this,d=function(a,b){c.sliderFixed(a,"down"),a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800),setTimeout(function(){a.css("background-color","")},1500)};b.each(function(a,b){c.show_with_effects(jQuery(b),d)}),this.show_with_effects(this.selectors(".oortle-diff-inserted",".oortle-diff-changed"),function(a,b){a.slideDown(200);try{a.animate(c.colorForOperation(a),200).animate({backgroundColor:b},800)}catch(d){console.log("Error when animating new comment div.")}setTimeout(function(){a.css("background-color","")},1500)}),this.show_with_effects(this.selectors(".oortle-diff-removed-block",".oortle-diff-removed"),function(a,b){try{a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800).slideUp(200)}catch(d){console.log("Error when removing comment div.")}setTimeout(function(){a.css("background-color","")},1500)})}else this.show(this.selectors(".oortle-diff-changed",".oortle-diff-inserted",".oortle-diff-removed")),this.show(this.selector(".oortle-diff-inserted-block"))},set_text:function(a,b){var c=this.get_path_parts(a),d=this.get_child_index(c),e=this.node_at_path(this.get_parent_path(c));if(d>-1&&null!==e){for(var f=e.childNodes[d],g=jQuery(b),h=0,i=g.length;i>h;h++)e.insertBefore(g[h],f);e.removeChild(f)}},get_path_parts:function(a){for(var b=a.split(":"),c=[],d=0,e=b.length;e>d;d++)c[d]=parseInt(b[d],10);return c},get_child_index:function(a){return a.length>0?parseInt(a[a.length-1],10):-1},get_parent_path:function(a){var b=a.slice();return b.splice(-1,1),b},node_at_path:function(a){return this.get_node_by_path(this.containerElement,a)},get_node_by_path:function(a,b){var c=b.slice();if(c.splice(0,1),0===c.length)return a;for(var d=0,e=a,f=null,g=c.length;g>d&&(e=e.childNodes[c[d]],"undefined"!=typeof e);d++);return d===c.length&&(f=e),f},add_class:function(a,b){null!==a&&(a.className+=" "+b)},set_attr:function(a,b,c){null!==a&&a.setAttribute(b,c)},del_attr:function(a,b){null!==a&&a.removeAttribute(b)}},Livepress.DOMManipulator.clean_updates=function(a){var b=new Livepress.DOMManipulator(a);b.clean_updates()},function(){if(!window.google||!google.gears){var a=null;if("undefined"!=typeof GearsFactory)a=new GearsFactory;else try{a=new ActiveXObject("Gears.Factory"),-1!=a.getBuildInfo().indexOf("ie_mobile")&&a.privateSetGlobalObject(this)}catch(b){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(a=document.createElement("object"),a.style.display="none",a.width=0,a.height=0,a.type="application/x-googlegears",document.documentElement.appendChild(a))}a&&(window.google||(google={}),google.gears||(google.gears={factory:a}))}}(),Persist=function(){var a,b,c,d,e,f,g="0.3.0";f=function(){var a,b="Thu, 01-Jan-1970 00:00:01 GMT",c=864e5,d=["expires","path","domain"],e=escape,f=unescape,g=document,h=function(){var a=new Date;return a.setTime(a.getTime()),a},i=function(a,b){var c,f,g=[],h=arguments.length>2?arguments[2]:{};g.push(e(a)+"="+e(b));for(var i=0;i<d.length;i++)c=d[i],f=h[c],f&&g.push(c+"="+f);return h.secure&&g.push("secure"),g.join("; ")},j=function(){var a="__EC_TEST__",b=new Date;return b=b.toGMTString(),this.set(a,b),this.enabled=this.remove(a)==b,this.enabled};return a={set:function(a,b){var d=arguments.length>2?arguments[2]:{},e=h(),f={};if(d.expires){var j=d.expires*c;f.expires=new Date(e.getTime()+j),f.expires=f.expires.toGMTString()}for(var k=["path","domain","secure"],l=0;l<k.length;l++)d[k[l]]&&(f[k[l]]=d[k[l]]);var m=i(a,b,f);return g.cookie=m,b},has:function(a){a=e(a);var b=g.cookie,c=b.indexOf(a+"="),d=(c+a.length+1,b.substring(0,a.length));return!c&&a!=d||0>c?!1:!0},get:function(a){a=e(a);var b,c=g.cookie,d=c.indexOf(a+"="),h=d+a.length+1,i=c.substring(0,a.length);return!d&&a!=i||0>d?null:(b=c.indexOf(";",h),0>b&&(b=c.length),f(c.substring(h,b)))},remove:function(c){var d=a.get(c),e={expires:b};return g.cookie=i(c,"",e),d},keys:function(){for(var a,b=g.cookie,c=b.split("; "),d=[],e=0;e<c.length;e++)a=c[e].split("="),d.push(f(a[0]));return d},all:function(){for(var a,b=g.cookie,c=b.split("; "),d=[],e=0;e<c.length;e++)a=c[e].split("="),d.push([f(a[0]),f(a[1])]);return d},version:"0.2.1",enabled:!1},a.enabled=j.call(a),a}();var h=function(){return Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return c;return-1}}();e=function(){},c=function(a){return"PS"+a.replace(/_/g,"__").replace(/ /g,"_s")};var j={search_order:["localstorage","globalstorage","gears","cookie","ie","flash"],name_re:/^[a-z][a-z0-9_ \-]+$/i,methods:["init","get","set","remove","load","save","iterate"],sql:{version:"1",create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?",keys:"SELECT * FROM persist_data"},flash:{div_id:"_persist_flash_wrap",id:"_persist_flash",path:"persist.swf",size:{w:1,h:1},args:{autostart:!0}}};return b={gears:{size:-1,test:function(){return window.google&&window.google.gears?!0:!1},methods:{init:function(){var a;a=this.db=google.gears.factory.create("beta.database"),a.open(c(this.name)),a.execute(j.sql.create).close()},get:function(a){var b,c,d=j.sql.get,e=this.db;return e.execute("BEGIN").close(),b=e.execute(d,[a]),c=b.isValidRow()?b.field(0):null,b.close(),e.execute("COMMIT").close(),c},set:function(a,b){var c=j.sql.remove,d=j.sql.set,e=this.db;return e.execute("BEGIN").close(),e.execute(c,[a]).close(),e.execute(d,[a,b]).close(),e.execute("COMMIT").close(),b},remove:function(a){j.sql.get,sql=j.sql.remove,val=null,is_valid=!1;var b=this.db;return b.execute("BEGIN").close(),b.execute(sql,[a]).close(),b.execute("COMMIT").close(),!0},iterate:function(a,b){var c,d=j.sql.keys,e=this.db;for(c=e.execute(d);c.isValidRow();)a.call(b||this,c.field(0),c.field(1)),c.next();c.close()}}},globalstorage:{size:5242880,test:function(){if(!window.globalStorage)return!1;var a="127.0.0.1";this.o&&this.o.domain&&(a=this.o.domain);try{return globalStorage[a],!0}catch(b){return window.console&&window.console.warn&&console.warn("globalStorage exists, but couldn't use it because your browser is running on domain:",a),!1}},methods:{key:function(a){return c(this.name)+c(a)},init:function(){this.store=globalStorage[this.o.domain]},get:function(a){return a=this.key(a),this.store.getItem(a)},set:function(a,b){return a=this.key(a),this.store.setItem(a,b),b},remove:function(a){var b;return a=this.key(a),b=this.store.getItem[a],this.store.removeItem(a),b}}},localstorage:{size:-1,test:function(){return window.localStorage?!0:!1},methods:{key:function(a){return this.name+">"+a},init:function(){this.store=localStorage},get:function(a){return a=this.key(a),this.store.getItem(a)},set:function(a,b){return a=this.key(a),this.store.setItem(a,b),b},remove:function(a){var b;return a=this.key(a),b=this.store.getItem(a),this.store.removeItem(a),b},iterate:function(a,b){var c=this.store;for(i=0;i<c.length;i++)keys=c[i].split(">"),2==keys.length&&keys[0]==this.name&&a.call(b||this,keys[1],c[c[i]])}}},ie:{prefix:"_persist_data-",size:65536,test:function(){return window.ActiveXObject?!0:!1},make_userdata:function(a){var b=document.createElement("div");return b.id=a,b.style.display="none",b.addBehavior("#default#userdata"),document.body.appendChild(b),b},methods:{init:function(){var a=b.ie.prefix+c(this.name);this.el=b.ie.make_userdata(a),this.o.defer&&this.load()},get:function(a){var b;return a=c(a),this.o.defer||this.load(),b=this.el.getAttribute(a)},set:function(a,b){return a=c(a),this.el.setAttribute(a,b),this.o.defer||this.save(),b},remove:function(a){var b;return a=c(a),this.o.defer||this.load(),b=this.el.getAttribute(a),this.el.removeAttribute(a),this.o.defer||this.save(),b},load:function(){this.el.load(c(this.name))},save:function(){this.el.save(c(this.name))}}},cookie:{delim:":",size:4e3,test:function(){return a.Cookie.enabled?!0:!1},methods:{key:function(a){return this.name+b.cookie.delim+a},get:function(a){var b;return a=this.key(a),b=f.get(a)},set:function(a,b){return a=this.key(a),f.set(a,b,this.o),b},remove:function(a,b){var b;return a=this.key(a),b=f.remove(a)}}},flash:{test:function(){if(!deconcept||!deconcept.SWFObjectUtil)return!1;var a=deconcept.SWFObjectUtil.getPlayerVersion().major;return a>=8?!0:!1},methods:{init:function(){if(!b.flash.el){var a,c,d,e=j.flash;d=document.createElement("div"),d.id=e.div_id,document.body.appendChild(d),a=new deconcept.SWFObject(this.o.swf_path||e.path,e.id,e.size.w,e.size.h,"8");for(c in e.args)"function"!=e.args[c]&&a.addVariable(c,e.args[c]);a.write(d),b.flash.el=document.getElementById(e.id)}this.el=b.flash.el},get:function(a){var b;return a=c(a),b=this.el.get(this.name,a)},set:function(a,b){var d;return a=c(a),d=this.el.set(this.name,a,b)},remove:function(a){var b;return a=c(a),b=this.el.remove(this.name,a)}}}},d=function(){for(var c,d,f=j.methods,g=j.search_order,h=0,i=f.length;i>h;h++)a.Store.prototype[f[h]]=e;a.type=null,a.size=-1;for(var k=0,l=g.length;!a.type&&l>k;k++)if(c=b[g[k]],c.test()){a.type=g[k],a.size=c.size;for(d in c.methods)a.Store.prototype[d]=c.methods[d]}a._init=!0},a={VERSION:g,type:null,size:0,add:function(a){b[a.id]=a,j.search_order=[a.id].concat(j.search_order),d()},remove:function(a){var c=h(j.search_order,a);0>c||(j.search_order.splice(c,1),delete b[a],d())},Cookie:f,Store:function(b,c){if(!j.name_re.exec(b))throw new Error("Invalid name");if(!a.type)throw new Error("No suitable storage found");c=c||{},this.name=b,c.domain=c.domain||location.hostname||"localhost",c.domain=c.domain.replace(/:\d+$/,""),c.domain="localhost"==c.domain?"":c.domain,this.o=c,c.expires=c.expires||730,c.path=c.path||"/",this.init()}},d(),a}(),Livepress.storage=function(){var a=new Persist.Store("Livepress",{defer:!1,swf_path:Livepress.Config.lp_plugin_url+"/swf/persist.swf"});return{get:function(b,c){var d=a.get(b);return null===d||void 0===d?c:d},set:function(b,c){return a.set(b,c)}}}(),Livepress.Ui.Controller=function(a,b){function c(){void 0!==t&&t.connected(),D.load()}function d(a){console.log("Comet error: ",a)}function e(a){return"object"==typeof b&&"function"==typeof b[a]?b[a].apply(this,Array.prototype.slice.call(arguments,1)):void 0}function f(){setTimeout(function(){C.is_connected()?t.connected():t.disconnected()},1500)}function g(b,c,d){if(a.comment_msg_id!==d){e("before_live_comment",b);var g=e("should_attach_comment",a);if(g=void 0===g?!0:g){var h=e("on_comment_update",b,r);void 0===h&&r.update(b.diff)}if(f(),e("post_comment_update"),0===w?D.firstComment.play():D.commentAdded.play(),w+=1,b.comment_id){var i=e("get_comment_container",b.comment_id);if(void 0===i)for(var j=0;j<b.diff.length;j+=1)if("ins_node"===b.diff[j][0]&&b.diff[j][2].indexOf(b.content)>=0){i=jQuery(b.diff[j][2]).attr("id");break}var k;k=0===jQuery(b.avatar_url).length?b.avatar_url:jQuery(b.avatar_url).attr("src");var l={title:b.author,text:b.content,commentContainerId:i,image:k};g||(l.scrollToText="Refresh page",l.scrollToCallback=function(){location.reload()}),t.comment_alert(l,b.comment_gmt)}t.set_comment_num(w)}}function h(){var b=jQuery(document.querySelectorAll("#post_content_livepress .livepress-update")).not(".oortle-diff-removed");t.set_live_updates_num(b.length);var c=window.location.href.replace(window.location.hash,"");b.filter(window.location.hash).each(function(){return new Livepress.Ui.UpdateView(jQuery(this),c,10,a.disable_comments)}),z&&b.addClass("lp-hl-on-hover"),b.each(function(){var b=jQuery(this);b.is(".lp-live")||(b.on("mouseenter",function(){return new Livepress.Ui.UpdateView(b,c,window.location,a.disable_comments)}),b.addClass("lp-live"))})}function i(a){if(!window.is_active){var b=!1;if(jQuery.each(a,function(a,c){b="del_node"===c[0]}),!b){var c=jQuery("title"),d=c.data("updates");d+=1,c.data("updates",d),c.text("("+d+") "+c.data("text"))}}}function j(b){if(f(),2===b.length){var c,d=b[0],e=b[1];c="string"==typeof a.custom_title_css_selector?a.custom_title_css_selector:"#post-"+a.post_id;var g=jQuery(c),h=g.html().replaceAll(d,e);g.html(h);var i=document.title.replace(d,e);document.title=i}else console.log("error -- received data about post = "+b)}function k(){clearTimeout(E);var a=v.find(".lp-updated-counter"),b=a.data("min");if(b+=1,0===b)a.html("updated just now");else if(1===b)a.html("updated 1 minute ago");else{if(!(60>=b))return a.html("no recent updates"),void 0;a.html("updated "+b+" minutes ago")}a.data("min",b),E=setTimeout(k,6e4)}function l(a){if(console.log("post_update with data = ",a),"event"in a&&"post_title"===a.event)return j(a.data);var b=a.pop();if(i(a),B){if(A.push(a),"undefined"!=typeof s)for(var c=b.updated_at,d=0;d<b.post_updates.length;d+=1)s.post_update(b.post_updates[d],c)}else q.update(a,{effects_display:window.is_active}),h();f(),D.postUpdated.play(),v.find(".lp-updated-counter").data("min",-1),v.find(".lp-bar .lp-status").removeClass("lp-off").addClass("lp-on"),k()}function m(b,c,d){a.new_post_msg_id!==d&&(s.new_post(b.title,b.link,b.author,b.updated_at_gmt),D.postUpdated.play())}function n(a){f(),t.post_alert(a.title,a.link,a.author,a.updated_at_gmt),D.postUpdated.play()}function o(b,c){if(!F&&0!==b.length&&"username"!==b){F=!0,t.imFeedbackSpin(!0);var d={action:"new_im_follower",user_name:b,im_type:c,post_id:a.post_id};jQuery.post(a.ajax_url,d,function(a){t.handleImFeedback(a,b),F=!1})}}function p(){var a=function(){var a=jQuery(".unfocused-lp-update"),b=a.data("oldbg")||"#FFF";a.animate({backgroundColor:b},4e3,"swing",function(){jQuery(this).removeClass("unfocused-lp-update").css("background-color","")})},b=jQuery("title");b.data("text",b.text()),b.data("updates",0),u.focus(function(){this.is_active=!0,b.text(b.data("text")),b.data("updates",0),a()}),u.blur(function(){this.is_active=!1})}var q,r,s,t,u=jQuery(window),v=jQuery(document.getElementById("livepress")),w=a.comment_count,x=a.page_type,y="home"===x,z="single"===x,A=[],B=!1,C=OORTLE.instance,D=Livepress.sounds,E=null;E=setTimeout(k,6e4);var F=!1;if(window.is_active=!0,u.ready(p),null!==document.getElementById("lp-update-box")&&(s=new Livepress.Ui.UpdateBoxView(y)),null!==document.getElementById("livepress")){t=new Livepress.Ui.View(a.disable_comments),t.set_comment_num(w),h();var G=encodeURIComponent(a.feed_sub_link),H=encodeURIComponent(a.feed_title);t.add_link_to_greader("http://www.google.com/ig/addtoreader?et=gEs490VY&source=ign_pLt&feedurl="+G+"&feedtitle="+H)}if(void 0!==s||void 0!==t){var I="#livepress-connection";jQuery(document.body).append('<div id="'+I+'"><!-- --></div>');var J="|livepress|"+a.site_url+"|post-new-update";if(C.attachEvent("connected",c),C.attachEvent("error",d),void 0!==s&&y){var K=a.new_post_msg_id?{last_id:a.new_post_msg_id}:{fetch_all:!0};C.subscribe(J,m,K),C.connect()}if(void 0!==t){C.attachEvent("reconnected",t.connected),C.attachEvent("disconnected",t.disconnected);var L="|livepress|"+a.site_url+"|post-"+a.post_id,M="|livepress|"+a.site_url+"|post-"+a.post_id+"_comment";a.can_edit_comments&&(M+="-logged"),q=new Livepress.DOMManipulator("#post_content_livepress",a.custom_background_color),r=new Livepress.DOMManipulator("#post_comments_livepress",a.custom_background_color);var N=a.new_post_msg_id?{last_id:a.new_post_msg_id}:{fetch_all:!0};C.subscribe(J,n,N),!a.disable_comments&&a.comment_live_updates_default&&(N=a.comment_msg_id?{last_id:a.comment_msg_id}:{fetch_all:!0},C.subscribe(M,function(){},N)),N=a.post_update_msg_id?{last_id:a.post_update_msg_id}:{fetch_all:!0},C.subscribe(L,l,N),t.subscribeIm(o),t.sound_control(Livepress.storage.get("settings-sound",void 0===a.sounds_default||a.sounds_default),function(){D.on(),Livepress.storage.set("settings-sound","1")},function(){D.off(),Livepress.storage.set("settings-sound","")}),t.live_control(Livepress.storage.get("settings-live",!0),function(){C.connect(),Livepress.storage.set("settings-live","1")},function(){C.disconnect(),Livepress.storage.set("settings-live","")
}),a.disable_comments||t.follow_comments_control(Livepress.storage.get("settings-comments",!0),function(){C.subscribe(M,g),Livepress.storage.set("settings-comments","1")},function(){C.unsubscribe(M,g),Livepress.storage.set("settings-comments","")}),t.scroll_control(Livepress.storage.get("settings-scroll",!0),function(){Livepress.Scroll.settings_enabled=!0,Livepress.storage.set("settings-scroll","1")},function(){Livepress.Scroll.settings_enabled=!1,Livepress.storage.set("settings-scroll","")})}}},jQuery(function(){Livepress.Comment=function(){var a=!1,b=function(a){var b=jQuery("#oortle-comment-status");0===b.length&&(jQuery("#submit").after("<span id='oortle-comment-status'></span>"),b=jQuery("#oortle-comment-status")),b.text(a)},c=function(a){var b=jQuery("#comment");b.attr("disabled",!1),a&&(b.val(""),jQuery("#cancel-comment-reply-link").click())},d=function(){try{if(a)return!1;a=!0;var d=jQuery("#submit"),e=d.attr("value");d.attr("value","Sending..."),d.attr("disabled",!0),jQuery("textarea#comment").attr("disabled",!0),b("");var f={};f.oortle_send_comment=!0;var g=document.getElementById("commentform")||document.getElementById("comment-form");f.comment_post_ID=g.comment_post_ID.value,"undefined"!=typeof g.comment_parent&&(f.comment_parent=g.comment_parent.value),f.comment=g.comment.value,f.author=g.elements[0].value,f.email=g.elements[1].value,f.url=g.elements[2].value,f._wp_unfiltered_html_comment=void 0!==g._wp_unfiltered_html_comment?g._wp_unfiltered_html_comment.value:"",f.redirect_to="",f.livepress_update="true",f.action="post_comment",f._ajax_nonce=Livepress.Config.ajax_nonce,Livepress.sounds.commented.play(),jQuery.ajax({url:Livepress.Config.site_url+"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:f,error:function(a,d){console.log("comment response: "+a.status+" :: "+a.statusText),console.log("comment ajax failed: %s",d),b("Unknown error."),c(!1)},success:function(a){b("Comment Status: "+a.msg),c("200"===a.code)},complete:function(){d=jQuery("#submit"),a=!1,d.attr("value",e),d.attr("disabled",!1)}})}catch(h){console.log("EXCEPTION: %s",h),b("Sending error.")}return!1},e=function(){jQuery("#submit").click(d)},f=function(a){var b=jQuery("#comment");a.ajax_nonce===Livepress.Config.ajax_nonce&&b.val()===a.content&&c(!0)},g=function(a){var b=a.comment_page_number;return"asc"===a.comment_order?0===b||b===a.comment_pages_count:1>=b},h=function(a){return jQuery("#comment-"+a).parent().attr("id")},i=function(a,b){var c={custom_scroll_class:"#comment-"+a.comment_id};if("0"===a.comment_parent)b.update(a.diff,c);else{b.update(a.comments_counter_only_diff,c);var d=jQuery(a.comment_html);d.addClass("oortle-diff-inserted-block").hide();var e=jQuery("#comment-"+a.comment_parent),f=e.children(".children");0===f.length&&(f=jQuery("<ul>").addClass("children").appendTo(e)),f.append(d),b.display(!0)}return!0};return Livepress.Config.disable_comments||e(),{send:d,attach:e,before_live_comment:f,should_attach_comment:g,get_comment_container:h,on_comment_update:i}}()}),void 0!==jQuery&&(jQuery.ajax=function(a){return function(){return void 0!==OORTLE&&void 0!==OORTLE.instance&&OORTLE.instance&&OORTLE.instance.flush(),a.apply(this,arguments)}}(jQuery.ajax)),Livepress.Ready=function(){var a={post_comment_update:Livepress.Comment.attach,before_live_comment:Livepress.Comment.before_live_comment,should_attach_comment:Livepress.Comment.should_attach_comment,get_comment_container:Livepress.Comment.get_comment_container,on_comment_update:Livepress.Comment.on_comment_update};return new Livepress.Ui.Controller(Livepress.Config,a)},jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?j.transparent:j[a.trim(b).toLowerCase()]}function d(b,d){var e;do{if(e=(a.curCSS||a.css)(b,d),""!=e&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function e(){var a,b,c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,d={};if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;)a=c[e],"string"==typeof c[a]&&(b=a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),d[b]=c[a]);else for(a in c)"string"==typeof c[a]&&(d[a]=c[a]);return d}function f(b){var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c,d={_:0};for(c in b)a[c]!=b[c]&&(d[c]=b[c]);return d}function h(b,c,d,e){return"object"==typeof b&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function i(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects[b]?!1:!0}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.queue(function(){var i,j=a(this),l=j.attr("style")||" ",m=f(e.call(this)),n=j.attr("class")||"";a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),i=f(e.call(this)),j.attr("class",n),j.animate(g(m,i),{queue:!1,duration:c,easing:d,complete:function(){a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),"object"==typeof j.attr("style")?(j.attr("style").cssText="",j.attr("style").cssText=l):j.attr("style",l),h&&h.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.24",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b){var c=h.apply(this,arguments),d={options:c[1],duration:c[2],callback:c[3]},e=d.options.mode,f=a.effects[b];return a.fx.off||!f?e?this[e](d.duration,d.callback):this.each(function(){d.callback&&d.callback.call(this)}):f.call(this,d)},_show:a.fn.show,show:function(a){if(i(a))return this._show.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(i(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(i(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:c(-2*a+2)/-2+1}}),a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width",i="vertical"==f?g.height():g.width();"show"==e&&g.css(h,0);var j={};j[h]="show"==e?i:0,g.animate(j,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery);