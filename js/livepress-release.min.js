/*! livepress -v1.3.4.2
 * http://livepress.com/
 * Copyright (c) 2015 LivePress, Inc.
 */
var Livepress=Livepress||{};Livepress.ensureExists=function(a){return void 0===a&&(a={}),a};var console=console||{log:function(){}};Livepress.getUpdatePermalink=function(a){var b,c=/livepress-update-([0-9]+)/,d=c.exec(a)[1],e="",f=jQuery(location).attr("protocol")+"//"+jQuery(location).attr("host")+jQuery(location).attr("pathname"),g=jQuery(location).attr("search");return f+=null!==(b=g.match(/\?p=[0-9]+/))?b+"&":"?",e+="lpup=",f+e+d+"#"+a},Livepress.updateShortlinksCache=window.LivepressConfig.shortlink||{},Livepress.getUpdateShortlink=function(a){var b=/livepress-update-([0-9]+)/,c=b.exec(a)[1];return c in Livepress.updateShortlinksCache?Livepress.updateShortlinksCache[c]:jQuery.ajax({url:window.LivepressConfig.ajax_url,xhrFields:{withCredentials:!0},type:"post",async:!1,dataType:"json",data:{action:"lp_update_shortlink",post_id:window.LivepressConfig.post_id,_ajax_nonce:LivepressConfig.lp_update_shortlink_nonce,update_id:c}}).promise()},String.prototype.parseGMT=function(a){var b,c,d=this,e=a||"h:i:s a";return b=Date.parse(d.replace(/-/gi,"/"),"Y/m/d H:i:s"),c=new Date(b),"Invalid Date"===c.toString()?this.toString():c=c.format(e)},String.prototype.replaceAll=function(a,b){var c=this;return c=c.split(a).join(b)},"undefined"==typeof window.twttr&&(window.twttr=function(a,b,c){var d,e,f=a.getElementsByTagName(b)[0];if(!a.getElementById(c))return e=a.createElement(b),e.id=c,e.src="https://platform.twitter.com/widgets.js",f.parentNode.insertBefore(e,f),window.twttr||(d={_e:[],ready:function(a){d._e.push(a)}})}(document,"script","twitter-wjs")),window.location.hash&&twttr.ready(function(a){a.events.bind("loaded",function(a){jQuery.scrollTo(jQuery(window.location.hash))})}),jQuery.fn.getBg=function(){var a,b,c,d=jQuery(this);return a=d.css("background-color"),"transparent"!==a&&"rgba(0, 0, 0, 0)"!==a&&void 0!==a?a:(b=this.parents().filter(function(){return c=d.css("background-color"),"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c}).eq(0).css("background-color"),void(b?d.css("background-color",b):d.css("background-color","#ffffff")))},jQuery.extend({getUrlVars:function(a){for(var b,c=[],d=a.href||window.location.href,e=d.slice(d.indexOf("?")+1).split("&"),f=0;f<e.length;f++)b=e[f].split("="),c.push(b[0]),c[b[0]]=b[1];return c},getUrlVar:function(a,b){return jQuery.getUrlVars(b||!1)[a]}}),jQuery.fn.outerHTML=function(a){return a?this.before(a).remove():jQuery("<div>").append(this.eq(0).clone()).html()},jQuery.fn.autolink=function(){return this.each(function(){var a=new RegExp('((http|https|ftp)://[\\w?=&./-;#~%-]+(?![\\w\\s?&./;#~%"=-]*>))',"g");jQuery(this).html(jQuery(this).html().replace(a,'<a href="$1">$1</a> '))})},"undefined"==typeof document.activeElement&&jQuery(document).focusin(function(a){document.activeElement=a.target}).focusout(function(){document.activeElement=null}),jQuery.extend(jQuery.expr[":"],{focus:function(a){return a===document.activeElement}}),Date.prototype.format=function(a){var b,c,d="",e=Date.replaceChars;for(b=0;b<a.length;b++)c=a.charAt(b),d+=e[c]?e[c].call(this):c;return d},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10===1&&11!==this.getDate()?"st":this.getDate()%10===2&&12!==this.getDate()?"nd":this.getDate()%10===3&&13!==this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){return"Not Yet Supported"},W:function(){return"Not Yet Supported"},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return"Not Yet Supported"},L:function(){return this.getFullYear()%4===0&&this.getFullYear()%100!==0||this.getFullYear()%400===0?"1":"0"},o:function(){return"Not Supported"},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return"Not Yet Supported"},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},e:function(){return"Not Yet Supported"},I:function(){return"Not Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":"+(Math.abs(this.getTimezoneOffset()%60)<10?"0":"")+Math.abs(this.getTimezoneOffset()%60)},T:function(){var a,b;return b=this.getMonth(),this.setMonth(0),a=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1"),this.setMonth(b),a},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d")+"T"+this.format("H:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},function(a){var b=function(a){return"object"==typeof a?a:{top:a,left:a}},c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1},c.window=function(b){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!==a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||"BackCompat"===d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"===d&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.speed||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){var g,h=this,i=a(h),j=d,k={},l=i.is("html,body"),m=function(a){i.animate(k,e,f.easing,a&&function(){a.call(this,d,f)})};"number"!=typeof j&&"string"!=typeof j||!/^([\-+]=)?\d+(\.\d+)?(px|%)?$/.test(j)?(("number"==typeof j||"string"==typeof j)&&(j=a(j,this)),(j.is||j.style)&&(g=(j=a(j)).offset())):j=b(j),a.each(f.axis.split(""),function(a,b){var d="x"===b?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=h[n],p=c.max(h,b);if(g)k[n]=g[e]+(l?0:o-i.offset()[e]),f.margin&&(k[n]-=parseInt(j.css("margin"+d),10)||0,k[n]-=parseInt(j.css("border"+d+"Width"),10)||0),k[n]+=f.offset[e]||0,f.over[e]&&(k[n]+=j["x"===b?"width":"height"]()*f.over[e]);else{var q=j[e];k[n]=q.slice&&"%"===q.slice(-1)?parseFloat(q)/100*p:q}/^\d+$/.test(k[n])&&(k[n]=k[n]<=0?0:Math.min(k[n],p)),!a&&f.queue&&(o!==k[n]&&m(f.onAfterFirst),delete k[n])}),m(f.onAfter)}).end()},c.max=function(b,c){var d="x"===c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(jQuery),function(jQuery){var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]},b=function(b){var c;return b&&b.constructor===Array&&3===b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:a[jQuery.trim(b).toLowerCase()]},c=function(a,c){var d;do{if(d=jQuery.curCSS(a,c),""!==d&&"transparent"!==d||jQuery.nodeName(a,"body"))break;c="backgroundColor"}while(a=a.parentNode);return b(d)};jQuery.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(a,d){jQuery.fx.step[d]=function(a){void 0===a.start&&(a.start=c(a.elem,d),a.end=b(a.end)),a.elem.style[d]="rgb("+[Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)].join(",")+")"}})}(jQuery),function(a){a.gritter={},a.gritter.options={fade_in_speed:"fast",fade_out_speed:500,time:1e3};var b={fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_control:'<div class = "gritter-control"><div class ="gritter-scroll">Scroll to Comment</div><div class ="gritter-settings"></div><div class="gritter-close"></div></div>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper gritter-item [[item_class]] [[class_name]] [[comment_container_id]]" style="display:none"><div class="gritter-top"></div><div class="gritter-inner"><div class = "gritter-control"><div class ="gritter-scroll">Scroll to Comment</div><div class ="gritter-settings"></div><div class="gritter-close"></div></div>[[image]]<span class="gritter-title">[[username]]</span><div class="lp-date">[[date]]</div><p>[[text]]</p>[[comments]]<div class="bubble-point"></div></div><div class="gritter-bot"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(c){c.title||(c.title=""),c.text||(c.text=""),this._is_setup||this._runSetup();var d=c.title,e=c.commentContainerId,f=c.text,g=c.date,h=c.image,i=c.comments||"",j=c.sticky||!1,k=c.class_name||"",l=c.time||"";this._verifyWrapper(),this._item_count+=1;var m=this._item_count,n=this._tpl_item;a(["before_open","after_open","before_close","after_close"]).each(function(d,e){b["_"+e+"_"+m]=a.isFunction(c[e])?c[e]:function(){}}),this._custom_timer=0,l&&(this._custom_timer=l),void 0===h&&(h="");var o=h?'<img src="'+h+'" class="gritter-image" />':"",p=h?"gritter-with-image":"gritter-without-image";n=this._str_replace(["[[username]]","[[text]]","[[date]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]","[[comments]]","[[comment_container_id]]"],[d,f,g,o,this._item_count,p,k,i,e],n),this["_before_open_"+m](),a("#gritter-notice-wrapper").prepend(n);var q=a("#gritter-item-"+this._item_count),r=a(q.find(".gritter-scroll"));return jQuery.isFunction(c.scrollToCallback)?(r.bind("click",c.scrollToCallback),c.scrollToText&&r.text(c.scrollToText)):r.bind("click",function(a){var b=jQuery(jQuery(a.target).parents(".gritter-item-wrapper")[0]),c=b.attr("class").split(/\s+/);jQuery.each(c,function(a,b){var c=b.match(/comment\-/);return null!==c?void jQuery.scrollTo(jQuery("#"+b),900):void 0})}),q.fadeIn(this.fade_in_speed,function(){b["_after_open_"+m](a(this))}),j||this._setFadeTimer(q,m),a(q).bind("mouseenter mouseleave",function(c){"mouseenter"===c.type?j||b._restoreItemIfFading(a(this),m):j||b._setFadeTimer(a(this),m),b._hoverState(a(this),c.type)}),m},_countRemoveWrapper:function(b,c){c.remove(),this["_after_close_"+b](c),0===a(".gritter-item-wrapper").length&&a("#gritter-notice-wrapper").remove()},_fade:function(a,c,d,e){d=d||{};var f="undefined"!=typeof d.fade?d.fade:!0,g=d.speed||this.fade_out_speed;this["_before_close_"+c](a),e&&a.unbind("mouseenter mouseleave"),f?a.animate({opacity:0},g,function(){a.animate({height:0},300,function(){b._countRemoveWrapper(c,a)})}):this._countRemoveWrapper(c,a)},_hoverState:function(a,c){if("mouseenter"===c){a.addClass("hover");var d=a.find(".gritter-control");d.show(),a.find(".gritter-close").click(function(){var c=a.attr("id").split("-")[2];b.removeSpecific(c,{},a,!0)})}else a.removeClass("hover"),a.find(".gritter-control").hide()},removeSpecific:function(b,c,d,e){d||(d=a("#gritter-item-"+b)),this._fade(d,b,c||{},e)},_restoreItemIfFading:function(a,b){clearTimeout(this["_int_id_"+b]),a.stop().css({opacity:""})},_runSetup:function(){var b;for(b in a.gritter.options)a.gritter.options.hasOwnProperty(b)&&(this[b]=a.gritter.options[b]);this._is_setup=1},_setFadeTimer:function(a,c){var d=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+c]=setTimeout(function(){b._fade(a,c)},d)},stop:function(b){var c=a.isFunction(b.before_close)?b.before_close:function(){},d=a.isFunction(b.after_close)?b.after_close:function(){},e=a("#gritter-notice-wrapper");c(e),e.fadeOut(function(){a(this).remove(),d()})},_str_replace:function(a,b,c,d){var e=0,f=0,g="",h="",i=0,j=0,k=[].concat(a),l=[].concat(b),m=c,n=l instanceof Array,o=m instanceof Array;for(m=[].concat(m),d&&(this.window[d]=0),e=0,i=m.length;i>e;e++)if(""!==m[e])for(f=0,j=k.length;j>f;f++)g=m[e]+"",h=n?void 0!==l[f]?l[f]:"":l[0],m[e]=g.split(k[f]).join(h),d&&m[e]!==g&&(this.window[d]+=(g.length-m[e].length)/k[f].length);return o?m:m[0]},_verifyWrapper:function(){0===a("#gritter-notice-wrapper").length&&a("body").append(this._tpl_wrap)}};a.gritter.add=function(a){try{return b.add(a||{})}catch(c){var d="Gritter Error: "+c;"undefined"!=typeof console&&console.error?console.error(d,a):alert(d)}},a.gritter.remove=function(a,c){b.removeSpecific(a,c||{})},a.gritter.removeAll=function(a){b.stop(a||{})}}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(){if(!a.contains(document.documentElement,this))return a(this).timeago("dispose"),this;var b=c(this),g=f.settings;return isNaN(b.datetime)||(0==g.cutoff||Math.abs(e(b.datetime))<g.cutoff)&&a(this).text(d(b.datetime)),this}function c(b){if(b=a(b),!b.data("timeago")){b.data("timeago",{datetime:f.datetime(b)});var c=a.trim(b.text());f.settings.localeTitle?b.attr("title",b.data("timeago").datetime.toLocaleString()):!(c.length>0)||f.isTime(b)&&b.attr("title")||b.attr("title",c)}return b.data("timeago")}function d(a){return f.inWords(e(a))}function e(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return d(b instanceof Date?b:"string"==typeof b?a.timeago.parse(b):"number"==typeof b?new Date(b):a.timeago.datetime(b))};var f=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(b){function c(c,e){var f=a.isFunction(c)?c(e,b):c,g=d.numbers&&d.numbers[e]||e;return f.replace(/%d/i,g)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var d=this.settings.strings,e=d.prefixAgo,f=d.suffixAgo;if(this.settings.allowFuture&&0>b&&(e=d.prefixFromNow,f=d.suffixFromNow),!this.settings.allowPast&&b>=0)return this.settings.strings.inPast;var g=Math.abs(b)/1e3,h=g/60,i=h/60,j=i/24,k=j/365,l=45>g&&c(d.seconds,Math.round(g))||90>g&&c(d.minute,1)||45>h&&c(d.minutes,Math.round(h))||90>h&&c(d.hour,1)||24>i&&c(d.hours,Math.round(i))||42>i&&c(d.day,1)||30>j&&c(d.days,Math.round(j))||45>j&&c(d.month,1)||365>j&&c(d.months,Math.round(j/30))||1.5>k&&c(d.year,1)||c(d.years,Math.round(k)),m=d.wordSeparator||"";return void 0===d.wordSeparator&&(m=" "),a.trim([e,l,f].join(m))},parse:function(b){var c=a.trim(b);return c=c.replace(/\.\d+/,""),c=c.replace(/-/,"/").replace(/-/,"/"),c=c.replace(/T/," ").replace(/Z/," UTC"),c=c.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),c=c.replace(/([\+\-]\d\d)$/," $100"),new Date(c)},datetime:function(b){var c=a(b).attr(f.isTime(b)?"datetime":"title");return f.parse(c)},isTime:function(b){return"time"===a(b).get(0).tagName.toLowerCase()}});var g={init:function(){var c=a.proxy(b,this);c();var d=f.settings;d.refreshMillis>0&&(this._timeagoInterval=setInterval(c,d.refreshMillis))},update:function(c){var d=f.parse(c);a(this).data("timeago",{datetime:d}),f.settings.localeTitle&&a(this).attr("title",d.toLocaleString()),b.apply(this)},updateFromDOM:function(){a(this).data("timeago",{datetime:f.parse(a(this).attr(f.isTime(this)?"datetime":"title"))}),b.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};a.fn.timeago=function(a,b){var c=a?g[a]:g.init;if(!c)throw new Error("Unknown function name '"+a+"' for timeago");return this.each(function(){c.call(this,b)}),this},document.createElement("abbr"),document.createElement("time")}),Livepress.Ui={},Livepress.Ui.View=function(a){var b=jQuery("#livepress"),c=b.find(".lp-comments-count"),d=b.find(".lp-updates-count"),e=(b.find(".lp-settings-button"),b.find(".lp-bar")),f=jQuery("#lp-settings");this.set_comment_num=function(a){var b=c.html();c.html(parseInt(a,10)),b!==a&&c.parent().animate({color:"#ffff66"},200).animate({color:"#ffffff"},800)},this.set_live_updates_num=function(a){d.html(parseInt(a,10))};var g=(f.find(".lp-settings-close"),f.find(".lp-tab"),f.find(".lp-pane"),f.find(".lp-button.lp-expand-options"),f.find("input[name=lp-setting-sound]"),f.find("input[name=lp-setting-updates]"),f.find("input[name=lp-setting-comments]"));f.find("input[name=lp-setting-scroll]"),f.find(".lp-button.lp-update-settings"),f.find(".lp-options-ext"),f.find(".lp-settings-short");a&&(e.find(".lp-sprite.comments").hide(),c.parent().hide(),g.parent().hide());var h=function(a,b,c,d){return b.prop("checked",a).change(function(){return b.is(":checked")?c(1):d(1)}),a?c():d()};this.follow_comments_control=function(a,b,c){h(a,g,b,c)};var i=f.find(".live-updates-status"),j=e.find(".lp-counter");this.connected=function(){i.text("ON"),j.removeClass("lp-off").addClass("lp-on"),e.find(".lp-logo").attr("title","Connected")},this.disconnected=function(){i.text("OFF"),j.removeClass("lp-on").addClass("lp-off"),e.find(".lp-logo").attr("title","Not Connected")},this.comment_alert=function(a,b){var c=jQuery("<div>"),d=jQuery("<abbr>").attr("class","timeago").attr("title",b).text(b.replace(/Z/," UTC"));c.append(d);var e={class_name:"comment",date:c.html(),time:7e3};jQuery.gritter.add(jQuery.extend({},e,a)),jQuery(".gritter-comments .add-comment").click(function(){jQuery().scrollTo("#respond, #commentform, #submit",900)}),jQuery("abbr.livepress-timestamp").timeago().attr("title","")}},Livepress.Ui.UpdateBoxView=function(a){function b(a){var b=['<li style="display:none;">',a,"</li>"].join("");if(m+=1,m>1?(j.html(" new updates."),k.html("them")):(j.html(" new update."),k.html("it")),m>7)h.slideDown(300);else{g.append(b);var c=g.find("li:last");c.show()}i.text(m),e.is(":visible")||(e.slideDown(600),e.css("display","inline-block")),jQuery("abbr.livepress-timestamp").timeago().attr("title","")}"undefined"==typeof a&&(a=!0);var c=['<div class="update-box-content">','<div class="lp-update-count">','<strong class="lp-update-num">0</strong>','<strong class="lp-update-new-update"> '+lp_client_strings.new_updates+". </strong>",'<a href="javascript:location.reload();" class="lp-refresher">'+lp_client_strings.refresh+"</a> "+lp_client_strings.to_see+' <span class="lp-update-it-them">'+lp_client_strings.them+"</span>.","</div>",'<div class="lp-balloon">','<img class="lp-close-button" title="Close" />','<ul class="lp-new-posts"></ul>','<a class="lp-more-link" href="javascript:location.reload();">+ more</a>','<div class="lp-balloon-tail">&nbsp;</div>',"</div>","</div>",'<div class="clear"></div>'].join(""),d=".livepress lp-update-container",e=jQuery("#lp-update-box");e.addClass(d),e.append(c);var f=e.find(".lp-balloon"),g=e.find(".lp-new-posts"),h=e.find(".lp-more-link"),i=e.find(".lp-update-num"),j=e.find(".lp-update-new-update"),k=e.find(".lp-update-it-them"),l=e.find(".lp-close-button"),m=0;l.click(function(){f.fadeOut()}),l.attr("src",LivepressConfig.lp_plugin_url+"/img/lp-settings-close.png"),this.reposition_balloon=function(){f.css("margin-top",-(f.height()+60))},this.new_post=function(a,c,d,e){if(void 0!==e){var f=jQuery("<div>"),g=jQuery("<abbr>").attr("class","timeago").attr("title",e).text(e.replace(/Z/," UTC")),h=jQuery("<a></a>").attr("href",c).text("Update: "+a);f.append(g).append(h),b(f.html()),this.reposition_balloon()}},this.post_update=function(a,c){var d=25,e=28,f=jQuery("<div>"),g=jQuery("<abbr>").attr("class","timeago").attr("title",c).text(c.replace(/Z/," UTC")),h=a.indexOf(" ",d);-1===h&&(h=a.length),h>e&&(h=a.substr(0,h).lastIndexOf(" ")),(-1===h||h>e)&&(h=e);var i=a.substr(0,h)+(h<a.length?"&hellip;":""),j=" Update: <strong>"+i+"</strong>";f.append(g).append(j),b(f.html())},this.clear=function(){h.hide(),g.html(""),m=0,i.text("0"),e.is(":visible")&&e.slideUp(600)}},Livepress.Ui.UpdateView=function(a,b,c){var d,e={},f=a.hasClass("pinned-first-live-update"),g=function(){return a.find(".livepress-update-header").text()},h=function(b){if(f)return LivepressConfig.post_title;var c,d=a.clone();d.find(".livepress-meta").remove(),d.find(".live-update-authors").remove(),d.find(".live-update-livetags").remove();var e=d.text();e=d.text().replace(/\n/g,""),e=e.replace(/\s+/," ");var g=[];for(g.push(0),c=1;c<e.length;c+=1)" "===e.charAt(c)&&g.push(c);if(g.push(e.length),e.length>b){c=0;for(var h=b;g[c]<b&&c<g.length-1;)h=g[c],c+=1;e=e.substring(0,h)+"…"}return e.trim()},i=jQuery("<div>").addClass("lp-share");if(void 0===d){e.element=a,e.id=a.attr("id");var j="";e.title=g(),e.shortExcerpt=h(100),e.longExcerpt=h(1e3)+" ",e.shortExcerpt+=j,e.longExcerpt+=j}e.link=function(){return f?LivepressConfig.post_url:Livepress.getUpdatePermalink(e.id)},e.shortLink=function(){return f?LivepressConfig.post_url:Livepress.getUpdateShortlink(e.id)};var k=["facebook","twitter","hyperlink"],l=Livepress.Ui.ReactButtons(e,k);i.append(l),"true"===LivepressConfig.share_top?e.element.prepend(i):e.element.append(i),d=a.find(".lp-pre-update-ui"),a.get(0)===jQuery(".livepress-update").get(0)&&d.addClass("lp-first-update"),a.addClass("ui-container")},Livepress.Ui.ReactButton=function(a,b){var c={},d={};return d.btnDiv=jQuery("<div>").addClass("lp-pu-ui-feature lp-pu-"+a),c.buttonFor=function(a,b){var c={};return c.link=b.link,c.type=a,d[a+"Button"](c),c.div},d.constructButtonMarkup=function(){var b=jQuery("<span>").addClass("lp-icon-"+a+" lp-pu-ico");return d.btnDiv.append(b)},d.twitterButton=function(a){a.div=d.constructButtonMarkup(),a.div.click(function(){var a,c,d=screen.width/2-300,e=screen.height/2-175,f="width=600,height=350,location=yes,,status=yes,top="+e+", left="+d,g=b.shortLink(),h=/livepress-update-([0-9]+)/,i=h.exec(b.id)[1],j=3>b.shortExcerpt.length?"":encodeURIComponent(b.shortExcerpt)+" ",k=encodeURIComponent(b.title.trim()),l=""===k?j:k+" ";l||(a=jQuery("#livepress-update-"+i+" .livepress-update-inner-wrapper img"),a.length&&(c=a.attr("alt"),c&&(l=c+" ")));var m="https://twitter.com/intent/tweet?text="+l+Livepress.getUpdatePermalink(b.id),n=window.open(m,"Twitter",f);"string"==typeof g?n.location="https://twitter.com/intent/tweet?text="+l+g:g.done(function(a){n&&(n.location="https://twitter.com/intent/tweet?text="+l+("undefined"!=typeof a.data?a.data.shortlink:Livepress.getUpdatePermalink(b.id)),"undefined"!=typeof a.data&&(Livepress.updateShortlinksCache[i]=a.data.shortlink))}),n&&n.focus()})},d.facebookButton=function(a){a.div=d.constructButtonMarkup(),a.div.click(function(){var a=Livepress.getUpdatePermalink(b.id),c=jQuery(this).closest(".pinned-first-live-update").length;1===c&&(a=LivepressConfig.post_url);var d=a.replace("?","?lp_close_popup=true&"),e=436,f=626,g=(screen.width-f)/2,h=(screen.height-e)/2,i="toolbar=0, status=0, width="+f+", height="+e+", left="+g+", top="+h;return"undefined"==typeof LivepressConfig.facebook_app_id||""===LivepressConfig.facebook_app_id?window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(a)," sharer",i):window.open("https://www.facebook.com/dialog/share_open_graph?app_id="+LivepressConfig.facebook_app_id+"&display=popup&action_type=og.likes&action_properties="+encodeURIComponent('{"object":"'+a+'" }')+"&redirect_uri="+encodeURIComponent(d)," sharer",i),!1})},d.hyperlinkButton=function(a){a.div=d.constructButtonMarkup(),a.div.click(function(){if(0===jQuery("#"+b.id+"-share input.permalink").length){var a=jQuery("<div/>"),c=jQuery("<input/>"),d=b.shortLink(),e=jQuery("<span/>");"string"!=typeof d?(c.hide(),d.done(function(a){c.show(),c.attr("value",""+("undefined"!=typeof a.data)?a.data.shortlink:Livepress.getUpdatePermalink(b.id))}).fail(function(){c.show()})):c.attr("value",d),c.addClass("permalink"),c.click(function(){c.select()}),e.text(lp_client_strings.copy_permalink),a.addClass("lp-permalink-meta"),a.prepend(e),a.prepend(c),jQuery("#"+b.id+" .lp-pre-update-ui").append(a),c.select()}else jQuery("#"+b.id+"-share").find(".lp-permalink-meta").remove();return!1})},c.buttonFor(a,b)},Livepress.Ui.ReactButtons=function(a,b){var c=jQuery("<div>").addClass("lp-pre-update-ui").attr("id",a.id+"-share");return jQuery.each(b,function(b,d){var e=Livepress.Ui.ReactButton(d,a);c.append(e)}),c},function(){var a=function(){var a=!1;this.settings_enabled=!1,jQuery("input:text, textarea").on("focusin",function(b){a=!0}).on("focusout",function(b){a=!1}),this.shouldScroll=function(){return this.settings_enabled&&!a}};Livepress.Scroll=new a}(),Livepress.DOMManipulator=function(a,b){this.custom_background_color=b,"string"==typeof a?this.containerJQueryElement=jQuery(a):this.containerJQueryElement=a,this.containerElement=this.containerJQueryElement[0],this.cleaned_ws=!1},Livepress.DOMManipulator.prototype={debug:!1,log:function(){this.debug&&console.log.apply(console,arguments)},update:function(a,b){b=b||{},this.log("Livepress.DOMManipulator.update begin."),this.clean_updates(),this.apply_changes(a,b);var c=this;setTimeout(function(){c.clean_updates()},1500),this.log("Livepress.DOMManipulator.update end.")},selector:function(a){return this.containerJQueryElement.find(a)},selectors:function(){if(0===arguments.length)throw"The method expects arguments.";var a=jQuery.map(arguments,function(a){return a});return this.containerJQueryElement.find(a.join(","))},clean_whitespaces:function(){},block_elements:function(){return{address:1,blockquote:1,center:1,dir:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,noscript:1,ol:1,p:1,pre:1,table:1,ul:1,div:1,math:1,caption:1,colgroup:1,col:1,dd:1,dt:1,frameset:1,li:1,tbody:1,td:1,thead:1,tfoot:1,th:1,tr:1}},is_block_element:function(a){return"string"==typeof a?this.block_elements().hasOwnProperty(a.toLowerCase()):!1},remove_whitespace:function(a){var b,c=!1,d=a.parentNode;return a===d.firstChild||a===d.lastChild?c=!0:(b=a.previousSibling,null!==b&&1===b.nodeType&&this.is_block_element(b.tagName)&&(c=!0)),c},clean_children_ws:function(a){var b,c;for(b=!1,c=a.firstChild;null!==c;null)if(3===c.nodeType?/^\s*$/.test(c.nodeValue)&&this.remove_whitespace(c)&&(b=!0):this.clean_children_ws(c),b){var d=c;c=c.nextSibling,a.removeChild(d),b=!1}else c=c.nextSibling},clean_updates:function(){this.log("DOMManipulator clean_updates."),jQuery.each(this.selector("span.oortle-diff-text-updated"),function(){var a;a=this.childNodes.length>1?this.childNodes[1]:this.childNodes[0],8!==a.nodeType&&(a=a.childNodes[0]),this.parentNode.replaceChild(a,this)}),this.selector(".oortle-diff-changed").removeClass("oortle-diff-changed"),this.selector(".oortle-diff-inserted").removeClass("oortle-diff-inserted"),this.selector(".oortle-diff-inserted-block").removeClass("oortle-diff-inserted-block"),this.selector(".oortle-diff-removed").remove(),this.selector(".oortle-diff-removed-block").remove()},process_twitter:function(a,b){if(b.match(/<blockquote[^>]*twitter-tweet/i))if("twttr"in window)try{window.twttr.events.bind("loaded",function(a){jQuery(document).trigger("live_post_update")}),window.twttr.widgets.load(a)}catch(c){}else try{if(!document.getElementById("twitter-wjs")){var d=document.createElement("script");d.src="https://platform.twitter.com/widgets.js",d.id="twitter-wjs",document.getElementsByTagName("head")[0].appendChild(d)}}catch(c){}},apply_changes:function(a,b){var c,d=jQuery,e=b.effects_display||!1,f=[];for(this.clean_whitespaces(),c=0;c<a.length;c++){this.log("apply changes i=",c," changes.length = ",a.length);var g=a[c];this.log("change[i] = ",g[c]);var h,i,j,k,l,m,n,o,p,q,r;switch(g[0]){case"add_class":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),this.add_class(i,g[2])}catch(s){this.log("Exception on add_class: ",s)}break;case"set_attr":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),this.set_attr(i,g[2],g[3])}catch(t){this.log("Exception on set_attr: ",t)}break;case"del_attr":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),this.del_attr(i,g[2])}catch(u){this.log("Exception on del_attr: ",u)}break;case"set_text":try{this.set_text(g[1],g[2])}catch(v){this.log("Exception on set_text: ",v)}break;case"del_node":try{if(h=this.get_path_parts(g[1]),i=this.node_at_path(h),3===i.nodeType){for(j=i.parentNode,q=0;q<j.childNodes.length;q++)if(j.childNodes[q]===i){k=j.ownerDocument.createElement("span"),k.appendChild(i),k.className="oortle-diff-removed";break}q<j.childNodes.length?j.insertBefore(k,j.childNodes[q]):j.appendChild(k)}else 8===i.nodeType?i.parentNode.removeChild(i):this.add_class(i,"oortle-diff-removed")}catch(w){this.log("Exception on del_node: ",w)}break;case"push_node":try{if(h=this.get_path_parts(g[1]),i=this.node_at_path(h),null!==i){var x=i.parentNode;this.log("push_node: parentNode = ",x,", node = ",i),f[g[2]]=x.removeChild(i),d(f[g[2]]).addClass("oortle-diff-inserted")}}catch(y){this.log("Exception on push_node: ",y)}break;case"pop_node":try{h=this.get_path_parts(g[1]),l=this.get_child_index(h),j=this.node_at_path(this.get_parent_path(h)),l>-1&&null!==j&&(m=f[g[2]],n=j.childNodes.length<=l?null:j.childNodes[l],this.log("pop_node",m,"from register",g[2],"before element",n,"on index ",l," on parent ",j),r=j.insertBefore(m,n),d(r).addClass("oortle-diff-inserted"))}catch(z){this.log("Exception on pop_node: ",z)}break;case"ins_node":try{if(h=this.get_path_parts(g[1]),l=this.get_child_index(h),o=this.get_parent_path(h),j=this.node_at_path(o),this.log("ins_node: childIndex = ",l,", parent = ",j),l>-1&&null!==j&&(m=document.createElement("span"),m.innerHTML=g[2],p=m.childNodes[0],""===p.id||null===document.getElementById(p.id))){this.process_twitter(p,g[2]),n=j.childNodes.length<=l?null:j.childNodes[l],r=j.insertBefore(p,n);var A=d(r);A.addClass("oortle-diff-inserted");
var B=d(p).find("div.live-update-livetags");"undefined"!=typeof B&&0!==B.length&&this.addLiveTagsToUpdate(A,B),this.filterUpdate(A,B)}}catch(C){this.log("Exception on ins_node: ",C)}break;case"append_child":try{o=this.get_path_parts(g[1]),j=this.node_at_path(o),null!==j&&(m=document.createElement("span"),m.innerHTML=g[2],p=m.childNodes[0],""!==p.id&&null!==document.getElementById(p.id)&&(this.process_twitter(p,g[2]),r=j.appendChild(p),d(r).addClass("oortle-diff-inserted")))}catch(C){this.log("Exception on append_child: ",C)}break;case"replace_node":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),j=i.parentNode,m=document.createElement("span"),m.innerHTML=g[2],p=m.childNodes[0];var D=d(p).data("lpg");if(""!==D&&null!==D&&D<=d(i).data("lpg"));else if(this.process_twitter(p,g[2]),this.add_class(p,"oortle-diff-changed"),d(i).hasClass("pinned-first-live-update")&&(this.add_class(p,"pinned-first-live-update"),setTimeout(this.scrollToPinnedHeader,500)),j.insertBefore(p,i),3===i.nodeType){for(q=0;q<j.childNodes.length;q++)if(j.childNodes[q]===i){k=j.ownerDocument.createElement("span"),k.appendChild(i),k.className="oortle-diff-removed";break}q<j.childNodes.length?j.insertBefore(k,j.childNodes[q]):j.appendChild(k)}else 8===i.nodeType?i.parentNode.removeChild(i):this.add_class(i,"oortle-diff-removed")}catch(C){this.log("Exception on append_child: ",C)}break;default:throw this.log("Operation not implemented yet."),"Operation not implemented yet."}this.log("i=",c," container: ",this.containerElement.childNodes," -- registers: ",f)}try{this.display(e)}catch(E){this.log("Exception on display: ",E)}try{if(Livepress.Scroll.shouldScroll()){var F=void 0===b.custom_scroll_class?".oortle-diff-inserted-block, .oortle-diff-changed, .oortle-diff-inserted":b.custom_scroll_class;jQuery.scrollTo(F,900,{axis:"y",offset:-30})}}catch(G){this.log("Exception on scroll ",G)}this.log("end apply_changes.")},scrollToPinnedHeader:function(){Livepress.Scroll.shouldScroll()&&jQuery.scrollTo(".pinned-first-live-update",900,{axis:"y",offset:-30})},filterUpdate:function(a,b){var c,d,e=jQuery(".live-update-tag-control"),f=e.find(".live-update-tagcontrol.active");if(0!==f.length&&0===b.length)return void a.hide().removeClass("oortle-diff-inserted");if(0!==f.length){var g=!1,h=b.find(".live-update-livetag");jQuery.each(h,function(a,b){c=jQuery(b).attr("class"),c=c.replace(/live-update-livetag live-update-livetag-/gi,""),c="live-update-livetag-"+c.toLowerCase().replace(/ /g,"-"),c='.live-update-tagcontrol.active[data-tagclass="'+c+'"]',d=e.find(c),0!==d.length&&(g=!0)}),g||a.hide().removeClass("oortle-diff-inserted")}},addLiveTagsToUpdate:function(a,b){var c,d=this,e=jQuery("#livepress"),f=b.find(".live-update-livetag"),g=(b.parent().parent(),e.find(".live-update-tag-control"));0===g.length&&this.addLiveTagControlBar(),f.each(function(){var b=jQuery(this).attr("class");b=b.replace(/live-update-livetag live-update-livetag-/gi,""),c="live-update-livetag-"+b.toLowerCase().replace(/ /g,"-"),a.addClass(c),d.addLiveTagToControls(b)})},addLiveTagToControls:function(a){var b,c=jQuery("#livepress"),d=c.find(".live-update-tag-control"),e=d.find('[data-tagclass="live-update-livetag-'+a.toLowerCase().replace(/ /g,"-")+'"]');0===e.length&&(b='<span class="live-update-tagcontrol" data-tagclass="live-update-livetag-'+a.toLowerCase().replace(/ /g,"-")+'">'+a+"</span>",d.append(b))},addLiveTagControlBar:function(){var a=jQuery("#livepress"),b=a.find(".live-update-tag-control");a.append('<div class="live-update-tag-control"><span class="live-update-tag-title">'+lp_client_strings.filter_by_tag+"</span></div>"),b=a.find(".live-update-tag-control"),this.addLiveTagHandlers(b)},addLiveTagHandlers:function(a){var b=this,c=jQuery(".livepress_content");a.on("click",".live-update-tagcontrol",function(){var d=jQuery(this);d.toggleClass("active"),b.filterUpdateListbyLiveTag(a,c)})},filterUpdateListbyLiveTag:function(a,b){var c,d=a.find(".live-update-tagcontrol.active");return 0===d.length?void b.find(".livepress-update").show():(b.find(".livepress-update").hide(),void jQuery.each(d,function(a,d){c="."+jQuery(d).data("tagclass"),b.find(c).show()}))},colorForOperation:function(a){if(0===a.length)return!1;var b={"oortle-diff-inserted":LivepressConfig.oortle_diff_inserted,"oortle-diff-changed":LivepressConfig.oortle_diff_changed,"oortle-diff-inserted-block":LivepressConfig.oortle_diff_inserted_block,"oortle-diff-removed-block":LivepressConfig.oortle_diff_removed_block,"oortle-diff-removed":LivepressConfig.oortle_diff_removed},c="#fff";return jQuery.each(b,function(b,d){return a.hasClass(b)?(c=d,!1):void 0}),c},show:function(a){var b=jQuery(a);!LivepressConfig.page_active&&LivepressConfig.effects&&(b.getBg(),b.data("oldbg",b.css("background-color")),b.addClass("unfocused-lp-update"),b.css("background-color",this.colorForOperation(b))),b.show()},sliderFixed:function(a,b){var c=jQuery,d={slideType:"down",duration:250};b=c.extend({},d,b);var e="down"===b.slideType,f=c(a),g=f.data("originalHeight"),h=f.is(":visible"),i=f.data("originalStyle");return 1===arguments.length&&(e=!h),e===h?!1:(g&&i||(g=f.show().height(),i=f.attr("style"),f.data("originalStyle",i),f.data("originalHeight",g),h||f.hide()),void(e?f.show().animate({height:g},{duration:b.duration,complete:function(){f.css({height:f.data("originalHeight")}),f.attr("style",f.data("originalStyle")),f.show()}}):f.animate({height:0},{duration:b.duration,complete:function(){f.hide()}})))},show_with_effects:function(a,b){"string"===this.custom_background_color&&a.css("background-color",this.custom_background_color),a.getBg(),b(a,a.css("background-color"))},display:function(a){if(a){var b=this.selector(".oortle-diff-inserted-block");b.hide().css("height","");var c=this,d=function(a,b){c.sliderFixed(a,"down"),a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800),setTimeout(function(){a.css("background-color","")},1500)};b.each(function(a,b){c.show_with_effects(jQuery(b),d)}),this.show_with_effects(this.selectors(".oortle-diff-inserted",".oortle-diff-changed"),function(a,b){a.slideDown(200);try{a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800)}catch(d){console.log("Error when animating new comment div.")}setTimeout(function(){a.css("background-color","")},1500)}),this.show_with_effects(this.selectors(".oortle-diff-removed-block",".oortle-diff-removed"),function(a,b){try{a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800).slideUp(200)}catch(d){console.log("Error when removing comment div.")}setTimeout(function(){a.css("background-color","")},1500)})}else this.show(this.selectors(".oortle-diff-changed",".oortle-diff-inserted",".oortle-diff-removed")),this.show(this.selector(".oortle-diff-inserted-block"))},set_text:function(a,b){var c=this.get_path_parts(a),d=this.get_child_index(c),e=this.node_at_path(this.get_parent_path(c));if(d>-1&&null!==e){for(var f=e.childNodes[d],g=jQuery(b),h=0,i=g.length;i>h;h++)e.insertBefore(g[h],f);e.removeChild(f)}},get_path_parts:function(a){if("#"===a[0]){var b=jQuery(a,this.containerElement)[0];return b?[b.parentNode,b]:[null,null]}for(var c=a.split(":"),d=[],e=0,f=c.length;f>e;e++)d[e]=parseInt(c[e],10);return d},get_child_index:function(a){return a.length>0?parseInt(a[a.length-1],10):-1},get_parent_path:function(a){var b=a.slice();return b.splice(-1,1),b},node_at_path:function(a){return void 0===a[0].nodeType?this.get_node_by_path(this.containerElement,a):a[a.length-1]},get_node_by_path:function(a,b){var c=b.slice();if(c.splice(0,1),0===c.length)return a;for(var d=0,e=a,f=null,g=c.length;g>d&&(e=e.childNodes[c[d]],"undefined"!=typeof e);d++);return d===c.length&&(f=e),f},add_class:function(a,b){null!==a&&(a.className+=" "+b)},set_attr:function(a,b,c){null!==a&&a.setAttribute(b,c)},del_attr:function(a,b){null!==a&&a.removeAttribute(b)}},Livepress.DOMManipulator.clean_updates=function(a){var b=new Livepress.DOMManipulator(a);b.clean_updates()},function(){if(!window.google||!google.gears){var a=null;if("undefined"!=typeof GearsFactory)a=new GearsFactory;else try{"undefined"!=typeof window.ActiveXObject&&(a=new ActiveXObject("Gears.Factory"),-1!=a.getBuildInfo().indexOf("ie_mobile")&&a.privateSetGlobalObject(this))}catch(b){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(a=document.createElement("object"),a.style.display="none",a.width=0,a.height=0,a.type="application/x-googlegears",document.documentElement.appendChild(a))}a&&(window.google||(google={}),google.gears||(google.gears={factory:a}))}}();var internalStorage=function(){var a={expires:30,get:function(a){return jQuery.cookie(a)},set:function(a,b){return jQuery.cookie(a,b,{path:"/",expires:this.expires})},remove:function(a){return jQuery.cookie(a,null)}},b=a;try{"localStorage"in window&&null!==window.localStorage&&(b=window.localStorage)}catch(c){}return function(a){return a||(a=""),{get:function(c,d){return b.getItem(a+"-"+c)},set:function(c,d){return b.setItem(a+"-"+c,d)},remove:function(c){return b.remoteItem(a+"-"+c)}}}}();Livepress.storage=function(){var a=new internalStorage("Livepress");return{get:function(b,c){var d=a.get(b);return null===d||"undefined"==typeof d?c:d},set:function(b,c){return a.set(b,c)}}}(),Livepress.Ui.Controller=function(a,b){function c(){void 0!==t&&t.connected()}function d(a){"cache_empty"===a.reason||"cache_miss"===a.reason||console.log("Comet warn: ",a)}function e(a){return"object"==typeof b&&"function"==typeof b[a]?b[a].apply(this,Array.prototype.slice.call(arguments,1)):void 0}function f(){setTimeout(function(){C.is_connected()?t.connected():t.disconnected()},1500)}function g(b,c,d){if(a.comment_msg_id!==d){e("before_live_comment",b);var g=e("should_attach_comment",a);if(g=void 0===g?!0:g){var h=e("on_comment_update",b,r);void 0===h&&r.update(b.diff)}if(f(),e("post_comment_update"),D.play(0===w?"firstComment":"commentAdded"),w+=1,b.comment_id){var i=e("get_comment_container",b.comment_id);if(void 0===i)for(var j=0;j<b.diff.length;j+=1)if("ins_node"===b.diff[j][0]&&b.diff[j][2].indexOf(b.content)>=0){i=jQuery(b.diff[j][2]).attr("id");break}var k;k=0===jQuery(b.avatar_url).length?b.avatar_url:jQuery(b.avatar_url).attr("src");var l={title:b.author,text:b.content,commentContainerId:i,image:k};g||(l.scrollToText=lp_client_strings.refresh_page,l.scrollToCallback=function(){location.reload()}),t.comment_alert(l,b.comment_gmt)}t.set_comment_num(w)}}function h(){var b=jQuery(document.querySelectorAll("#post_content_livepress .livepress-update")).not(".oortle-diff-removed");t.set_live_updates_num(b.length);var c=window.location.href.replace(window.location.hash,"");z&&b.addClass("lp-hl-on-hover"),b.each(function(){var b=jQuery(this);return b.is(".lp-live")||(b.addClass("lp-live"),"display"!==LivepressConfig.sharing_ui)?void 0:new Livepress.Ui.UpdateView(b,c,a.disable_comments)})}function i(a){"undefined"!=typeof FB&&FB.XFBML.parse();var b=j(a);k(b)}function j(a){var b=/id\=\"(livepress-update-[0-9]+)/;return b.exec(a[0][2])[1]}function k(a){var b={};"undefined"!=typeof _wpmejsSettings&&(b.pluginPath=_wpmejsSettings.pluginPath),b.success=function(a){var b=a.attributes.autoplay&&"false"!==a.attributes.autoplay;"flash"===a.pluginType&&b&&a.addEventListener("canplay",function(){a.play()},!1)};var c=["#",a," .wp-audio-shortcode, ","#",a," .wp-video-shortcode"].join("");jQuery(c).not(".mejs-container").mediaelementplayer(b)}function l(a){if(!window.is_active){var b=!1;if(jQuery.each(a,function(a,c){b="ins_node"===c[0]}),b){var c=jQuery("title"),d=c.data("updates");d+=1,c.data("updates",d),c.text("("+d+") "+c.data("text"))}}}function m(b){if(f(),2===b.length){var c,d=b[0],e=b[1];c="string"==typeof a.custom_title_css_selector?a.custom_title_css_selector:"#post-"+a.post_id;var g=jQuery(c),h=g.html().replaceAll(d,e);g.html(h);var i=document.title.replace(d,e);document.title=i}else console.log("error -- received data about post = "+b)}function n(a){var b=new Date,c=b.toISOString(),d='<abbr class="livepress-timestamp" title="'+c+'"></abbr>';if("op"in a&&"broadcast"===a.op){var e=JSON.parse(a.data);return void("shortlink"in e&&jQuery.each(e.shortlink,function(a,b){Livepress.updateShortlinksCache[a]=b}))}if("event"in a&&"post_title"===a.event)return m(a.data);var g=a.pop();if(l(a),B){if(A.push(a),"undefined"!=typeof s)for(var k=g.updated_at,n=0;n<g.post_updates.length;n+=1)s.post_update(g.post_updates[n],k)}else q.update(a,{effects_display:window.is_active}),h();f(),i(a),E||D.play("postUpdated"),E=!0,v.find(".lp-updated-counter").html(d),v.find(".lp-updated-counter").find(".livepress-timestamp").attr("title",c),v.find(".lp-bar .lp-status").removeClass("lp-off").addClass("lp-on");var o=j(a),p=jQuery("#"+o).find("abbr.livepress-timestamp");"timeago"===LivepressConfig.timestamp_format?p.timeago().attr("title",""):(jQuery(".lp-bar abbr.livepress-timestamp").timeago(),jQuery("abbr.livepress-timestamp").attr("title","")),p.wrap('<a href="'+Livepress.getUpdatePermalink(o)+'" ></a>'),jQuery(document).trigger("live_post_update")}function o(b,c,d){a.new_post_msg_id!==d&&(s.new_post(b.title,b.link,b.author,b.updated_at_gmt),D.play("postUpdated"))}function p(){var a=function(){var a=jQuery(".unfocused-lp-update"),b=a.data("oldbg")||"#FFF";a.animate({backgroundColor:b},4e3,"swing",function(){jQuery(this).removeClass("unfocused-lp-update").css("background-color","")})},b=jQuery("title");b.data("text",b.text()),b.data("updates",0),u.focus(function(){this.is_active=!0,b.text(b.data("text")),b.data("updates",0),a()}),u.blur(function(){this.is_active=!1});var c=jQuery("#post_content_livepress"),d=c.data("livetags");if(""!==d){q.addLiveTagControlBar();var e=d.split(",");e.map(function(a){q.addLiveTagToControls(a)})}jQuery(document).trigger("live_post_update")}var q,r,s,t,u=jQuery(window),v=jQuery(document.getElementById("livepress")),w=a.comment_count,x=a.page_type,y="home"===x,z="single"===x,A=[],B=!1,C=OORTLE.instance,D=Livepress.sounds,E=!0;if(window.is_active=!0,u.ready(p),null!==document.getElementById("lp-update-box")&&(s=new Livepress.Ui.UpdateBoxView(y)),null!==document.getElementById("livepress")&&(t=new Livepress.Ui.View(a.disable_comments),t.set_comment_num(w),h()),void 0!==s||void 0!==t){var F="#livepress-connection";jQuery(document.body).append('<div id="'+F+'"><!-- --></div>');var G="|livepress|"+a.site_url+"|post-new-update";if(C.attachEvent("connected",c),C.attachEvent("error",d),void 0!==s&&y){var H=a.new_post_msg_id?{last_id:a.new_post_msg_id}:{fetch_all:!0};C.subscribe(G,o,H),C.connect()}if(void 0!==t){C.attachEvent("reconnected",t.connected),C.attachEvent("disconnected",t.disconnected);var I="|livepress|"+a.site_url+"|post-"+a.post_id,J="|livepress|"+a.site_url+"|post-"+a.post_id+"_comment";a.can_edit_comments&&(J+="-logged"),q=new Livepress.DOMManipulator("#post_content_livepress",a.custom_background_color),r=new Livepress.DOMManipulator("#post_comments_livepress",a.custom_background_color);var K=a.new_post_msg_id?{last_id:a.new_post_msg_id}:{fetch_all:!0};!a.disable_comments&&a.comment_live_updates_default&&(K=a.comment_msg_id?{last_id:a.comment_msg_id}:{fetch_all:!0},C.subscribe(J,function(){},K)),K=a.post_update_msg_id?{last_id:a.post_update_msg_id}:{fetch_all:!0},C.subscribe(I,n,K),C.connect(),a.autoscroll?Livepress.Scroll.settings_enabled=!0:Livepress.Scroll.settings_enabled=!1,a.disable_comments?C.unsubscribe(J,g):C.subscribe(J,g)}}},jQuery(function(){Livepress.Comment=function(){var a=!1,b=function(a){var b=jQuery("#oortle-comment-status");0===b.length&&(jQuery("#submit").after("<span id='oortle-comment-status'></span>"),b=jQuery("#oortle-comment-status")),b.text(a)},c=function(a){var b=jQuery("#comment");b.attr("disabled",!1),a&&(b.val(""),jQuery("#cancel-comment-reply-link").click())},d=function(){try{if(a)return!1;a=!0;var d=jQuery("#submit"),e=d.attr("value");d.attr("value",lp_client_strings.sending+"..."),d.attr("disabled",!0),jQuery("textarea#comment").attr("disabled",!0),b("");var f={},g=document.getElementById("commentform")||document.getElementById("comment-form");f.comment_post_ID=g.comment_post_ID.value,"undefined"!=typeof g.comment_parent&&(f.comment_parent=g.comment_parent.value),f.comment=g.comment.value,g.comment.value="",f.author=g.elements[0].value,f.email=g.elements[1].value,f.url=g.elements[2].value,f._wp_unfiltered_html_comment=void 0!==g._wp_unfiltered_html_comment?g._wp_unfiltered_html_comment.value:"",f.redirect_to="",f.livepress_update="true",f.action="lp_post_comment",f._ajax_nonce=LivepressConfig.ajax_comment_nonce,Livepress.sounds.play("commented"),jQuery.ajax({url:LivepressConfig.site_url+"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:f,error:function(a,d,e){console.log("comment response: "+a.status+" :: "+a.statusText),console.log("comment ajax failed: %s",d),b(lp_client_strings.comment_status+": "+a.responseText),c(!1)},success:function(a,d){b(lp_client_strings.comment_status+": "+a.msg),c("200"===a.code)},complete:function(b,c){d=jQuery("#submit"),a=!1,d.attr("value",e),d.attr("disabled",!1)}})}catch(h){console.log("EXCEPTION: %s",h),b(lp_client_strings.sending_error)}return!1},e=function(){jQuery("#submit").click(d)},f=function(a){var b=jQuery("#comment");a.ajax_nonce===LivepressConfig.ajax_nonce&&b.val()===a.content&&c(!0)},g=function(a){var b=a.comment_page_number;return"asc"===a.comment_order?0===b||b===a.comment_pages_count:1>=b},h=function(a){return jQuery("#comment-"+a).parent().attr("id")},i=function(a,b){var c={custom_scroll_class:"#comment-"+a.comment_id};if("0"===a.comment_parent)b.update(a.diff,c);else{b.update(a.comments_counter_only_diff,c);var d=jQuery(a.comment_html);d.addClass("oortle-diff-inserted-block").hide();var e=jQuery("#comment-"+a.comment_parent),f=e.children(".children");0===f.length&&(f=jQuery("<ul>").addClass("children").appendTo(e)),f.append(d),b.display(!0)}return!0};return LivepressConfig.disable_comments||e(),{send:d,attach:e,before_live_comment:f,should_attach_comment:g,get_comment_container:h,on_comment_update:i}}()}),void 0!==jQuery&&(jQuery.ajax=function(a){return function(){return void 0!==OORTLE&&void 0!==OORTLE.instance&&OORTLE.instance&&OORTLE.instance.flush(),a.apply(this,arguments)}}(jQuery.ajax));var unow=Date.now||function(){return(new Date).getTime()},throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:unow(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=unow();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}};Livepress.Ready=function(){var a,b,c,d={post_comment_update:Livepress.Comment.attach,before_live_comment:Livepress.Comment.before_live_comment,should_attach_comment:Livepress.Comment.should_attach_comment,get_comment_container:Livepress.Comment.get_comment_container,on_comment_update:Livepress.Comment.on_comment_update};if(jQuery.each(jQuery(".livepress-update"),function(){var a=jQuery(this).find("abbr.livepress-timestamp");a.wrap('<a href="'+Livepress.getUpdatePermalink(jQuery(this).attr("id"))+'" ></a>'),"timeago"===LivepressConfig.timestamp_format?jQuery("abbr.livepress-timestamp").timeago().attr("title",""):(jQuery(".lp-bar abbr.livepress-timestamp").timeago(),jQuery("abbr.livepress-timestamp").attr("title",""))}),jQuery(".lp-status").hasClass("livepress-pinned-header")){jQuery(".livepress_content").find(".livepress-update:first").addClass("pinned-first-live-update");var e=function(){jQuery("#livepress  > .pinned-first-live-update").remove(),a=jQuery(".livepress_content"),b=a.find(".pinned-first-live-update"),c=jQuery("#livepress"),b.hide(),b.clone(!0).prependTo(c).show(),jQuery("#livepress  > .pinned-first-live-update.oortle-diff-removed").remove()};jQuery(document).on("live_post_update",function(){setTimeout(e,50)}),setTimeout(e,50)}return new Livepress.Ui.Controller(LivepressConfig,d)},jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?j.transparent:j[a.trim(b).toLowerCase()]}function d(b,d){var e;do{if(e=(a.curCSS||a.css)(b,d),""!=e&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function e(){var a,b,c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,d={};if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;)a=c[e],"string"==typeof c[a]&&(b=a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),d[b]=c[a]);else for(a in c)"string"==typeof c[a]&&(d[a]=c[a]);return d}function f(b){var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c,d={_:0};for(c in b)a[c]!=b[c]&&(d[c]=b[c]);return d}function h(b,c,d,e){return"object"==typeof b&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function i(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects[b]?!1:!0}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.queue(function(){var i,j=a(this),l=j.attr("style")||" ",m=f(e.call(this)),n=j.attr("class")||"";a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),i=f(e.call(this)),j.attr("class",n),j.animate(g(m,i),{queue:!1,duration:c,easing:d,complete:function(){a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),"object"==typeof j.attr("style")?(j.attr("style").cssText="",j.attr("style").cssText=l):j.attr("style",l),h&&h.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.24",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=h.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},i=g.options.mode,j=a.effects[b];return a.fx.off||!j?i?this[i](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):j.call(this,g)},_show:a.fn.show,show:function(a){if(i(a))return this._show.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(i(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(i(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:c(-2*a+2)/-2+1}}),a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width",i="vertical"==f?g.height():g.width();"show"==e&&g.css(h,0);var j={};j[h]="show"==e?i:0,g.animate(j,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),this.createjs=this.createjs||{},function(){var a=createjs.SoundJS=createjs.SoundJS||{};a.version="0.6.1",a.buildDate="Thu, 21 May 2015 16:17:37 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(a,b){"use strict";function c(){this.constructor=a}return c.prototype=b.prototype,a.prototype=new c},this.createjs=this.createjs||{},createjs.promote=function(a,b){"use strict";var c=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(d){c[(b+="_")+"constructor"]=d.constructor;for(var e in d)c.hasOwnProperty(e)&&"function"==typeof d[e]&&(c[b+e]=d[e])}return a},this.createjs=this.createjs||{},createjs.indexOf=function(a,b){"use strict";for(var c=0,d=a.length;d>c;c++)if(b===a[c])return c;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}}}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"BrowserDetect cannot be instantiated"}var b=a.agent=window.navigator.userAgent;a.isWindowPhone=b.indexOf("IEMobile")>-1||b.indexOf("Windows Phone")>-1,a.isFirefox=b.indexOf("Firefox")>-1,a.isOpera=null!=window.opera,a.isChrome=b.indexOf("Chrome")>-1,a.isIOS=(b.indexOf("iPod")>-1||b.indexOf("iPhone")>-1||b.indexOf("iPad")>-1)&&!a.isWindowPhone,a.isAndroid=b.indexOf("Android")>-1&&!a.isWindowPhone,a.isBlackberry=b.indexOf("Blackberry")>-1,createjs.BrowserDetect=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this._listeners=null,this._captureListeners=null}var b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener,a.on=b.on,a.removeEventListener=a.off=b.removeEventListener,a.removeAllEventListeners=b.removeAllEventListeners,a.hasEventListener=b.hasEventListener,a.dispatchEvent=b.dispatchEvent,a._dispatchEvent=b._dispatchEvent,a.willTrigger=b.willTrigger},b.addEventListener=function(a,b,c){var d;d=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var e=d[a];return e&&this.removeEventListener(a,b,c),e=d[a],e?e.push(b):d[a]=[b],b},b.on=function(a,b,c,d,e,f){return b.handleEvent&&(c=c||b,b=b.handleEvent),c=c||this,this.addEventListener(a,function(a){b.call(c,a,e),d&&a.remove()},f)},b.removeEventListener=function(a,b,c){var d=c?this._captureListeners:this._listeners;if(d){var e=d[a];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==b){1==g?delete d[a]:e.splice(f,1);break}}},b.off=b.removeEventListener,b.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},b.dispatchEvent=function(a){if("string"==typeof a){var b=this._listeners;if(!b||!b[a])return!1;a=new createjs.Event(a)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(c){}if(a.bubbles&&this.parent){for(var d=this,e=[d];d.parent;)e.push(d=d.parent);var f,g=e.length;for(f=g-1;f>=0&&!a.propagationStopped;f--)e[f]._dispatchEvent(a,1+(0==f));for(f=1;g>f&&!a.propagationStopped;f++)e[f]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return a.defaultPrevented},b.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return!!(b&&b[a]||c&&c[a])},b.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;b=b.parent}return!1},b.toString=function(){return"[EventDispatcher]"},b._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d){var e=d[a.type];
if(!e||!(c=e.length))return;try{a.currentTarget=this}catch(f){}try{a.eventPhase=b}catch(f){}a.removed=!1,e=e.slice();for(var g=0;c>g&&!a.immediatePropagationStopped;g++){var h=e[g];h.handleEvent?h.handleEvent(a):h(a),a.removed&&(this.off(a.type,h,1==b),a.removed=!1)}}},createjs.EventDispatcher=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.type=a,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!b,this.cancelable=!!c,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var b=a.prototype;b.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},b.stopPropagation=function(){this.propagationStopped=!0},b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},b.remove=function(){this.removed=!0},b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)},b.set=function(a){for(var b in a)this[b]=a[b];return this},b.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.Event_constructor("error"),this.title=a,this.message=b,this.data=c}var b=createjs.extend(a,createjs.Event);b.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(a,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.Event_constructor("progress"),this.loaded=a,this.total=null==b?1:b,this.progress=0==b?0:this.loaded/this.total}var b=createjs.extend(a,createjs.Event);b.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(a,"Event")}(window),this.createjs=this.createjs||{},function(){"use strict";function a(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=c.LOAD_TIMEOUT_DEFAULT}var b=a.prototype={},c=a;c.LOAD_TIMEOUT_DEFAULT=8e3,c.create=function(b){if("string"==typeof b){var d=new a;return d.src=b,d}if(b instanceof c)return b;if(b instanceof Object&&b.src)return null==b.loadTimeout&&(b.loadTimeout=c.LOAD_TIMEOUT_DEFAULT),b;throw new Error("Type not recognized.")},b.set=function(a){for(var b in a)this[b]=a[b];return this},createjs.LoadItem=c}(),function(){var a={};a.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,a.RELATIVE_PATT=/^[./]*?\//i,a.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,a.parseURI=function(b){var c={absolute:!1,relative:!1};if(null==b)return c;var d=b.indexOf("?");d>-1&&(b=b.substr(0,d));var e;return a.ABSOLUTE_PATT.test(b)?c.absolute=!0:a.RELATIVE_PATT.test(b)&&(c.relative=!0),(e=b.match(a.EXTENSION_PATT))&&(c.extension=e[1].toLowerCase()),c},a.formatQueryString=function(a,b){if(null==a)throw new Error("You must specify data.");var c=[];for(var d in a)c.push(d+"="+escape(a[d]));return b&&(c=c.concat(b)),c.join("&")},a.buildPath=function(a,b){if(null==b)return a;var c=[],d=a.indexOf("?");if(-1!=d){var e=a.slice(d+1);c=c.concat(e.split("&"))}return-1!=d?a.slice(0,d)+"?"+this._formatQueryString(b,c):a+"?"+this._formatQueryString(b,c)},a.isCrossDomain=function(a){var b=document.createElement("a");b.href=a.src;var c=document.createElement("a");c.href=location.href;var d=""!=b.hostname&&(b.port!=c.port||b.protocol!=c.protocol||b.hostname!=c.hostname);return d},a.isLocal=function(a){var b=document.createElement("a");return b.href=a.src,""==b.hostname&&"file:"==b.protocol},a.isBinary=function(a){switch(a){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},a.isImageTag=function(a){return a instanceof HTMLImageElement},a.isAudioTag=function(a){return window.HTMLAudioElement?a instanceof HTMLAudioElement:!1},a.isVideoTag=function(a){return window.HTMLVideoElement?a instanceof HTMLVideoElement:!1},a.isText=function(a){switch(a){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},a.getTypeByExtension=function(a){if(null==a)return createjs.AbstractLoader.TEXT;switch(a.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=c,this.resultFormatter=null,this._item=a?createjs.LoadItem.create(a):null,this._preferXHR=b,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var b=createjs.extend(a,createjs.EventDispatcher),c=a;c.POST="POST",c.GET="GET",c.BINARY="binary",c.CSS="css",c.IMAGE="image",c.JAVASCRIPT="javascript",c.JSON="json",c.JSONP="jsonp",c.MANIFEST="manifest",c.SOUND="sound",c.VIDEO="video",c.SPRITESHEET="spritesheet",c.SVG="svg",c.TEXT="text",c.XML="xml",b.getItem=function(){return this._item},b.getResult=function(a){return a?this._rawResult:this._result},b.getTag=function(){return this._tag},b.setTag=function(a){this._tag=a},b.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var a=new createjs.Event("initialize");a.loader=this._request,this.dispatchEvent(a),this._request.load()},b.cancel=function(){this.canceled=!0,this.destroy()},b.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},b.getLoadedItems=function(){return this._loadedItems},b._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},b._createTag=function(){return null},b._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},b._sendProgress=function(a){if(!this._isCanceled()){var b=null;"number"==typeof a?(this.progress=a,b=new createjs.ProgressEvent(this.progress)):(b=a,this.progress=a.loaded/a.total,b.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(b)}},b._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var a=new createjs.Event("complete");a.rawResult=this._rawResult,null!=this._result&&(a.result=this._result),this.dispatchEvent(a)}},b._sendError=function(a){!this._isCanceled()&&this.hasEventListener("error")&&(null==a&&(a=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(a))},b._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},b.resultFormatter=null,b.handleEvent=function(a){switch(a.type){case"complete":this._rawResult=a.target._response;var b=this.resultFormatter&&this.resultFormatter(this),c=this;b instanceof Function?b(function(a){c._result=a,c._sendComplete()}):(this._result=b||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(a);break;case"error":this._sendError(a);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(a.type)}},b.buildPath=function(a,b){return createjs.RequestUtils.buildPath(a,b)},b.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractLoader_constructor(a,b,c),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var b=createjs.extend(a,createjs.AbstractLoader);b.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},b._createTag=function(){},b._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},b._formatResult=function(a){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(a.getTag().src=a.getResult(!0)),a.getTag()},createjs.AbstractMediaLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a){this._item=a},b=createjs.extend(a,createjs.EventDispatcher);b.load=function(){},b.destroy=function(){},b.cancel=function(){},createjs.AbstractRequest=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractRequest_constructor(a),this._tag=b,this._tagSrcAttribute=c,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var b=createjs.extend(a,createjs.AbstractRequest);b.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var a=new createjs.Event("initialize");a.loader=this._tag,this.dispatchEvent(a),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},b.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;("loaded"==a.readyState||"complete"==a.readyState)&&this._handleTagComplete()},b._handleError=function(){this._clean(),this.dispatchEvent("error")},b._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},b._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},b._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},b._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},b._showTag=function(){this._tag.style.visibility=this._startTagVisibility},b._handleStalled=function(){},createjs.TagRequest=createjs.promote(a,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractRequest_constructor(a),this._tag=b,this._tagSrcAttribute=c,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var b=createjs.extend(a,createjs.TagRequest);b.load=function(){var a=createjs.proxy(this._handleStalled,this);this._stalledCallback=a;var b=createjs.proxy(this._handleProgress,this);this._handleProgress=b,this._tag.addEventListener("stalled",a),this._tag.addEventListener("progress",b),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;("loaded"==a.readyState||"complete"==a.readyState)&&this._handleTagComplete()},b._handleStalled=function(){},b._handleProgress=function(a){if(a&&!(a.loaded>0&&0==a.total)){var b=new createjs.ProgressEvent(a.loaded,a.total);this.dispatchEvent(b)}},b._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(a,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractRequest_constructor(a),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(a)}var b=createjs.extend(a,createjs.AbstractRequest);a.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],b.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response},b.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},b.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(a){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,a))}},b.setResponseType=function(a){this._request.responseType=a},b.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},b.getResponseHeader=function(a){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(a):null},b._handleProgress=function(a){if(a&&!(a.loaded>0&&0==a.total)){var b=new createjs.ProgressEvent(a.loaded,a.total);this.dispatchEvent(b)}},b._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},b._handleAbort=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,a))},b._handleError=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(a.message))},b._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},b._handleLoad=function(){if(!this.loaded){this.loaded=!0;var a=this._checkError();if(a)return void this._handleError(a);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},b._handleTimeout=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,a))},b._checkError=function(){var a=parseInt(this._request.status);switch(a){case 404:case 0:return new Error(a)}return null},b._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(a){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(a){}return null},b._createXHR=function(a){var b=createjs.RequestUtils.isCrossDomain(a),c={},d=null;if(window.XMLHttpRequest)d=new XMLHttpRequest,b&&void 0===d.withCredentials&&window.XDomainRequest&&(d=new XDomainRequest);else{for(var e=0,f=s.ACTIVEX_VERSIONS.length;f>e;e++){s.ACTIVEX_VERSIONS[e];try{d=new ActiveXObject(axVersions);break}catch(g){}}if(null==d)return!1}null==a.mimeType&&createjs.RequestUtils.isText(a.type)&&(a.mimeType="text/plain; charset=utf-8"),a.mimeType&&d.overrideMimeType&&d.overrideMimeType(a.mimeType),this._xhrLevel="string"==typeof d.responseType?2:1;var h=null;if(h=a.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(a.src,a.values):a.src,d.open(a.method||createjs.AbstractLoader.GET,h,!0),b&&d instanceof XMLHttpRequest&&1==this._xhrLevel&&(c.Origin=location.origin),a.values&&a.method==createjs.AbstractLoader.POST&&(c["Content-Type"]="application/x-www-form-urlencoded"),b||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),a.headers)for(var i in a.headers)c[i]=a.headers[i];for(i in c)d.setRequestHeader(i,c[i]);return d instanceof XMLHttpRequest&&void 0!==a.withCredentials&&(d.withCredentials=a.withCredentials),this._request=d,!0},b._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},b.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(a,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractMediaLoader_constructor(a,b,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(a)?this._tag=a:createjs.RequestUtils.isAudioTag(a.src)?this._tag=a:createjs.RequestUtils.isAudioTag(a.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(a)?a:a.src),null!=this._tag&&(this._preferXHR=!1)}var b=createjs.extend(a,createjs.AbstractMediaLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.SOUND},b._createTag=function(a){var b=document.createElement("audio");return b.autoplay=!1,b.preload="none",b.src=a,b},createjs.SoundLoader=createjs.promote(a,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},b=a.prototype={},c=a;c.create=function(a){if(a instanceof c||a instanceof Object){var b=new createjs.PlayPropsConfig;return b.set(a),b}throw new Error("Type not recognized.")},b.set=function(a){for(var b in a)this[b]=a[b];return this},b.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=c}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"Sound cannot be instantiated"}function b(a,b){this.init(a,b)}var c=a;c.INTERRUPT_ANY="any",c.INTERRUPT_EARLY="early",c.INTERRUPT_LATE="late",c.INTERRUPT_NONE="none",c.PLAY_INITED="playInited",c.PLAY_SUCCEEDED="playSucceeded",c.PLAY_INTERRUPTED="playInterrupted",c.PLAY_FINISHED="playFinished",c.PLAY_FAILED="playFailed",c.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],c.EXTENSION_MAP={m4a:"mp4"},c.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,c.defaultInterruptBehavior=c.INTERRUPT_NONE,c.alternateExtensions=[],c.activePlugin=null,c._masterVolume=1,Object.defineProperty(c,"volume",{get:function(){return this._masterVolume},set:function(a){if(null==Number(a))return!1;if(a=Math.max(0,Math.min(1,a)),c._masterVolume=a,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(a))for(var b=this._instances,d=0,e=b.length;e>d;d++)b[d].setMasterVolume(a)}}),c._masterMute=!1,Object.defineProperty(c,"muted",{get:function(){return this._masterMute},set:function(a){if(null==a)return!1;if(this._masterMute=a,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var b=this._instances,c=0,d=b.length;d>c;c++)b[c].setMasterMute(a);return!0}}),Object.defineProperty(c,"capabilities",{get:function(){return null==c.activePlugin?null:c.activePlugin._capabilities},set:function(){return!1}}),c._pluginsRegistered=!1,c._lastID=0,c._instances=[],c._idHash={},c._preloadHash={},c._defaultPlayPropsHash={},c.addEventListener=null,c.removeEventListener=null,c.removeAllEventListeners=null,c.dispatchEvent=null,c.hasEventListener=null,c._listeners=null,createjs.EventDispatcher.initialize(c),c.getPreloadHandlers=function(){return{callback:createjs.proxy(c.initLoad,c),types:["sound"],extensions:c.SUPPORTED_EXTENSIONS}},c._handleLoadComplete=function(a){var b=a.target.getItem().src;if(c._preloadHash[b])for(var d=0,e=c._preloadHash[b].length;e>d;d++){var f=c._preloadHash[b][d];if(c._preloadHash[b][d]=!0,c.hasEventListener("fileload")){var a=new createjs.Event("fileload");a.src=f.src,a.id=f.id,a.data=f.data,a.sprite=f.sprite,c.dispatchEvent(a)}}},c._handleLoadError=function(a){var b=a.target.getItem().src;if(c._preloadHash[b])for(var d=0,e=c._preloadHash[b].length;e>d;d++){var f=c._preloadHash[b][d];if(c._preloadHash[b][d]=!1,c.hasEventListener("fileerror")){var a=new createjs.Event("fileerror");a.src=f.src,a.id=f.id,a.data=f.data,a.sprite=f.sprite,c.dispatchEvent(a)}}},c._registerPlugin=function(a){return a.isSupported()?(c.activePlugin=new a,!0):!1},c.registerPlugins=function(a){c._pluginsRegistered=!0;for(var b=0,d=a.length;d>b;b++)if(c._registerPlugin(a[b]))return!0;return!1},c.initializeDefaultPlugins=function(){return null!=c.activePlugin?!0:c._pluginsRegistered?!1:c.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},c.isReady=function(){return null!=c.activePlugin},c.getCapabilities=function(){return null==c.activePlugin?null:c.activePlugin._capabilities},c.getCapability=function(a){return null==c.activePlugin?null:c.activePlugin._capabilities[a]},c.initLoad=function(a){return c._registerSound(a)},c._registerSound=function(a){if(!c.initializeDefaultPlugins())return!1;var d;if(a.src instanceof Object?(d=c._parseSrc(a.src),d.src=a.path+d.src):d=c._parsePath(a.src),null==d)return!1;a.src=d.src,a.type="sound";var e=a.data,f=null;if(null!=e&&(isNaN(e.channels)?isNaN(e)||(f=parseInt(e)):f=parseInt(e.channels),e.audioSprite))for(var g,h=e.audioSprite.length;h--;)g=e.audioSprite[h],c._idHash[g.id]={src:a.src,startTime:parseInt(g.startTime),duration:parseInt(g.duration)},g.defaultPlayProps&&(c._defaultPlayPropsHash[g.id]=createjs.PlayPropsConfig.create(g.defaultPlayProps));null!=a.id&&(c._idHash[a.id]={src:a.src});var i=c.activePlugin.register(a);return b.create(a.src,f),null!=e&&isNaN(e)?a.data.channels=f||b.maxPerChannel():a.data=f||b.maxPerChannel(),i.type&&(a.type=i.type),a.defaultPlayProps&&(c._defaultPlayPropsHash[a.src]=createjs.PlayPropsConfig.create(a.defaultPlayProps)),i},c.registerSound=function(a,b,d,e,f){var g={src:a,id:b,data:d,defaultPlayProps:f};a instanceof Object&&a.src&&(e=b,g=a),g=createjs.LoadItem.create(g),g.path=e,null==e||g.src instanceof Object||(g.src=e+a);var h=c._registerSound(g);if(!h)return!1;if(c._preloadHash[g.src]||(c._preloadHash[g.src]=[]),c._preloadHash[g.src].push(g),1==c._preloadHash[g.src].length)h.on("complete",createjs.proxy(this._handleLoadComplete,this)),h.on("error",createjs.proxy(this._handleLoadError,this)),c.activePlugin.preload(h);else if(1==c._preloadHash[g.src][0])return!0;return g},c.registerSounds=function(a,b){var c=[];a.path&&(b?b+=a.path:b=a.path,a=a.manifest);for(var d=0,e=a.length;e>d;d++)c[d]=createjs.Sound.registerSound(a[d].src,a[d].id,a[d].data,b,a[d].defaultPlayProps);return c},c.removeSound=function(a,d){if(null==c.activePlugin)return!1;a instanceof Object&&a.src&&(a=a.src);var e;if(a instanceof Object?e=c._parseSrc(a):(a=c._getSrcById(a).src,e=c._parsePath(a)),null==e)return!1;a=e.src,null!=d&&(a=d+a);for(var f in c._idHash)c._idHash[f].src==a&&delete c._idHash[f];return b.removeSrc(a),delete c._preloadHash[a],c.activePlugin.removeSound(a),!0},c.removeSounds=function(a,b){var c=[];a.path&&(b?b+=a.path:b=a.path,a=a.manifest);for(var d=0,e=a.length;e>d;d++)c[d]=createjs.Sound.removeSound(a[d].src,b);return c},c.removeAllSounds=function(){c._idHash={},c._preloadHash={},b.removeAll(),c.activePlugin&&c.activePlugin.removeAllSounds()},c.loadComplete=function(a){if(!c.isReady())return!1;var b=c._parsePath(a);return a=b?c._getSrcById(b.src).src:c._getSrcById(a).src,void 0==c._preloadHash[a]?!1:1==c._preloadHash[a][0]},c._parsePath=function(a){"string"!=typeof a&&(a=a.toString());var b=a.match(c.FILE_PATTERN);if(null==b)return!1;for(var d=b[4],e=b[5],f=c.capabilities,g=0;!f[e];)if(e=c.alternateExtensions[g++],g>c.alternateExtensions.length)return null;a=a.replace("."+b[5],"."+e);var h={name:d,src:a,extension:e};return h},c._parseSrc=function(a){var b={name:void 0,src:void 0,extension:void 0},d=c.capabilities;for(var e in a)if(a.hasOwnProperty(e)&&d[e]){b.src=a[e],b.extension=e;break}if(!b.src)return!1;var f=b.src.lastIndexOf("/");return b.name=-1!=f?b.src.slice(f+1):b.src,b},c.play=function(a,b,d,e,f,g,h,i,j){var k;k=createjs.PlayPropsConfig.create(b instanceof Object||b instanceof createjs.PlayPropsConfig?b:{interrupt:b,delay:d,offset:e,loop:f,volume:g,pan:h,startTime:i,duration:j});var l=c.createInstance(a,k.startTime,k.duration),m=c._playInstance(l,k);return m||l._playFailed(),l},c.createInstance=function(a,d,e){if(!c.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(a,d,e);var f=c._defaultPlayPropsHash[a];a=c._getSrcById(a);var g=c._parsePath(a.src),h=null;return null!=g&&null!=g.src?(b.create(g.src),null==d&&(d=a.startTime),h=c.activePlugin.create(g.src,d,e||a.duration),f=f||c._defaultPlayPropsHash[g.src],f&&h.applyPlayProps(f)):h=new createjs.DefaultSoundInstance(a,d,e),h.uniqueId=c._lastID++,h},c.stop=function(){for(var a=this._instances,b=a.length;b--;)a[b].stop()},c.setVolume=function(a){if(null==Number(a))return!1;if(a=Math.max(0,Math.min(1,a)),c._masterVolume=a,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(a))for(var b=this._instances,d=0,e=b.length;e>d;d++)b[d].setMasterVolume(a)},c.getVolume=function(){return this._masterVolume},c.setMute=function(a){if(null==a)return!1;if(this._masterMute=a,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var b=this._instances,c=0,d=b.length;d>c;c++)b[c].setMasterMute(a);return!0},c.getMute=function(){return this._masterMute},c.setDefaultPlayProps=function(a,b){a=c._getSrcById(a),c._defaultPlayPropsHash[c._parsePath(a.src).src]=createjs.PlayPropsConfig.create(b)},c.getDefaultPlayProps=function(a){return a=c._getSrcById(a),c._defaultPlayPropsHash[c._parsePath(a.src).src]},c._playInstance=function(a,b){var d=c._defaultPlayPropsHash[a.src]||{};if(null==b.interrupt&&(b.interrupt=d.interrupt||c.defaultInterruptBehavior),null==b.delay&&(b.delay=d.delay||0),null==b.offset&&(b.offset=a.getPosition()),null==b.loop&&(b.loop=a.loop),null==b.volume&&(b.volume=a.volume),null==b.pan&&(b.pan=a.pan),0==b.delay){var e=c._beginPlaying(a,b);if(!e)return!1}else{var f=setTimeout(function(){c._beginPlaying(a,b)},b.delay);a.delayTimeoutId=f}return this._instances.push(a),!0},c._beginPlaying=function(a,c){if(!b.add(a,c.interrupt))return!1;var d=a._beginPlaying(c);if(!d){var e=createjs.indexOf(this._instances,a);return e>-1&&this._instances.splice(e,1),!1}return!0},c._getSrcById=function(a){return c._idHash[a]||{src:a}},c._playFinished=function(a){b.remove(a);var c=createjs.indexOf(this._instances,a);c>-1&&this._instances.splice(c,1)},createjs.Sound=a,b.channels={},b.create=function(a,c){var d=b.get(a);return null==d?(b.channels[a]=new b(a,c),!0):!1},b.removeSrc=function(a){var c=b.get(a);return null==c?!1:(c._removeAll(),delete b.channels[a],!0)},b.removeAll=function(){for(var a in b.channels)b.channels[a]._removeAll();b.channels={}},b.add=function(a,c){var d=b.get(a.src);return null==d?!1:d._add(a,c)},b.remove=function(a){var c=b.get(a.src);return null==c?!1:(c._remove(a),!0)},b.maxPerChannel=function(){return d.maxDefault},b.get=function(a){return b.channels[a]};var d=b.prototype;d.constructor=b,d.src=null,d.max=null,d.maxDefault=100,d.length=0,d.init=function(a,b){this.src=a,this.max=b||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},d._get=function(a){return this._instances[a]},d._add=function(a,b){return this._getSlot(b,a)?(this._instances.push(a),this.length++,!0):!1},d._remove=function(a){var b=createjs.indexOf(this._instances,a);return-1==b?!1:(this._instances.splice(b,1),this.length--,!0)},d._removeAll=function(){for(var a=this.length-1;a>=0;a--)this._instances[a].stop()},d._getSlot=function(b){var c,d;if(b!=a.INTERRUPT_NONE&&(d=this._get(0),null==d))return!0;for(var e=0,f=this.max;f>e;e++){if(c=this._get(e),null==c)return!0;if(c.playState==a.PLAY_FINISHED||c.playState==a.PLAY_INTERRUPTED||c.playState==a.PLAY_FAILED){d=c;break}b!=a.INTERRUPT_NONE&&(b==a.INTERRUPT_EARLY&&c.getPosition()<d.getPosition()||b==a.INTERRUPT_LATE&&c.getPosition()>d.getPosition())&&(d=c)}return null!=d?(d._interrupt(),this._remove(d),!0):!1},d.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a,b,c,d){this.EventDispatcher_constructor(),this.src=a,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,b||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,c||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),d!==!1&&d!==!0&&this.setPlaybackResource(d),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},b=createjs.extend(a,createjs.EventDispatcher);b.play=function(a,b,c,d,e,f){var g;return g=createjs.PlayPropsConfig.create(a instanceof Object||a instanceof createjs.PlayPropsConfig?a:{interrupt:a,delay:b,offset:c,loop:d,volume:e,pan:f}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(g),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,g),this)},b.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},b.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},b.applyPlayProps=function(a){return null!=a.offset&&this.setPosition(a.offset),null!=a.loop&&this.setLoop(a.loop),null!=a.volume&&this.setVolume(a.volume),null!=a.pan&&this.setPan(a.pan),null!=a.startTime&&(this.setStartTime(a.startTime),this.setDuration(a.duration)),
this},b.toString=function(){return"[AbstractSoundInstance]"},b.getPaused=function(){return this._paused},b.setPaused=function(a){return a!==!0&&a!==!1||this._paused==a||1==a&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=a,a?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},b.setVolume=function(a){return a==this._volume?this:(this._volume=Math.max(0,Math.min(1,a)),this._muted||this._updateVolume(),this)},b.getVolume=function(){return this._volume},b.setMuted=function(a){return a===!0||a===!1?(this._muted=a,this._updateVolume(),this):void 0},b.getMuted=function(){return this._muted},b.setPan=function(a){return a==this._pan?this:(this._pan=Math.max(-1,Math.min(1,a)),this._updatePan(),this)},b.getPan=function(){return this._pan},b.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},b.setPosition=function(a){return this._position=Math.max(0,a),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},b.getStartTime=function(){return this._startTime},b.setStartTime=function(a){return a==this._startTime?this:(this._startTime=Math.max(0,a||0),this._updateStartTime(),this)},b.getDuration=function(){return this._duration},b.setDuration=function(a){return a==this._duration?this:(this._duration=Math.max(0,a||0),this._updateDuration(),this)},b.setPlaybackResource=function(a){return this._playbackResource=a,0==this._duration&&this._setDurationFromSource(),this},b.getPlaybackResource=function(){return this._playbackResource},b.getLoop=function(){return this._loop},b.setLoop=function(a){null!=this._playbackResource&&(0!=this._loop&&0==a?this._removeLooping(a):0==this._loop&&0!=a&&this._addLooping(a)),this._loop=a},b._sendEvent=function(a){var b=new createjs.Event(a);this.dispatchEvent(b)},b._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},b._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},b._beginPlaying=function(a){return this.setPosition(a.offset),this.setLoop(a.loop),this.setVolume(a.volume),this.setPan(a.pan),null!=a.startTime&&(this.setStartTime(a.startTime),this.setDuration(a.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},b._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},b._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},b._handleSoundReady=function(){},b._updateVolume=function(){},b._updatePan=function(){},b._updateStartTime=function(){},b._updateDuration=function(){},b._setDurationFromSource=function(){},b._calculateCurrentPosition=function(){},b._updatePosition=function(){},b._removeLooping=function(){},b._addLooping=function(){},b._pause=function(){},b._resume=function(){},b._handleStop=function(){},b._handleCleanUp=function(){},b._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(a,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},b=a.prototype;a._capabilities=null,a.isSupported=function(){return!0},b.register=function(a){var b=this._loaders[a.src];return b&&!b.canceled?this._loaders[a.src]:(this._audioSources[a.src]=!0,this._soundInstances[a.src]=[],b=new this._loaderClass(a),b.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[a.src]=b,b)},b.preload=function(a){a.on("error",createjs.proxy(this._handlePreloadError,this)),a.load()},b.isPreloadStarted=function(a){return null!=this._audioSources[a]},b.isPreloadComplete=function(a){return!(null==this._audioSources[a]||1==this._audioSources[a])},b.removeSound=function(a){if(this._soundInstances[a]){for(var b=this._soundInstances[a].length;b--;){var c=this._soundInstances[a][b];c.destroy()}delete this._soundInstances[a],delete this._audioSources[a],this._loaders[a]&&this._loaders[a].destroy(),delete this._loaders[a]}},b.removeAllSounds=function(){for(var a in this._audioSources)this.removeSound(a)},b.create=function(a,b,c){this.isPreloadStarted(a)||this.preload(this.register(a));var d=new this._soundInstanceClass(a,b,c,this._audioSources[a]);return this._soundInstances[a].push(d),d},b.setVolume=function(a){return this._volume=a,this._updateVolume(),!0},b.getVolume=function(){return this._volume},b.setMute=function(){return this._updateVolume(),!0},b.toString=function(){return"[AbstractPlugin]"},b._handlePreloadComplete=function(a){var b=a.target.getItem().src;this._audioSources[b]=a.result;for(var c=0,d=this._soundInstances[b].length;d>c;c++){var e=this._soundInstances[b][c];e.setPlaybackResource(this._audioSources[b])}},b._handlePreloadError=function(){},b._updateVolume=function(){},createjs.AbstractPlugin=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.SOUND)}var b=createjs.extend(a,createjs.AbstractLoader);a.context=null,b.toString=function(){return"[WebAudioLoader]"},b._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},b._sendComplete=function(){a.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},b._handleAudioDecoded=function(a){this._result=a,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,d,e){this.AbstractSoundInstance_constructor(a,b,d,e),this.gainNode=c.context.createGain(),this.panNode=c.context.createPanner(),this.panNode.panningModel=c._panningModel,this.panNode.connect(this.gainNode),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var b=createjs.extend(a,createjs.AbstractSoundInstance),c=a;c.context=null,c.destinationNode=null,c._panningModel="equalpower",b.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},b.toString=function(){return"[WebAudioSoundInstance]"},b._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},b._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},b._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},b._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},b._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},b._cleanUpAudioNode=function(a){return a&&(a.stop(0),a.disconnect(0),a=null),a},b._handleSoundReady=function(){this.gainNode.connect(c.destinationNode);var a=.001*this._duration,b=.001*this._position;b>a&&(b=a),this.sourceNode=this._createAndPlayAudioNode(c.context.currentTime-a,b),this._playbackStartTime=this.sourceNode.startTime-b,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(a-b)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},b._createAndPlayAudioNode=function(a,b){var d=c.context.createBufferSource();d.buffer=this.playbackResource,d.connect(this.panNode);var e=.001*this._duration;return d.startTime=a+e,d.start(d.startTime,b+.001*this._startTime,e-b),d},b._pause=function(){this._position=1e3*(c.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},b._resume=function(){this._handleSoundReady()},b._updateVolume=function(){var a=this._muted?0:this._volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)},b._calculateCurrentPosition=function(){return 1e3*(c.context.currentTime-this._playbackStartTime)},b._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},b._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},b._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(a,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.AbstractPlugin_constructor(),this._panningModel=c._panningModel,this.context=c.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=c._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var b=createjs.extend(a,createjs.AbstractPlugin),c=a;c._capabilities=null,c._panningModel="equalpower",c.context=null,c.isSupported=function(){var a=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||a||this._isFileXHRSupported()?(c._generateCapabilities(),null==c.context?!1:!0):!1},c.playEmptySound=function(){if(null!=c.context){var a=c.context.createBufferSource();a.buffer=c.context.createBuffer(1,1,22050),a.connect(c.context.destination),a.start(0,0,0)}},c._isFileXHRSupported=function(){var a=!0,b=new XMLHttpRequest;try{b.open("GET","WebAudioPluginTest.fail",!1)}catch(c){return a=!1}b.onerror=function(){a=!1},b.onload=function(){a=404==this.status||200==this.status||0==this.status&&""!=this.response};try{b.send()}catch(c){a=!1}return a},c._generateCapabilities=function(){if(null==c._capabilities){var a=document.createElement("audio");if(null==a.canPlayType)return null;if(null==c.context)if(window.AudioContext)c.context=new AudioContext;else{if(!window.webkitAudioContext)return null;c.context=new webkitAudioContext}c._compatibilitySetUp(),c.playEmptySound(),c._capabilities={panning:!0,volume:!0,tracks:-1};for(var b=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=b.length;f>e;e++){var g=b[e],h=d[g]||g;c._capabilities[g]="no"!=a.canPlayType("audio/"+g)&&""!=a.canPlayType("audio/"+g)||"no"!=a.canPlayType("audio/"+h)&&""!=a.canPlayType("audio/"+h)}c.context.destination.numberOfChannels<2&&(c._capabilities.panning=!1)}},c._compatibilitySetUp=function(){if(c._panningModel="equalpower",!c.context.createGain){c.context.createGain=c.context.createGainNode;var a=c.context.createBufferSource();a.__proto__.start=a.__proto__.noteGrainOn,a.__proto__.stop=a.__proto__.noteOff,c._panningModel=0}},b.toString=function(){return"[WebAudioPlugin]"},b._addPropsToClasses=function(){var a=this._soundInstanceClass;a.context=this.context,a.destinationNode=this.gainNode,a._panningModel=this._panningModel,this._loaderClass.context=this.context},b._updateVolume=function(){var a=createjs.Sound._masterMute?0:this._volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)},createjs.WebAudioPlugin=createjs.promote(a,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"HTMLAudioTagPool cannot be instantiated"}function b(){this._tags=[]}var c=a;c._tags={},c._tagPool=new b,c._tagUsed={},c.get=function(a){var b=c._tags[a];return null==b?(b=c._tags[a]=c._tagPool.get(),b.src=a):c._tagUsed[a]?(b=c._tagPool.get(),b.src=a):c._tagUsed[a]=!0,b},c.set=function(a,b){b==c._tags[a]?c._tagUsed[a]=!1:c._tagPool.set(b)},c.remove=function(a){var b=c._tags[a];return null==b?!1:(c._tagPool.set(b),delete c._tags[a],delete c._tagUsed[a],!0)},c.getDuration=function(a){var b=c._tags[a];return null==b?0:1e3*b.duration},createjs.HTMLAudioTagPool=a;var d=b.prototype;d.constructor=b,d.get=function(){var a;return a=0==this._tags.length?this._createTag():this._tags.pop(),null==a.parentNode&&document.body.appendChild(a),a},d.set=function(a){var b=createjs.indexOf(this._tags,a);-1==b&&(this._tags.src=null,this._tags.push(a))},d.toString=function(){return"[TagPool]"},d._createTag=function(){var a=document.createElement("audio");return a.autoplay=!1,a.preload="none",a}}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d){this.AbstractSoundInstance_constructor(a,b,c,d),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),c?this._audioSpriteStopTime=.001*(b+c):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var b=createjs.extend(a,createjs.AbstractSoundInstance);b.setMasterVolume=function(){this._updateVolume()},b.setMasterMute=function(){this._updateVolume()},b.toString=function(){return"[HTMLAudioSoundInstance]"},b._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},b._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},b._handleCleanUp=function(){var a=this._playbackResource;if(null!=a){a.pause(),a.loop=!1,a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{a.currentTime=this._startTime}catch(b){}createjs.HTMLAudioTagPool.set(this.src,a),this._playbackResource=null}},b._beginPlaying=function(a){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(a)},b._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var a=this._playbackResource;return a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.preload="auto",void a.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},b._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},b._pause=function(){this._playbackResource.pause()},b._resume=function(){this._playbackResource.play()},b._updateVolume=function(){if(null!=this._playbackResource){var a=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;a!=this._playbackResource.volume&&(this._playbackResource.volume=a)}},b._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},b._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(a){this._handleSetPositionSeek(null)}},b._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},b._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},b._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},b._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},b._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(a,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=c._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var b=createjs.extend(a,createjs.AbstractPlugin),c=a;c.MAX_INSTANCES=30,c._AUDIO_READY="canplaythrough",c._AUDIO_ENDED="ended",c._AUDIO_SEEKED="seeked",c._AUDIO_STALLED="stalled",c._TIME_UPDATE="timeupdate",c._capabilities=null,c.isSupported=function(){return c._generateCapabilities(),null!=c._capabilities},c._generateCapabilities=function(){if(null==c._capabilities){var a=document.createElement("audio");if(null==a.canPlayType)return null;c._capabilities={panning:!1,volume:!0,tracks:-1};for(var b=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=b.length;f>e;e++){var g=b[e],h=d[g]||g;c._capabilities[g]="no"!=a.canPlayType("audio/"+g)&&""!=a.canPlayType("audio/"+g)||"no"!=a.canPlayType("audio/"+h)&&""!=a.canPlayType("audio/"+h)}}},b.register=function(a){var b=createjs.HTMLAudioTagPool.get(a.src),c=this.AbstractPlugin_register(a);return c.setTag(b),c},b.removeSound=function(a){this.AbstractPlugin_removeSound(a),createjs.HTMLAudioTagPool.remove(a)},b.create=function(a,b,c){var d=this.AbstractPlugin_create(a,b,c);return d.setPlaybackResource(null),d},b.toString=function(){return"[HTMLAudioPlugin]"},b.setVolume=b.getVolume=b.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(a,"AbstractPlugin")}(),Livepress.sounds=function(){var a=LivepressConfig.noncdn_url+"/sounds/",b=1==LivepressConfig.sounds_default,c={},d=!1,e="vibes_04-04LR_02-01.mp3",f="vibes-short_09-08.mp3",g="piano_w-pad_01-16M_01-01.mp3",h="piano_w-pad_01-17M_01.mp3",i=createjs.Sound,j=0;return i.alternateExtensions=["mp3"],c.loadSounds=function(){i.registerSound(a+e,"commentAdded",1),i.registerSound(a+e,"firstComment",1),i.registerSound(a+f,"commentReplyToUserReceived",1),i.registerSound(a+e,"commented",1),i.registerSound(a+h,"newPost",1),i.registerSound(a+g,"postUpdated",1),d=!0},b&&c.loadSounds(),c.on=function(){b=!0,!1===d&&c.loadSounds()},c.off=function(){b=!1},c.play=function(a){0!==j&&window.clearTimeout(j),j=window.setTimeout(function(){i.play(a)},500)},c}();